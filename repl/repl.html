<template>
  <div id="editor">
    <ul id="file-tabs">
      <li data-filename="index.html" class="selected" onclick="changeSelectedFile()">index.html</li>
      <li data-filename="test-template.html" onclick="changeSelectedFile()">test-template.html</li>
    </ul>
    <ul id="files">
      <li data-filename="index.html" class="selected">
        <textarea oninput="render()">
          <html>
            <head>
              <title>SMPL / REPL</title>
            </head>
            
            <body>
              <template>
                this is a component inside the app.
              </template>              
              testografya
              <repl-component></rep-component>
              <script src="https://root/smpl/smpl.js"></script>
              <script>
                //get("repl-component", "repl.html");
              </script>
            </body>
            
            </html>    
        </textarea>
      </li>
      <li data-filename="test-template.html">
        <textarea>
          <template>
            this is a component inside the app.
          </template>
        </textarea>
      </li>
    </ul>

  </div>
  <div id="result">
    <iframe id="preview"></iframe>
    <div id="console"></div>
  </div>
</template>


<style>
  :host {
    display: flex;
    width: 800px;
    height: 450px;    
  }

  #editor {
    display: flex;
    flex-direction: column;
    width: 60%;
  }

  #editor textarea {
    flex: 1;    
  }

  #result {
    width: 30%;    
  }

  #files {
    flex: 1;
  }

  #files li {
    width: 100%;
    display: none;
  }

  #files li.selected {
    display: inline-block;
  }
  #files li,
  #files textarea {
    width: 100%;
    height: 100%;    
  }

  iframe#preview {
    width: 100%;
    height: 100%;    
  }
</style>

<script>
  class {
    data = {
      // your data comes here
    }
    methods = {
      render() {
        //var content = component.dom.querySelector("#files li[data-filename=index\\.html] textarea").value;
        //var blob = new Blob([content], {type: "text/html; charset=utf-8"});
        //component.dom.querySelector("iframe").src = URL.createObjectURL(blob);        
        //component.dom.querySelector("iframe").srcdoc = content;
      },
      changeSelectedFile(event) {
        event.target.classList.add("selected")
      }
    }
    lifecycle = {
      afterFirstRender() {
        component.methods.render();
      }
    }
  }
</script>