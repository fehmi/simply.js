<template>
  <div id="editor">
    <ul id="files">
      <li class="selected">index.html</li>
    </ul>
    <textarea oninput="render(event)">
      <html>
        <head>

          
          <title>SMPL / REPL</title>
        </head>
        
        <body>
          testografya
          <repl-component></rep-component>
          <script src="https://root/smpl/smpl.js"></script>
          <script>
            //get("repl-component", "repl.html");
          </script>
        </body>
        
        </html>    
    </textarea>
  </div>
  <div id="result">
    <iframe id="preview"></iframe>
    <div id="console"></div>
  </div>
</template>


<style>
  :host {
    display: flex;
    width: 800px;
    height: 450px;    
  }

  #editor {
    display: flex;
    flex-direction: column;
    width: 60%;
  }

  #editor textarea {
    flex: 1;    
  }

  #result {
    width: 30%;    
  }

  iframe#preview {
    width: 100%;
    height: 100%;    
  }
</style>


<script>
  class {
    data = {
      smplsjs: ""
    }
    methods = {
      render(event) {
        var content = component.dom.querySelector("textarea").value;
        //var blob = new Blob([content], {type: "text/html; charset=utf-8"});
        //component.dom.querySelector("iframe").src = URL.createObjectURL(blob);        
        component.dom.querySelector("iframe").srcdoc = content;
      }
    }
    lifecycle = {
      afterFirstRender() {
        console.log(CodeMirror);
        component.methods.render();
      }
    }
  }
</script>