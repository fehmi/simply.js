simply={components:{},parseTemplate:function(parsingArgs){var{template:template,data:data,style:style,state:state,parent:parent,props:props,component:component,dom:dom,methods:methods,lifecycle:lifecycle,name:name}=parsingArgs;if(!simply.components[name].templateRenderFn){var start=performance.now();template=simply.addUniqueKeys(template,component);var end=performance.now();(template=template.replace(/[\r\n]+/g,"")).includes("${")&&(template=template.replace(/\$\{/g,"minyeli{"));const bucketParts=[],len=template.length,tagMatchRegex=/(<(?:if\s+cond="([^"]+)"|elsif\s+cond="([^"]+)"|each[^>]*|else|\/(?:each|if|elsif|else))>)/g,varRegex=/\{\{\s*([^{}]+?)\s*\}\}/g,inTagVarRegex=/:="([^"]+)"/g,excludeRanges=[];let scriptMatch;const scriptRegex=/<script[^>]*>([\s\S]*?)<\/script>/gi;for(;null!==(scriptMatch=scriptRegex.exec(template));)excludeRanges.push([scriptMatch.index,scriptMatch.index+scriptMatch[0].length]);const styleRegex=/<style[^>]*>([\s\S]*?)<\/style>/gi;for(;null!==(scriptMatch=styleRegex.exec(template));)excludeRanges.push([scriptMatch.index,scriptMatch.index+scriptMatch[0].length]);function isExcluded(index){for(const[start,end]of excludeRanges)if(index>=start&&index<end)return!0;return!1}const logicPoints=[];let tagMatch,varMatch,inTagMatch;for(;null!==(tagMatch=tagMatchRegex.exec(template));){if(isExcluded(tagMatch.index))continue;const fullTag=tagMatch[1];let logic="";if("</each>"===fullTag)logic="}};";else if("<else>"===fullTag)logic="else {";else if("</if>"===fullTag||"</elsif>"===fullTag||"</else>"===fullTag)logic="}";else if(tagMatch[2])logic="if ("+unescape(tagMatch[2])+") {";else if(tagMatch[3])logic="else if ("+unescape(tagMatch[3])+") {";else if(fullTag.startsWith("<each")){const groups=parseEachTag(fullTag),iter="s"+Math.random().toString(36).slice(2,7);logic=`\n    for (let ${iter} in ${groups.of}) {\n        if (!Object.prototype.hasOwnProperty.call(${groups.of}, ${iter})) continue;\n        const ${groups.as} = ${groups.of}[${iter}];\n\n        // 1. Üst döngüden gelen zinciri al.\n        // En dıştaki döngüdeysek 'undefined' olacağı için boş string kabul et.\n        const parentChain = (typeof keyChain !== 'undefined') ? keyChain : "";\n\n        // 2. YENİ SCOPE AÇIYORUZ\n        {\n            // 3. Mevcut zinciri oluştur: (Parent varsa sonuna tire koy) + (Mevcut Index)\n            // Örnek: Parent "2-5", iter "3" ise sonuç: "2-5-3"\n            // Örnek: Parent "", iter "2" ise sonuç: "2"\n            let keyChain = (parentChain === "" ? "" : parentChain + "-") + ${iter};\n\n            // Render fonksiyonun kullandığı değişkene ata\n            let uniqueItemKey = keyChain;\n\n            ${groups.key?`let ${groups.key} = ${iter};`:""}\n            ${groups.index?`let ${groups.index} = parseInt(${iter});`:""}\n            \n            // DİKKAT: Burada süslü parantezi kapatmıyoruz! \n            // Kapanış </each> tag'inde yapılmalı.\n    `}logic&&logicPoints.push({start:tagMatch.index,end:tagMatch.index+fullTag.length,logic:logic})}for(;null!==(varMatch=varRegex.exec(template));){if(isExcluded(varMatch.index))continue;let isInsideTag=!1;for(const lp of logicPoints)if(varMatch.index>=lp.start&&varMatch.index<lp.end){isInsideTag=!0;break}if(isInsideTag)continue;let variable=varMatch[1];/^\{.*\}$/.test(variable)&&(variable='"'+varMatch[0]+'"'),logicPoints.push({start:varMatch.index,end:varMatch.index+varMatch[0].length,logic:"ht+="+variable+";"})}for(;null!==(inTagMatch=inTagVarRegex.exec(template));)isExcluded(inTagMatch.index)||logicPoints.push({start:inTagMatch.index,end:inTagMatch.index+inTagMatch[0].length,logic:"ht+="+inTagMatch[1]+";"});logicPoints.sort((a,b)=>a.start-b.start);let lastEnd=0;for(const point of logicPoints){if(point.start>lastEnd){const staticText=template.substring(lastEnd,point.start);staticText.trim()&&bucketParts.push("ht+=`"+staticText+"`;")}bucketParts.push(point.logic),lastEnd=point.end}if(lastEnd<len){const remaining=template.substring(lastEnd).trimEnd();remaining&&bucketParts.push("ht+=`"+remaining+"`;")}function parseEachTag(eachTag){function getAttr(regex){var m=eachTag.match(regex);return m?m[1]:void 0}return{of:getAttr(/of="([^"]+)"/),as:getAttr(/as="([^"]+)"/),key:getAttr(/key="([^"]+)"/),index:getAttr(/index="([^"]+)"/)}}let bucket=bucketParts.join("").replace(/minyeli/g,"$");simply.components[name].templateRenderFn=new Function("scope",`var { template, data, style, state, parent, props, component, dom, methods, lifecycle, name } = scope;\n       let ht = "";\n       ${bucket}\n       return ht;`)}return simply.components[name].templateRenderFn(parsingArgs)},addUniqueKeys(template,component){const excludedTags=new Set(["if","elsif","else","each"]);function addKeysInsideEach(template){let insideEach=0,tagIndex=0;const tagRe=/<\/?([a-zA-Z][\w:-]*)([^>]*)>/g;return template.replace(tagRe,(fullTag,tagName,attrs)=>{const isClose="/"===fullTag[1],lowerName=tagName.toLowerCase();return"each"===lowerName?(insideEach+=isClose?-1:1,fullTag):insideEach>0&&!isClose?excludedTags.has(lowerName)||/\bkey\s*=/.test(attrs)?fullTag:(tagIndex++,`<${tagName} key="${component.uid}-${lowerName}${tagIndex}{{uniqueItemKey}}"${attrs}>`):fullTag})}template=addKeysInsideEach(template);let keyi=0;return template=template.replace(/<(?!\/)([a-zA-Z0-9-]+)([^>]*)>/g,(match,tagName,attributes)=>excludedTags.has(tagName.toLowerCase())||attributes.includes("key=")?match:`<${tagName} key="${component.uid}-${tagName}-${keyi++}"${attributes}>`)},extractVarName(expr){let match=expr.match(/([a-zA-Z_$][\w.$]*)/);return match?match[1].replace(/\./g,"-"):expr.replace(/\W+/g,"-")},parseStyle:function(parsingArgs){var{template:template,data:data,style:style,state:state,parent:parent,props:props,component:component,dom:dom,methods:methods,lifecycle:lifecycle,name:name}=parsingArgs;if(!simply.components[name].styleRenderFn){function convertConditionals(cssString){let s=cssString,hasDynamicVar=!1,pos=s.indexOf("var(");for(;-1!==pos;){if(45!==s.charCodeAt(pos+4)||45!==s.charCodeAt(pos+5)){hasDynamicVar=!0;break}pos=s.indexOf("var(",pos+1)}return hasDynamicVar&&(s=s.replace(/var\(([^()]*(?:\([^()]*(?:\([^()]*(?:\([^()]*\)[^()]*)*\)[^()]*)*\)[^()]*)*)\)/g,(match,content)=>content.trim().startsWith("--")?match:"` + ("+content+") + `")),s.includes("cond:[")&&(s=s.replace(/&cond:\[elsif="(.+?)"\]\s*{/g,"`; else if ($1) { ht+=`").replace(/&cond:\[else\]\s*{/g,"`; else { ht+=`").replace(/&cond:\[if="(.+?)"\]\s*{/g,"`; if ($1) { ht+=`").replace(/ht\+=\`\s*`;\s*(else)/g,"$1")),s}const markConditions=str=>{let stack=[],nextIsTarget=!1;return str.replace(/(cond:\[)|(\{)|(\})/g,(match,trigger,open,close)=>trigger?(nextIsTarget=!0,match):open?(stack.push(nextIsTarget),nextIsTarget=!1,match):close?stack.pop()?"`;} ht+=`":match:void 0)};var processedCSS=parsingArgs.style;processedCSS.includes("cond:[")&&(processedCSS=markConditions(processedCSS));var fixiedConditions,renderFunc="var ht = ``;";renderFunc+="ht += `"+convertConditionals(processedCSS)+"`;",simply.components[name].styleRenderFn=new Function("scope",`var { template, data, style, state, parent, props, component, dom, methods, lifecycle, name } = scope;\n         ${renderFunc}\n         return ht;`)}return simply.components[name].styleRenderFn(parsingArgs)},loadJS:function(src,cb,waitBeforeCb){
/*! loadJS: load a JS file asynchronously. [c]2014 @scottjehl, Filament Group, Inc. (Based on http://goo.gl/REQGQ by Paul Irish). Licensed MIT */
if(document.querySelectorAll('[src="'+src+'"]').length>0)if(window[waitBeforeCb])cb();else var tryAmount=10,tryCount=0,a=setInterval(()=>{!window[waitBeforeCb]&&tryCount<10?tryCount+=1:(cb(),clearInterval(a))},50);else{var tmp,ref=window.document.getElementsByTagName("script")[0],script=window.document.createElement("script");script.src=src,script.async=!0,ref.parentNode.insertBefore(script,ref),cb&&"function"==typeof cb&&(script.onload=cb)}return script},get:function(path,name){function loadAndRegister(p){simply.loadComponent(p,name,(function(component){simply.getSettings(component,(function(settings){simply.registerComponent(settings)}))}))}if(simply.gets=simply.gets||[],Array.isArray(path))for(let i=0;i<path.length;i++)simply.gets.push(path[i]),loadAndRegister(path[i]);else simply.gets.push(path),loadAndRegister(path)},jsdoc:function(str){return str.replace(/(\n[ \t]*\/\/\/[^\n]*)+/g,(function($){var replacement;return"\n/**"+$.replace(/^[ \t]*\/\/\//gm,"").replace(/(\n$|$)/,"*/$1")}))},loadComponent:function(path,name,callback,triedWithCorsProxy=!1){var start=performance.now();if(name){let i=name.lastIndexOf(".");-1!==i&&(name=name.slice(0,i))}else{const proxy="cors.woebegone.workers.dev/?";let p=path,i=p.indexOf(proxy);-1!==i&&(p=p.slice(i+proxy.length)),path=p,i=p.indexOf("?"),-1!==i&&(p=p.slice(0,i)),i=p.indexOf("#"),-1!==i&&(p=p.slice(0,i)),i=p.lastIndexOf("/"),-1!==i&&(p=p.slice(i+1)),i=p.lastIndexOf("."),-1!==i&&(p=p.slice(0,i)),name=p}const isBlob=path.startsWith("blob:"),fetchUrl=undefined;fetch(path,{cache:"no-cache"}).then(response=>response.ok?response.text():(console.error("HTTP error:",response.status),null)).then(text=>{if(!text)return;let parsed;try{parsed=simply.splitComponent(text)}catch(e){return void console.error("splitComponent error:",e)}simply.components[name]=parsed,callback({name:name,template:parsed.template,style:parsed.style,script:parsed.script,docStr:text})}).catch(error=>{const isCorsOrNetworkError=undefined;if(!(error instanceof TypeError&&/failed fetch|network|cors/i.test(error.message))||triedWithCorsProxy||path.startsWith("https://cors.woebegone.workers.dev/"))console.error(error);else{const proxyUrl="https://cors.woebegone.workers.dev/?"+path;simply.loadComponent(proxyUrl,name,callback,!0)}});var end=performance.now()},request:function(url,callback,async=!1){var request=new XMLHttpRequest;request.open("GET",url,async),request.onload=function(){if(this.status>=200&&this.status<400){try{response=JSON.parse(this.responseText)}catch(err){response=this.responseText}callback&&callback(response)}},request.send()},splitComponent:function(string){var start=performance.now();let template="",style="",script="";const regex=/<(html|style|script)[^>]*>([\s\S]*?)<\/\1>/gi;let match;for(;null!==(match=regex.exec(string));){const tagName=match[1].toLowerCase(),content=match[2];"html"===tagName?template=content:"style"===tagName?style=content:"script"===tagName&&(script=content)}var end=performance.now();return{template:template,style:style,script:script}},processPropTemplate:function(string){var propsFromTemplate=string;return propsFromTemplate=(propsFromTemplate=propsFromTemplate.replace(/[^\\]'/g,'"').replace(/\\'/g,"'")).replace(/(?:\r\n|\r|\n)/g," "),propsFromTemplate=Function("return "+propsFromTemplate)(),propsFromTemplate=simply.customStringify(propsFromTemplate),propsFromTemplate=JSON.parse(propsFromTemplate)},parseProp:function(contentString){var type,value,parsed,content;content=contentString.replace(/[^\\]'/g,'"'),content=content.replace(/\\\'/g,"'");try{parsed=JSON.parse(content),type=typeof parsed,value=parsed,Array.isArray(parsed)&&(type="array")}catch(e){let func=content;func=eval(func),"function"==typeof func&&(type="function",value=eval("("+func+")"))}finally{return null==type&&(type="string",value=contentString),{type:type,value:value,str:content}}},prepareAttr:function(value){let type=typeof value;return Array.isArray(value)||"object"==type||"number"==type||"boolean"==type?simply.customStringify(value).replace(/[^\\]'/g,"\\'").replace(/[^\\]"/g,"'").replace(/\"/g,"'"):"function"==type?value.toString().replace(/[^\\]'/g,'"').replace(/\\'/g,"'"):value},objToPropString:function(obj){return JSON.stringify(obj).replace(/'/g,"&apos;")},customStringify:function(v){const cache=new Set;return JSON.stringify(v,(function(key,value){if("__c_"!==key&&"__o_"!==key&&"__p_"!==key&&"__r_"!==key){if("object"==typeof value&&null!==value){if(cache.has(value))try{return JSON.parse(JSON.stringify(value))}catch(err){return}cache.add(value)}else if("function"==typeof value)return value.toString().replace(/[^\\]'/g,'"').replace(/\\'/g,"'");return value}}))},getSettings:function({name:name,template:template,style:style,script:script,docStr:docStr},callback){function getListeners(settings){return settings}callback({name:name,template:template,style:style,script:script,docStr:docStr})},framerStaff:function(dom,name,uid,component,props,lifecycle){const framerComponentObserver=undefined;function triggerOnTapFromDOM(domElement){for(var current=domElement;current&&"FRAMER-COMPONENT"!==current.tagName;){var fiberKey=null;try{for(var keys=Object.keys(current),i=0;i<keys.length;i++)if(0===keys[i].indexOf("__reactFiber$")){fiberKey=keys[i];break}}catch(e){}var fiber=fiberKey?current[fiberKey]:null;try{var onTap;if("function"==typeof(onTap=fiber.return.child.pendingProps.onTap))return onTap(),void setTimeout(()=>{try{self.lifecycle.framerComponentClicked(current)}catch(e){}},0)}catch(e){}try{var onTap;if("function"==typeof(onTap=fiber.return.child.child.stateNode.props.onTap))return onTap(),void setTimeout(()=>{try{self.lifecycle.framerComponentClicked(current)}catch(e){}},0)}catch(e){}current=current.parentElement}}new MutationObserver(mutations=>{for(const mutation of mutations)for(const node of mutation.addedNodes)if(node.nodeType===Node.ELEMENT_NODE&&"FRAMER-COMPONENT"===node.tagName&&!node.hasAttribute("uid")){const framerComponentUid="id"+Math.random().toString(16).slice(2),path=node.getAttribute("path");node.setAttribute("uid",framerComponentUid),node.setAttribute("style","height: auto; width: auto"),node.setAttribute("rendered",!0),window.parent.postMessage({method:"component-request",path:path,name:name,framerComponentUid:framerComponentUid,uid:uid},"*"),node.addEventListener("click",e=>{node.contains(e.target)&&triggerOnTapFromDOM(e.target)},{passive:!0})}}).observe(dom,{childList:!0,subtree:!0}),dom.addEventListener("click",(function(e){const target=undefined,link=e.target.closest("a");link&&(link.closest("framer-component")||link.hasAttribute("route-framer"))&&(e.preventDefault(),e.stopPropagation(),window.parent.postMessage({method:"link-click",link:link.getAttribute("href"),uid:uid,name:name},"*"))})),self.framerPropsListener=function(event){event.preventDefault(),event.stopPropagation(),"set-props"===event.data.method&&(Object.assign(props,event.data.props),lifecycle&&lifecycle.framerPropsUpdated&&lifecycle.framerPropsUpdated(),component.render())},component.runInFramer=function(codeToRun){window.parent.postMessage({method:"run-in-framer",name:name,uid:uid,code:"return "+codeToRun.toString()},"*")},window.addEventListener("message",self.framerPropsListener),window.parent.postMessage({method:"simply-ready",uid:uid,name:name},"*")},findElementWithCB(element){let current=element;for(;current;){if(current.cb&&current.cb.state)return current;current=current.parentNode?current.parentNode:current.host?current.host:null}return null},classCache:{},getDomParentAndShadow(component){var shadow=!1,dom,parent;return null!==component.getAttribute("isolated")&&"false"!==component.getAttribute("isolated")&&(shadow=!0),shadow?(dom=component.attachShadow({mode:"open"}),(parent=component.getRootNode().host)||(parent=simply.findShadowRootOrCustomElement(component))):(dom=component,parent=simply.findShadowRootOrCustomElement(component)),{dom:dom,parent:parent,shadow:shadow}},pathForTemplateSearch(currentPath,prefix){prefix=prefix||"data";for(var clean,parts=currentPath.replace(/\[.*?\]/g,"").replace(/\?\./g,".").split("."),out=prefix,i=0;i<parts.length;i++){var p=parts[i];if(p){out+="."+p;break}}return[out]},templateUsesAnyChange(template,changes,prefix){if(template){var normalized=template.replace(/\?\./g,".");for(const{currentPath:currentPath}of changes){const paths=simply.pathForTemplateSearch(currentPath,prefix);for(const path of paths)if(normalized.includes(path))return!0}}return!1},react:function(changes,from,component,template,style){if(void 0!==component.lifecycle)if("props"===from){if(void 0!==component.lifecycle.whenPropChange&&!1===component.lifecycle.whenPropChange(changes))return!1}else if("state"===from){if(component.lifecycle&&component.lifecycle.whenStateChange&&!1===component.lifecycle.whenStateChange(changes))return!1}else if(void 0!==component.lifecycle.whenDataChange&&!1===component.lifecycle.whenDataChange(changes))return!1;if("state"===from){if(!simply.templateUsesAnyChange(template,changes,"state")&&!simply.templateUsesAnyChange(style,changes,"state"))return!1}else if("props"===from){if(!simply.templateUsesAnyChange(template,changes,"props")&&!simply.templateUsesAnyChange(style,changes,"props"))return!1}else if("data"===from&&!simply.templateUsesAnyChange(template,changes,"data")&&!simply.templateUsesAnyChange(style,changes,"data"))return!1;component.render(changes)},getParentState(parent){if(parent){let current=parent;for(;current;){if(current.state)return{state:current.state,cbState:parent.cb.state};current=current.parent}}return null},setupObservableSlims(self){var t=self.template,data=ObservableSlim.create({},.1,(function(changes){if(self.cb.data)for(const[key,cbFn]of Object.entries(self.cb.data))cbFn&&cbFn(changes)}));(t.includes("data.")||t.includes("data?.")||self.script.includes("data.")||self.script.includes("data?."))&&(self.cb.data={},self.cb.data[self.uid]=function(changes){self.react(changes,"data",self,t,self.s)},self.setCbData(self.cb.data));for(var i=0;i<self.attributes.length;i++){var attrib=self.attributes[i];"cb"!==attrib.name&&(self.props[attrib.name]=simply.parseProp(attrib.value).value)}var props=ObservableSlim.create(self.props,!1,(function(changes){if(self.cb.props)for(const[key,cbFn]of Object.entries(self.cb.props))cbFn&&cbFn(changes)}));if((t.includes("props.")||t.includes("props?.")||self.script.includes("props.")||self.script.includes("props?."))&&(self.cb.props={},self.cb.props[self.uid]=function(changes){self.react(changes,"props",self,t,self.s)}),self.state.__isProxy){var state=self.state;if(t.includes("state.")||t.includes("state?.")||self.script.includes("state.")||self.script.includes("state?.",self.s.includes("state.")||self.s.includes("state?."))){var p=simply.findElementWithCB(self.parent);p&&(p.cb.state[self.uid]=function(changes){self.react(changes,"state",self,t,self.s)})}}else{var state=ObservableSlim.create({},!1,(function(changes){if(self.cb.state)for(const[key,cbFn]of Object.entries(self.cb.state))cbFn&&cbFn(changes)}));self.cb.state={},self.cb.state[self.uid]=function(changes){self.react(changes,"state",self,t,self.s)}}return{data:data,props:props,state:state}},restoreCache(component){if(component.hasAttribute("cache")&&"false"!==component.getAttribute("cache")){component.cache={};try{var cachedData=simply.cache[simply.lastPath][component.elementId].data;if(cachedData){component.cache.data=cachedData;for(const key in cachedData)Object.hasOwnProperty.call(cachedData,key)&&(component.data[key]=cachedData[key])}}catch(e){}}if(component.hasAttribute("cache")&&"false"!==component.getAttribute("cache"))try{var cachedProps=simply.cache[simply.lastPath][component.elementId].props;if(cachedProps){component.cache.props=cachedProps;for(const key in cachedProps)Object.hasOwnProperty.call(cachedProps,key)&&(component.props[key]=cachedProps[key])}}catch(e){}},registerComponent:function({template:template,style:style,name:name,script:script,docStr:docStr,noFile:noFile}){if(!customElements.get(name)){if(script=script.trim()){if(!simply.classCache[name]){const className="simply_"+name.replace(/-/g,"_");script=script.replace(/^class\s+(simply\s*)?\{/,"class "+className+" {"),simply.classCache[name]=new Function("state","methods","lifecycle","component","dom","parent","simply","cb","data","props",script.trim()+"\nreturn simply_"+name.replace(/-/g,"_")+"; //@ sourceURL="+name+".html")}var CachedClass=simply.classCache[name]}class simplyComponent extends HTMLElement{constructor(){super();var{dom:dom,parent:parent,shadow:shadow}=simply.getDomParentAndShadow(this),uid=Math.random().toString(36).slice(2,8),component=this,methods={},lifecycle={},props={},cb={},sfcClass={},settings={};Object.assign(this,{component:this,dom:dom,parent:parent,uid:uid,shadow:shadow,template:template,s:style,script:script,props:{},cb:{},elementId:simply.getElementUniqueId(dom),react:simply.react,name:name}),this.setData=function(newValue){data=newValue},this.setCbData=function(newValue){cb.data=newValue},this.setState=function(newValue){state=newValue},this.setCbState=function(newValue){cb.state=newValue},this.setProps=function(newValue){props=newValue},this.setCbProps=function(newValue){cb.props=newValue};const parentState=simply.getParentState(parent);this.state=parentState?parentState.state:{},parentState&&(this.cb.state=parentState.cbState);var{data:data,props:props,state:state}=simply.setupObservableSlims(this),sfcClassDef;(Object.assign(this,{data:data,props:props,state:state}),ObservableSlim.pause(data),ObservableSlim.pause(props),ObservableSlim.pause(state),CachedClass)&&(sfcClass=new(CachedClass(state,methods,lifecycle,this,dom,parent,simply,cb,data,props)),Object.assign(data,sfcClass.data||{}),Object.assign(props,sfcClass.props||{}),Object.assign(methods,sfcClass.methods||{}),Object.assign(lifecycle,sfcClass.lifecycle||{}),Object.assign(settings,sfcClass.settings||{}));Object.assign(this,{sfcClass:sfcClass,settings:settings,lifecycle:lifecycle,methods:methods}),sfcClass.state&&Object.assign(state,sfcClass.state),simply.restoreCache(this),Object.defineProperty(this,"state",{get:function(){return state},set:function(v){state=v}}),Object.defineProperty(this,"parent",{get:function(){return parent},set:function(v){parent=v}}),void 0!==this.lifecycle&&void 0!==this.lifecycle.afterConstruct&&this.lifecycle.afterConstruct()}observeAttrChange(el,callback){var self=this,observer=new MutationObserver((function(mutations){mutations.forEach((function(mutation){if("attributes"===mutation.type){var newVal=mutation.target.getAttribute(mutation.attributeName);callback(mutation.attributeName,newVal)}}))}));return observer.observe(el,{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeOldValue:!0,characterDataOldValue:!1}),observer}connectedCallback(){function extractParentBindings(template){var bindings={};const regex=/((?:parent\??\.))+(?=(data|props)\??[\.\[])/g;let match;for(;null!==(match=regex.exec(template));){const parentPart=match[0],bindType=match[2],depth=undefined,index=(parentPart.match(/parent\??\.?/g)||[]).length-1;bindings[index]||(bindings[index]={}),bindings[index][bindType]=!0}return bindings}this.observeAttrChange(this,(function(name,newValue){if(newValue!==simply.prepareAttr(self.props[name])){try{newValue=simply.parseProp(newValue).value}catch(e){newValue=newValue}newValue?self.props[name]=newValue:delete self.props[name],void 0!==self.lifecycle&&void 0!==self.lifecycle.whenPropChange&&self.lifecycle.whenPropChange(name,self.props[name],newValue)}}));for(var current=this.parent,self=this,parentIndex=0,bindings=extractParentBindings(template),current=this.parent,parentIndex=0;current;){var bind=bindings[parentIndex];bind&&current.cb&&(bind.data&&current.data&&current.cb.data&&(current.cb.data[this.uid]=function(changes){self.react(changes,"data",self,template)},current.setData=current.data),bind.props&&current.props&&current.cb.props&&(current.cb.props[this.uid]=function(changes){self.react(changes,"props",self,template)},current.setProps=current.props)),current=current.parent,parentIndex++}this.render()}render(){let m,regex=/\s+on[a-z]+(\s*)=(\s*)("((?:\\.|[^"])*)"|'((?:\\.|[^'])*)')/gm;for(;null!==(m=regex.exec(template));){m.index===regex.lastIndex&&regex.lastIndex++;let capturedMatch=m[4]||m[5];if(this.shadow)var match="simply.findShadowRootOrCustomElement(this)";else var match="simply.findShadowRootOrCustomElement(this)";if(-1==capturedMatch.indexOf(match)){var builtinVars=["state.","parent.","methods.","lifecycle.","data.","props.","component.","dom."],newValue=m[0];builtinVars.forEach(v=>{newValue=(newValue=newValue.replaceAll(v,match+"."+v)).replaceAll("."+match,"")}),template=template.replaceAll(m[0],newValue)}}var tmpl;let parsingArgs={template:template,style:style,data:this.data,state:this.state,parent:this.parent,methods:this.methods,props:this.props,component:this.component,dom:this.dom,methods:this.methods,lifecycle:this.lifecycle,name:this.name};var self=this;if(this.rendered){var start=performance.now();void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeRerender&&this.lifecycle.beforeRerender();let parsedTemplate=simply.parseTemplate(parsingArgs);var end=performance.now(),parsedStyle=simply.parseStyle(parsingArgs);if(simply.components[name].lastParsedStyle!==parsedStyle){var start=performance.now();self.sheet.replaceSync(parsedStyle);var end=performance.now()}if(this.shadow){var newDomAsString="<"+name+" shadow>"+parsedTemplate+"</"+name+">";document.startViewTransition&&this.settings.morphAnimation?document.startViewTransition((function(){morphIt(self.dom,newDomAsString)})):morphIt(this.dom,newDomAsString)}else{var newDomAsString="<"+name+">"+parsedTemplate+"</"+name+">";if(document.startViewTransition&&this.settings.morphAnimation){console.log("1",this.settings.morphAnimation);const start=performance.now(),transition=document.startViewTransition((function(){morphIt(self.dom,newDomAsString)}));transition.ready.then(()=>{}),transition.finished.then(()=>{})}else morphIt(this.dom,newDomAsString)}if(this.slotContent){const p=this.parent??this,parsedSlot=simply.parseTemplate({template:this.slotContent,...p});document.startViewTransition&&this.settings.morphAnimation?document.startViewTransition((function(){morphIt(self.dom.querySelector("simply-slot"),"<simply-slot>"+parsedSlot+"</simply-slot>")})):morphIt(this.dom.querySelector("simply-slot"),"<simply-slot>"+parsedSlot+"</simply-slot>")}function morphIt(dom,newDomAsString){var start=performance.now();simply.morphdom(dom,newDomAsString,{childrenOnly:!0,getNodeKey:node=>1===node.nodeType?node.getAttribute("key")||node.id:null,onBeforeElUpdated:function(fromEl,toEl){return!fromEl.isSameNode(toEl)&&(!fromEl.isEqualNode(toEl)&&("FRAMER-COMPONENT"!==toEl.tagName&&(!0!==toEl.hasAttribute("passive")&&("DIALOG"==fromEl.tagName?(fromEl.hasAttribute("open")&&toEl.setAttribute("open",!0),!0):(1==fromEl.hasAttribute("go-active")&&toEl.setAttribute("go-active",!0),fromEl.hasAttribute("transition"),!0)))))},onBeforeNodeDiscarded:function(node){},onBeforeElChildrenUpdated:function(fromEl,toEl){if(fromEl.isSameNode(toEl))return!1;if(fromEl.isEqualNode(toEl))return"TEXTAREA"==toEl.tagName&&fromEl.value!==toEl.value;if(customElements.get(fromEl.tagName.toLowerCase()))return!1;if(!0===toEl.hasAttribute("passive"))return!1;if(fromEl.tagName,"SIMPLY-SLOT"==fromEl.tagName)return!1;if("STYLE"==fromEl.tagName&&fromEl.hasAttribute("simply"));else if("INPUT"===toEl.tagName){if("RADIO"==toEl.type||"CHECKBOX"==toEl.type)return!1;toEl.value=fromEl.value}else{if("FRAMER-COMPONENT"===toEl.tagName)return!1;if("ROUTER"===toEl.tagName)return!1;if("ROUTE"===toEl.tagName)return!1;if("LABEL"==toEl.tagName){if(fromEl.isEqualNode(toEl))return!1}else"OPTION"===toEl.tagName&&(toEl.selected=fromEl.selected)}}});var end=performance.now()}void 0!==this.lifecycle&&void 0!==this.lifecycle.afterRerender&&this.lifecycle.afterRerender()}else{this.rendered=!0;let parsedTemplate=simply.parseTemplate(parsingArgs);var t0=performance.now(),parsedStyle=simply.parseStyle(parsingArgs);simply.components[name].lastParsedStyle=parsedStyle,parsedTemplate=parsedTemplate;var t1=performance.now(),start=performance.now();if(this.sheet=new CSSStyleSheet,this.shadow)this.dom.adoptedStyleSheets=[this.sheet,...this.dom.adoptedStyleSheets];else{document.adoptedStyleSheets=[this.sheet,...document.adoptedStyleSheets];var end=performance.now()}if(this.sheet.replaceSync(parsedStyle),void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeRender&&void 0!==this.lifecycle.beforeRender(parsedTemplate)&&(parsedTemplate=this.lifecycle.beforeRender(parsedTemplate)),void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeFirstRender&&void 0!==this.lifecycle.beforeFirstRender(parsedTemplate)&&(parsedTemplate=this.lifecycle.beforeFirstRender(parsedTemplate)),this.innerHTML&&""!==this.innerHTML.trim()){this.slotContent=this.innerHTML;const p=this.parent??this,parsedSlot=simply.parseTemplate({template:this.slotContent,...p});this.dom.innerHTML=parsedTemplate,this.dom.querySelector("simply-slot").innerHTML=parsedSlot}else{var t0=performance.now();this.dom.innerHTML=parsedTemplate;var t1=performance.now()}ObservableSlim.resume(self.data),ObservableSlim.resume(self.state),ObservableSlim.resume(self.props),"about:blank"==document.location.href&&simply.framerStaff(dom,name,uid,component,props,lifecycle),void 0!==this.lifecycle&&void 0!==this.lifecycle.afterFirstRender&&this.lifecycle.afterFirstRender(),this.renderingDone=!0;var comp=this.component,p=this.props;requestAnimationFrame(()=>{const transition=undefined;(comp.routerSettings&&"transition"in comp.routerSettings?comp.routerSettings.transition:simply.routerSettings&&simply.routerSettings.transition)?(ObservableSlim.pause(p),this.dom.style.transition="none",setTimeout(()=>{comp.style.transition="";var stagger=comp.routerSettings&&"stagger"in comp.routerSettings?comp.routerSettings.stagger:simply.routerSettings&&simply.routerSettings.stagger;stagger&&self.parent?(comp.stagger=stagger+(self.parent.stagger||0),void 0===self.parent.completed?(console.log("stag this",comp),comp.staggerFn=setTimeout(()=>{comp.setAttribute("enter",""),clearTimeout(comp.staggerFn)},comp.stagger)):(console.log("no stag for this",comp),comp.setAttribute("enter",""))):comp.setAttribute("enter",""),ObservableSlim.resume(p)},0)):comp.completed=!0})}if("cache"in this.props)try{let tagName,tagNameOfRoute;this.component.tagName.toLowerCase()==simply.go.getRouteByPath(simply.lastPath).value.settings.component&&(simply.cache=simply.cache?simply.cache:{},simply.cache[simply.lastPath]=simply.cache[simply.lastPath]?simply.cache[simply.lastPath]:{},simply.cache[simply.lastPath][this.elementId]={data:this.data,props:this.props},this.cache={data:this.data,props:this.props})}catch(e){}void 0!==this.lifecycle&&void 0!==this.lifecycle.afterRender&&this.lifecycle.afterRender()}disconnectedCallback(){window.removeEventListener("message",this.framerPropsListener),this.cb.state&&(this.cb.state[this.uid]=null),this.cb.data&&(this.cb.data[this.uid]=null),this.parent&&this.parent.cb&&(this.parent.cb.data,this.parent.cb.state&&(this.parent.cb.state[this.uid]=null),this.parent.cb.props),void 0!==this.lifecycle&&void 0!==this.lifecycle.disconnected&&this.lifecycle.disconnected()}}customElements.define(name,simplyComponent)}},setWithoutRender:function(target,props){Object.defineProperties(target,Object.keys(props).reduce((descriptors,key)=>(descriptors[key]={value:props[key],writable:!0,enumerable:!0,configurable:!0},descriptors),{}))},morphdom:function(){!function(){"use strict";var DOCUMENT_FRAGMENT_NODE=11,range;function morphAttrs(fromNode,toNode){window.customElements.get(fromNode.tagName.toLowerCase());var toNodeAttrs=toNode.attributes,attr,attrName,attrNamespaceURI,attrValue,fromValue;if(11!==toNode.nodeType&&11!==fromNode.nodeType){for(var i=toNodeAttrs.length-1;i>=0;i--)attrName=(attr=toNodeAttrs[i]).name,attrNamespaceURI=attr.namespaceURI,attrValue=attr.value,attrNamespaceURI?(attrName=attr.localName||attrName,(fromValue=fromNode.getAttributeNS(attrNamespaceURI,attrName))!==attrValue&&("xmlns"===attr.prefix&&(attrName=attr.name),fromNode.setAttributeNS(attrNamespaceURI,attrName,attrValue))):(fromValue=fromNode.getAttribute(attrName))!==attrValue&&fromNode.setAttribute(attrName,attrValue);for(var fromNodeAttrs=fromNode.attributes,d=fromNodeAttrs.length-1;d>=0;d--)attrName=(attr=fromNodeAttrs[d]).name,(attrNamespaceURI=attr.namespaceURI)?(attrName=attr.localName||attrName,toNode.hasAttributeNS(attrNamespaceURI,attrName)||fromNode.removeAttributeNS(attrNamespaceURI,attrName)):toNode.hasAttribute(attrName)||fromNode.removeAttribute(attrName)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(str){var start=performance.now(),template=doc.createElement("template");template.innerHTML=str;var end=performance.now();return template.content.childNodes[0]}function createFragmentFromRange(str){var fragment;return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(str).childNodes[0]}function createFragmentFromWrap(str){var fragment=doc.createElement("body");return fragment.innerHTML=str,fragment.childNodes[0]}function toElement(str){return str=str.trim(),HAS_TEMPLATE_SUPPORT?createFragmentFromTemplate(str):HAS_RANGE_SUPPORT?createFragmentFromRange(str):createFragmentFromWrap(str)}function compareNodeNames(fromEl,toEl){var fromNodeName=fromEl.nodeName,toNodeName=toEl.nodeName,fromCodeStart,toCodeStart;return fromNodeName===toNodeName||(fromCodeStart=fromNodeName.charCodeAt(0),toCodeStart=toNodeName.charCodeAt(0),fromCodeStart<=90&&toCodeStart>=97?fromNodeName===toNodeName.toUpperCase():toCodeStart<=90&&fromCodeStart>=97&&toNodeName===fromNodeName.toUpperCase())}function createElementNS(name,namespaceURI){return namespaceURI&&namespaceURI!==NS_XHTML?doc.createElementNS(namespaceURI,name):doc.createElement(name)}function moveChildren(fromEl,toEl){for(var curChild=fromEl.firstChild;curChild;){var nextChild=curChild.nextSibling;toEl.appendChild(curChild),curChild=nextChild}return toEl}function syncBooleanAttrProp(fromEl,toEl,name){fromEl[name]!==toEl[name]&&(fromEl[name]=toEl[name],fromEl[name]?fromEl.setAttribute(name,""):fromEl.removeAttribute(name))}var specialElHandlers={OPTION:function(fromEl,toEl){var parentNode=fromEl.parentNode;if(parentNode){var parentName=parentNode.nodeName.toUpperCase();"OPTGROUP"===parentName&&(parentName=(parentNode=parentNode.parentNode)&&parentNode.nodeName.toUpperCase()),"SELECT"!==parentName||parentNode.hasAttribute("multiple")||(fromEl.hasAttribute("selected")&&!toEl.selected&&(fromEl.setAttribute("selected","selected"),fromEl.removeAttribute("selected")),parentNode.selectedIndex=-1)}syncBooleanAttrProp(fromEl,toEl,"selected")},INPUT:function(fromEl,toEl){syncBooleanAttrProp(fromEl,toEl,"checked"),syncBooleanAttrProp(fromEl,toEl,"disabled"),fromEl.value!==toEl.value&&(fromEl.value=toEl.value),toEl.hasAttribute("value")||fromEl.removeAttribute("value")},TEXTAREA:function(fromEl,toEl){var newValue=toEl.value;fromEl.value!==newValue&&(fromEl.value=newValue);var firstChild=fromEl.firstChild;if(firstChild){var oldValue=firstChild.nodeValue;if(oldValue==newValue||!newValue&&oldValue==fromEl.placeholder)return;firstChild.nodeValue=newValue}},SELECT:function(fromEl,toEl){if(!toEl.hasAttribute("multiple")){for(var selectedIndex=-1,i=0,curChild=fromEl.firstChild,optgroup,nodeName;curChild;)if("OPTGROUP"===(nodeName=curChild.nodeName&&curChild.nodeName.toUpperCase()))curChild=(optgroup=curChild).firstChild;else{if("OPTION"===nodeName){if(curChild.hasAttribute("selected")){selectedIndex=i;break}i++}!(curChild=curChild.nextSibling)&&optgroup&&(curChild=optgroup.nextSibling,optgroup=null)}fromEl.selectedIndex=selectedIndex}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8;function noop(){}function defaultGetNodeKey(node){if(node)return node.getAttribute&&node.getAttribute("id")||node.id}function morphdomFactory(morphAttrs){return function morphdom(fromNode,toNode,options){if(options||(options={}),"string"==typeof toNode)if("#document"===fromNode.nodeName||"HTML"===fromNode.nodeName||"BODY"===fromNode.nodeName){var toNodeHtml=toNode;(toNode=doc.createElement("html")).innerHTML=toNodeHtml}else toNode=toElement(toNode);else 11===toNode.nodeType&&(toNode=toNode.firstElementChild);var getNodeKey=options.getNodeKey||defaultGetNodeKey,onBeforeNodeAdded=options.onBeforeNodeAdded||noop,onNodeAdded=options.onNodeAdded||noop,onBeforeElUpdated=options.onBeforeElUpdated||noop,onElUpdated=options.onElUpdated||noop,onBeforeNodeDiscarded=options.onBeforeNodeDiscarded||noop,onNodeDiscarded=options.onNodeDiscarded||noop,onBeforeElChildrenUpdated=options.onBeforeElChildrenUpdated||noop,skipFromChildren=options.skipFromChildren||noop,addChild=options.addChild||function(parent,child){return parent.appendChild(child)},childrenOnly=!0===options.childrenOnly,fromNodesLookup=Object.create(null),keyedRemovalList=[];function addKeyedRemoval(key){keyedRemovalList.push(key)}function walkDiscardedChildNodes(node,skipKeyedNodes){if(1===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=void 0;skipKeyedNodes&&(key=getNodeKey(curChild))?addKeyedRemoval(key):(onNodeDiscarded(curChild),curChild.firstChild&&walkDiscardedChildNodes(curChild,skipKeyedNodes)),curChild=curChild.nextSibling}}function removeNode(node,parentNode,skipKeyedNodes){!1!==onBeforeNodeDiscarded(node)&&(parentNode&&parentNode.removeChild(node),onNodeDiscarded(node),walkDiscardedChildNodes(node,skipKeyedNodes))}function indexTree(node){if(1===node.nodeType||11===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=getNodeKey(curChild);key&&(fromNodesLookup[key]=curChild),indexTree(curChild),curChild=curChild.nextSibling}}function handleNodeAdded(el){onNodeAdded(el);for(var curChild=el.firstChild;curChild;){var nextSibling=curChild.nextSibling,key=getNodeKey(curChild);if(key){var unmatchedFromEl=fromNodesLookup[key];unmatchedFromEl&&compareNodeNames(curChild,unmatchedFromEl)?(curChild.parentNode.replaceChild(unmatchedFromEl,curChild),morphEl(unmatchedFromEl,curChild)):handleNodeAdded(curChild)}else handleNodeAdded(curChild);curChild=nextSibling}}function cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey){for(;curFromNodeChild;){var fromNextSibling=curFromNodeChild.nextSibling;(curFromNodeKey=getNodeKey(curFromNodeChild))?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}}function morphEl(fromEl,toEl,childrenOnly){var toElKey=getNodeKey(toEl);if(toElKey&&delete fromNodesLookup[toElKey],!childrenOnly){if(!1===onBeforeElUpdated(fromEl,toEl))return;if(morphAttrs(fromEl,toEl),onElUpdated(fromEl),!1===onBeforeElChildrenUpdated(fromEl,toEl))return}"TEXTAREA"!==fromEl.nodeName?morphChildren(fromEl,toEl):specialElHandlers.TEXTAREA(fromEl,toEl)}function morphChildren(fromEl,toEl){var skipFrom=skipFromChildren(fromEl,toEl),curToNodeChild=toEl.firstChild,curFromNodeChild=fromEl.firstChild,curToNodeKey,curFromNodeKey,fromNextSibling,toNextSibling,matchingFromEl;outer:for(;curToNodeChild;){for(toNextSibling=curToNodeChild.nextSibling,curToNodeKey=getNodeKey(curToNodeChild);!skipFrom&&curFromNodeChild;){if(fromNextSibling=curFromNodeChild.nextSibling,curToNodeChild.isSameNode&&curToNodeChild.isSameNode(curFromNodeChild)){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey=getNodeKey(curFromNodeChild);var curFromNodeType=curFromNodeChild.nodeType,isCompatible=void 0;if(curFromNodeType===curToNodeChild.nodeType&&(1===curFromNodeType?(curToNodeKey?curToNodeKey!==curFromNodeKey&&((matchingFromEl=fromNodesLookup[curToNodeKey])?fromNextSibling===matchingFromEl?isCompatible=!1:(fromEl.insertBefore(matchingFromEl,curFromNodeChild),curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeKey=getNodeKey(curFromNodeChild=matchingFromEl)):isCompatible=!1):curFromNodeKey&&(isCompatible=!1),(isCompatible=!1!==isCompatible&&compareNodeNames(curFromNodeChild,curToNodeChild))&&morphEl(curFromNodeChild,curToNodeChild)):3!==curFromNodeType&&8!=curFromNodeType||(isCompatible=!0,curFromNodeChild.nodeValue!==curToNodeChild.nodeValue&&(curFromNodeChild.nodeValue=curToNodeChild.nodeValue))),isCompatible){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}if(curToNodeKey&&(matchingFromEl=fromNodesLookup[curToNodeKey])&&compareNodeNames(matchingFromEl,curToNodeChild))skipFrom||addChild(fromEl,matchingFromEl),morphEl(matchingFromEl,curToNodeChild);else{var onBeforeNodeAddedResult=onBeforeNodeAdded(curToNodeChild);!1!==onBeforeNodeAddedResult&&(onBeforeNodeAddedResult&&(curToNodeChild=onBeforeNodeAddedResult),curToNodeChild.actualize&&(curToNodeChild=curToNodeChild.actualize(fromEl.ownerDocument||doc)),addChild(fromEl,curToNodeChild),handleNodeAdded(curToNodeChild))}curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling}cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey);var specialElHandler=specialElHandlers[fromEl.nodeName];specialElHandler&&specialElHandler(fromEl,toEl)}indexTree(fromNode);var morphedNode=fromNode,morphedNodeType=morphedNode.nodeType,toNodeType=toNode.nodeType;if(!childrenOnly)if(1===morphedNodeType)1===toNodeType?compareNodeNames(fromNode,toNode)||(onNodeDiscarded(fromNode),morphedNode=moveChildren(fromNode,createElementNS(toNode.nodeName,toNode.namespaceURI))):morphedNode=toNode;else if(3===morphedNodeType||8===morphedNodeType){if(toNodeType===morphedNodeType)return morphedNode.nodeValue!==toNode.nodeValue&&(morphedNode.nodeValue=toNode.nodeValue),morphedNode;morphedNode=toNode}if(morphedNode===toNode)onNodeDiscarded(fromNode);else{if(toNode.isSameNode&&toNode.isSameNode(morphedNode))return;if(morphEl(morphedNode,toNode,childrenOnly),keyedRemovalList)for(var i=0,len=keyedRemovalList.length;i<len;i++){var elToRemove=fromNodesLookup[keyedRemovalList[i]];elToRemove&&removeNode(elToRemove,elToRemove.parentNode,!1)}}return!childrenOnly&&morphedNode!==fromNode&&fromNode.parentNode&&(morphedNode.actualize&&(morphedNode=morphedNode.actualize(fromNode.ownerDocument||doc)),fromNode.parentNode.replaceChild(morphedNode,fromNode)),morphedNode}}var morphdom=morphdomFactory(morphAttrs);simply.morphdom=morphdom}()},findShadowRootOrCustomElement:function(element){let parent=element.parentNode;for(;null!==parent;){if(parent instanceof ShadowRoot)return parent.host;if(!parent.tagName)return;if(parent.tagName.includes("-")&&void 0!==customElements.get(parent.tagName.toLowerCase()))return parent;parent=parent.parentNode}return null},getCompRoot:function(element){const rootNode=element.getRootNode();return rootNode instanceof ShadowRoot?rootNode.host:element},observableSlim:function(){var paths,observables,targets,targetsProxy,dupProxy,_getProperty,_create;window.ObservableSlim=(paths=[],observables=[],targets=[],targetsProxy=[],dupProxy=null,_getProperty=function(obj,path){return path.split(".").reduce((function(prev,curr){return prev?prev[curr]:void 0}),obj||self)},_create=function(target,domDelay,originalObservable,originalPath){var observable=originalObservable||null,path=originalPath||[{target:target,property:""}];paths.push(path),target instanceof Array&&(target.hasOwnProperty("__length")?target.__length=target.length:Object.defineProperty(target,"__length",{enumerable:!1,value:target.length,writable:!0}));var changes=[],_getPath=function(target,property,jsonPointer){for(var fullPath="",lastTarget=null,i=0;i<path.length;i++)lastTarget instanceof Array&&!isNaN(path[i].property)&&(path[i].property=lastTarget.indexOf(path[i].target)),fullPath=fullPath+"."+path[i].property,lastTarget=path[i].target;return fullPath=(fullPath=fullPath+"."+property).substring(2),!0===jsonPointer&&(fullPath="/"+fullPath.replace(/\./g,"/")),fullPath},_notifyObservers=function(numChanges){var domDelayIsNumber;if(!0!==observable.paused)if("number"==typeof domDelay||!0===domDelay){if(numChanges===changes.length){var changesCopy=changes.slice(0);changes=[];for(var i=0;i<observable.observers.length;i++)observable.observers[i](changesCopy)}}else{var changesCopy=changes.slice(0);changes=[];for(var i=0;i<observable.observers.length;i++)observable.observers[i](changesCopy)}},handler={get:function(target,property){if("__getTarget"===property)return target;if("__isProxy"===property)return!0;if("__getParent"===property)return function(i){if(void 0===i)var i=1;var parentPath=_getPath(target,"__getParent").split(".");return parentPath.splice(-(i+1),i+1),_getProperty(observable.parentProxy,parentPath.join("."))};var parentPath;if("__getPath"===property)return _getPath(target,"__getParent").slice(0,-12);var targetProp=target[property];if(target instanceof Date&&targetProp instanceof Function&&null!==targetProp)return targetProp.bind(target);if(targetProp instanceof Object&&null!==targetProp&&target.hasOwnProperty(property)){if(!0===targetProp.__isProxy&&(targetProp=targetProp.__getTarget),targetProp.__targetPosition>-1&&null!==targets[targetProp.__targetPosition])for(var ttp=targetsProxy[targetProp.__targetPosition],i=0,l=ttp.length;i<l;i++)if(observable===ttp[i].observable)return ttp[i].proxy;var newPath=path.slice(0);return newPath.push({target:targetProp,property:property}),_create(targetProp,domDelay,observable,newPath)}return targetProp},deleteProperty:function(target,property){var originalChange=!0;dupProxy===proxy&&(originalChange=!1,dupProxy=null);var previousValue=Object.assign({},target);if(changes.push({type:"delete",target:target,property:property,newValue:null,previousValue:previousValue[property],currentPath:_getPath(target,property),jsonPointer:_getPath(target,property,!0),proxy:proxy}),!0===originalChange){observable.changesPaused||delete target[property];for(var a=0,l=targets.length;a<l&&target!==targets[a];a++);for(var currentTargetProxy=targetsProxy[a]||[],b=currentTargetProxy.length;b--;)currentTargetProxy[b].proxy!==proxy&&(dupProxy=currentTargetProxy[b].proxy,delete currentTargetProxy[b].proxy[property])}return _notifyObservers(changes.length),!0},set:function(target,property,value,receiver){value&&value.__isProxy&&(value=value.__getTarget);var originalChange=!0;dupProxy===proxy&&(originalChange=!1,dupProxy=null);var targetProp=target[property];if(targetProp!==value||!1===originalChange||"length"===property&&target instanceof Array&&target.__length!==value){var foundObservable=!0,typeOfTargetProp=typeof targetProp,type="update";if("undefined"===typeOfTargetProp&&(type="add"),changes.push({type:type,target:target,property:property,newValue:value,previousValue:receiver[property],currentPath:_getPath(target,property),jsonPointer:_getPath(target,property,!0),proxy:proxy}),"length"===property&&target instanceof Array&&target.__length!==value&&(changes[changes.length-1].previousValue=target.__length,target.__length=value),!0===originalChange){observable.changesPaused||(target[property]=value),foundObservable=!1;for(var targetPosition=target.__targetPosition,z=targetsProxy[targetPosition].length;z--;)if(observable===targetsProxy[targetPosition][z].observable&&null!==targets[targetsProxy[targetPosition][z].observable.parentTarget.__targetPosition]){foundObservable=!0;break}if(foundObservable){for(var currentTargetProxy=targetsProxy[targetPosition],b=0,l=currentTargetProxy.length;b<l;b++)currentTargetProxy[b].proxy!==proxy&&(dupProxy=currentTargetProxy[b].proxy,currentTargetProxy[b].proxy[property]=value);setTimeout((function(){if("object"===typeOfTargetProp&&null!==targetProp){for(var keys=Object.keys(target),i=0,l=keys.length;i<l;i++)if(target[keys[i]]===targetProp)return;var stillExists=!1;if(function iterate(target){for(var keys=Object.keys(target),i=0,l=keys.length;i<l;i++){var property,nestedTarget=target[keys[i]];if(nestedTarget instanceof Object&&null!==nestedTarget&&iterate(nestedTarget),nestedTarget===targetProp)return void(stillExists=!0)}}(target),!0===stillExists)return;!function iterate(obj){for(var keys=Object.keys(obj),i=0,l=keys.length;i<l;i++){var objProp=obj[keys[i]];objProp instanceof Object&&null!==objProp&&iterate(objProp)}for(var c=-1,i=0,l=targets.length;i<l;i++)if(obj===targets[i]){c=i;break}if(c>-1){for(var currentTargetProxy=targetsProxy[c],d=currentTargetProxy.length;d--;)if(observable===currentTargetProxy[d].observable){currentTargetProxy.splice(d,1);break}0==currentTargetProxy.length&&(targets[c]=null)}}(targetProp)}}),1e4)}}foundObservable&&_notifyObservers(changes.length)}return!0}},__targetPosition=target.__targetPosition;__targetPosition>-1||Object.defineProperty(target,"__targetPosition",{value:targets.length,writable:!1,enumerable:!1,configurable:!1});var proxy=new Proxy(target,handler);null===observable&&(observable={parentTarget:target,domDelay:domDelay,parentProxy:proxy,observers:[],paused:!1,path:path,changesPaused:!1},observables.push(observable));var proxyItem={target:target,proxy:proxy,observable:observable};return __targetPosition>-1?(null===targets[__targetPosition]&&(targets[__targetPosition]=target),targetsProxy[__targetPosition].push(proxyItem)):(targets.push(target),targetsProxy.push([proxyItem])),proxy},{create:function(target,domDelay,observer){if(!0===target.__isProxy)var target=target.__getTarget;var proxy=_create(target,domDelay);return"function"==typeof observer&&this.observe(proxy,observer),function iterate(proxy){for(var target=proxy.__getTarget,keys=Object.keys(target),i=0,l=keys.length;i<l;i++){var property=keys[i];target[property]instanceof Object&&null!==target[property]&&iterate(proxy[property])}}(proxy),proxy},observe:function(proxy,observer){for(var i=observables.length;i--;)if(observables[i].parentProxy===proxy){observables[i].observers.push(observer);break}},observerRemove:function(proxy,observer){for(var i=observables.length;i--;)if(observables[i].parentProxy===proxy){for(var b=observables[i].observers.length;b--;)if(observables[i].observers[b]===observer){observables[i].observers.splice(b,1);break}break}},pause:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].paused=!0,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].paused=!1,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].changesPaused=!0,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].changesPaused=!1,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(proxy){for(var matchedObservable=null,foundMatch=!1,c=observables.length;c--;)if(observables[c].parentProxy===proxy){matchedObservable=observables[c],foundMatch=!0;break}for(var a=targetsProxy.length;a--;)for(var b=targetsProxy[a].length;b--;)targetsProxy[a][b].observable===matchedObservable&&(targetsProxy[a].splice(b,1),0===targetsProxy[a].length&&(targets[a]=null));!0===foundMatch&&observables.splice(c,1)}});try{module.exports=ObservableSlim}catch(err){}},findParentWithState:function(element){let parent=element.parentElement;for(;parent;){const rootNode=parent.getRootNode?parent.getRootNode().host:null;if(parent=rootNode||parent.parentElement,parent&&parent.state)return parent}return null},getFirstCustomElementParent(el){for(;el;){const parent=el.parentElement||el.getRootNode&&el.getRootNode().host;if(!parent)break;if(parent.tagName&&parent.tagName.includes("-"))return parent;el=parent}return null},go:function(){"use strict";var isarray=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)},pathToRegexp_1=pathToRegexp,parse_1=parse,compile_1=compile,tokensToFunction_1=tokensToFunction,tokensToRegExp_1=tokensToRegExp,PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(str){for(var tokens=[],key=0,index=0,path="",res;null!=(res=PATH_REGEXP.exec(str));){var m=res[0],escaped=res[1],offset=res.index;if(path+=str.slice(index,offset),index=offset+m.length,escaped)path+=escaped[1];else{path&&(tokens.push(path),path="");var prefix=res[2],name=res[3],capture=res[4],group=res[5],suffix=res[6],asterisk=res[7],repeat="+"===suffix||"*"===suffix,optional="?"===suffix||"*"===suffix,delimiter=prefix||"/",pattern=capture||group||(asterisk?".*":"[^"+delimiter+"]+?");tokens.push({name:name||key++,prefix:prefix||"",delimiter:delimiter,optional:optional,repeat:repeat,pattern:escapeGroup(pattern)})}}return index<str.length&&(path+=str.substr(index)),path&&tokens.push(path),tokens}function compile(str){return tokensToFunction(parse(str))}function tokensToFunction(tokens){for(var matches=new Array(tokens.length),i=0;i<tokens.length;i++)"object"==typeof tokens[i]&&(matches[i]=new RegExp("^"+tokens[i].pattern+"$"));return function(obj){for(var path="",data=obj||{},i=0;i<tokens.length;i++){var token=tokens[i];if("string"!=typeof token){var value=data[token.name],segment;if(null==value){if(token.optional)continue;throw new TypeError('Expected "'+token.name+'" to be defined')}if(isarray(value)){if(!token.repeat)throw new TypeError('Expected "'+token.name+'" to not repeat, but received "'+value+'"');if(0===value.length){if(token.optional)continue;throw new TypeError('Expected "'+token.name+'" to not be empty')}for(var j=0;j<value.length;j++){if(segment=encodeURIComponent(value[j]),!matches[i].test(segment))throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"');path+=(0===j?token.prefix:token.delimiter)+segment}}else{if(segment=encodeURIComponent(value),!matches[i].test(segment))throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"');path+=token.prefix+segment}}else path+=token}return path}}function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(group){return group.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(re,keys){return re.keys=keys,re}function flags(options){return options.sensitive?"":"i"}function regexpToRegexp(path,keys){var groups=path.source.match(/\((?!\?)/g);if(groups)for(var i=0;i<groups.length;i++)keys.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return attachKeys(path,keys)}function arrayToRegexp(path,keys,options){for(var parts=[],i=0;i<path.length;i++)parts.push(pathToRegexp(path[i],keys,options).source);var regexp;return attachKeys(new RegExp("(?:"+parts.join("|")+")",flags(options)),keys)}function stringToRegexp(path,keys,options){for(var tokens=parse(path),re=tokensToRegExp(tokens,options),i=0;i<tokens.length;i++)"string"!=typeof tokens[i]&&keys.push(tokens[i]);return attachKeys(re,keys)}function tokensToRegExp(tokens,options){for(var strict=(options=options||{}).strict,end=!1!==options.end,route="",lastToken=tokens[tokens.length-1],endsWithSlash="string"==typeof lastToken&&/\/$/.test(lastToken),i=0;i<tokens.length;i++){var token=tokens[i];if("string"==typeof token)route+=escapeString(token);else{var prefix=escapeString(token.prefix),capture=token.pattern;token.repeat&&(capture+="(?:"+prefix+capture+")*"),route+=capture=token.optional?prefix?"(?:"+prefix+"("+capture+"))?":"("+capture+")?":prefix+"("+capture+")"}}return strict||(route=(endsWithSlash?route.slice(0,-2):route)+"(?:\\/(?=$))?"),route+=end?"$":strict&&endsWithSlash?"":"(?=\\/|$)",new RegExp("^"+route,flags(options))}function pathToRegexp(path,keys,options){return isarray(keys=keys||[])?options||(options={}):(options=keys,keys=[]),path instanceof RegExp?regexpToRegexp(path,keys,options):isarray(path)?arrayToRegexp(path,keys,options):stringToRegexp(path,keys,options)}pathToRegexp_1.parse=parse_1,pathToRegexp_1.compile=compile_1,pathToRegexp_1.tokensToFunction=tokensToFunction_1,pathToRegexp_1.tokensToRegExp=tokensToRegExp_1;var hasDocument="undefined"!=typeof document,hasWindow="undefined"!=typeof window,hasHistory="undefined"!=typeof history,hasProcess="undefined"!=typeof process,clickEvent=hasDocument&&document.ontouchstart?"touchstart":"click",isLocation=hasWindow&&!(!window.history.location&&!window.location),loaded;function Page(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function createPage(){var goInstance=new Page;function goFn(){return go.apply(goInstance,arguments)}return goFn.callbacks=goInstance.callbacks,goFn.exits=goInstance.exits,goFn.base=goInstance.base.bind(goInstance),goFn.strict=goInstance.strict.bind(goInstance),goFn.start=goInstance.start.bind(goInstance),goFn.stop=goInstance.stop.bind(goInstance),goFn.show=goInstance.show.bind(goInstance),goFn.back=goInstance.back.bind(goInstance),goFn.redirect=goInstance.redirect.bind(goInstance),goFn.replace=goInstance.replace.bind(goInstance),goFn.dispatch=goInstance.dispatch.bind(goInstance),goFn.exit=goInstance.exit.bind(goInstance),goFn.configure=goInstance.configure.bind(goInstance),goFn.sameOrigin=goInstance.sameOrigin.bind(goInstance),goFn.clickHandler=goInstance.clickHandler.bind(goInstance),goFn.create=createPage,goFn.setup=function(a,b){var initialSeup=!1;if(Array.isArray(a)&&b)var routes=a,child_of=b;else if(a&&"object"==typeof a&&!Array.isArray(a)){var settings=a;simply.routerSettings=settings;var routes=b,initialSeup=!0}else var routes=a,initialSeup=!0;if(simply.routerSettings&&simply.routerSettings.redirects&&simply.routerSettings.redirects.forEach((function(redirect){simply.go.redirect(redirect.from,redirect.to)})),initialSeup){function parse(ctx,next){setTimeout(()=>{ctx.query=simply.qs.parse(location.search.slice(1))},0),next()}simply.go("*",parse)}routes.forEach((function(route){simply.go(route.path,{...route,child_of:child_of},...route.callbacks||[])})),initialSeup&&simply.go()},goFn.preserveParams=function(params){simply.preserveParams||(simply.preserveParams=[]),simply.preserveParams.push(...params)},goFn.getRoutes=function(){return simply.routes},goFn.getCurrentRoute=function(){var current=this.current;for(const[key,value]of Object.entries(simply.routes))if(current.match(value.regexp)&&"(.*)"!==key)return value;return!1},goFn.getRouteByPath=function(path){var found=!1;for(const[key,value]of Object.entries(simply.routes))path.match(value.regexp)&&"(.*)"!==key&&(found={key:key,value:value});return found||!!simply.routes["(.*)"]&&{key:"(.*)",value:simply.routes["(.*)"]}},goFn.getParentRouteByPath=function(path){var found=!1;for(const[key,value]of Object.entries(simply.routes))if(path.match(value.regexp)&&"(.*)"!==key)return{key:key,value:value};return!!simply.routes["(.*)"]&&{key:"(.*)",value:simply.routes["(.*)"]}},goFn.deleteRouteByPath=function(path){let route=goFn.getRouteByPath(path);var rebelCallbacks=route.value.go.callbacks;for(const[key,v]of Object.entries(route.value.callbacks)){const fn=v.originalFn;simply.go.callbacks=simply.go.callbacks.filter(cb=>cb.originalFn!==fn),route.value.go.callbacks=route.value.go.callbacks.filter(cb=>cb.originalFn!==fn)}simply.routes[route.key].callbacks=[]},goFn.deleteExitCallbacksByPath=function(path){let route=goFn.getRouteByPath(path);for(const[key,v]of Object.entries(route.value.go.exits)){const fn=v.originalFn;simply.go.exits=simply.go.exits.filter(cb=>cb.originalFn!==fn),route.value.go.exits=route.value.go.exits.filter(cb=>cb.originalFn!==fn)}simply.routes[route.key].exits=[]},Object.defineProperty(goFn,"len",{get:function(){return goInstance.len},set:function(val){goInstance.len=val}}),Object.defineProperty(goFn,"current",{get:function(){return goInstance.current},set:function(val){goInstance.current=val}}),goFn.Context=Context,goFn.Route=Route,goFn}function go(path,fn){if("function"==typeof path)return go.call(this,"*",path);async function waitForRenderedAndReturnRoute(el){if(!el)throw new Error("Element not found");return await new Promise(resolve=>{let _rendered=el.rendered;Object.defineProperty(el,"rendered",{configurable:!0,enumerable:!0,get:()=>_rendered,set(value){_rendered=value,value&&resolve(value)}}),_rendered&&resolve(_rendered)}),new Promise(resolve=>{function check(){let routeEl=el.querySelector("route");return routeEl||(el.shadowRoot&&(routeEl=el.shadowRoot.querySelector("route"),routeEl)?routeEl:null)}let found=check();if(found)return resolve(found);const observer=new MutationObserver(()=>{const found=check();found&&(observer.disconnect(),resolve(found))});observer.observe(el,{childList:!0,subtree:!0})})}async function waitForRendered(component){return new Promise(resolve=>{if(!0===component.rendered)return resolve();let _rendered=component.rendered;Object.defineProperty(component,"rendered",{get:()=>_rendered,set(value){_rendered=value,!0===value&&resolve()},configurable:!0})})}if("object"==typeof fn&&null!==fn&&!Array.isArray(fn)){var settings={...fn},children=fn.children?fn.children:void 0;arguments[1]=fn=async function(ctx,next){var route,parent;if(simply.ctx=ctx,settings.child_of){var targetRoute,tree=simply.go.getRouteByPath(settings.path).value.tree,parentRootEl,lastParentComponent,targetParentRoute;for(let i=0;i<tree.length;i++){const path=tree[i],node=simply.routes[path];if(i>0){const parentPath=tree[i-1];parentRootEl=await waitForRenderedAndReturnRoute(parentRootEl.querySelector(lastParentComponent))}else parentRootEl=document.querySelector("route");lastParentComponent=node.settings.component,targetParentRoute=simply.go.getParentRouteByPath(path).value;let directChild=Array.from(parentRootEl.children).find(el=>el.matches(targetParentRoute.settings.component));if(i!==tree.length-1&&!directChild){let attrs=[];if(1==targetParentRoute.settings.isolated&&attrs.push("shadow"),targetParentRoute.settings.cache&&attrs.push("cache"),window.scrollPositions=window.scrollPositions?window.scrollPositions:{},simply.saveScrollPositions(parentRootEl,tree[i]),parentRootEl.innerHTML=`<${targetParentRoute.settings.component} ${attrs.join(" ")}></${targetParentRoute.settings.component}>`,directChild){var component=directChild;directChild.render()}else directChild=parentRootEl.querySelector(targetParentRoute.settings.component);await waitForRenderedAndReturnRoute(directChild),directChild.routerSettings=node.settings,directChild.ctx=ctx,directChild.lifecycle&&directChild.lifecycle.routerEnter&&directChild.lifecycle.routerEnter(ctx)}}}parentRootEl?(route=parentRootEl,settings=simply.go.getRouteByPath(path).value.settings):route=settings.root?settings.root:document.querySelector("route");let directChild=Array.from(route.children).find(el=>el.matches(settings.component));if(directChild){var component=directChild;directChild.render()}else{let attrs=[];1==settings.isolated&&attrs.push("shadow"),settings.cache&&attrs.push("cache"),simply.lastPath&&(window.scrollPositions=window.scrollPositions?window.scrollPositions:{},simply.saveScrollPositions(route,simply.lastPath)),route.innerHTML=`<${settings.component} ${attrs.join(" ")}></${settings.component}>`;var component=route.querySelector(settings.component);ctx.component=component,component.routerSettings=settings,component.ctx=ctx}settings.title&&(document.title=settings.title);var comp=directChild||component;await waitForRendered(comp),comp.lifecycle&&comp.lifecycle.routerEnter&&comp.lifecycle.routerEnter(ctx);try{comp.querySelector("route").innerHTML=""}catch(e){}comp.selectLinks=function(){if(simply.ctx){let aTags=[],current=comp;for(;current;)if("function"==typeof current.querySelectorAll&&aTags.push(...current.querySelectorAll("a")),current=current.parent||current.getRootNode&&current.getRootNode().host||document,current===document){aTags.push(...document.querySelectorAll("a"));break}let currentPath=simply.ctx.path.split("?")[0];aTags.forEach((function(a){let href="/"+a.href.replace(document.querySelector("base").href,"");(href&&!href.startsWith("/")||""==href)&&(href="/"+href),href&&href==decodeURIComponent(currentPath)?a.setAttribute("go-active",!0):a.removeAttribute("go-active");var targetRoute=simply.go.getRouteByPath(simply.ctx.path.split("?")[0]);if(href&&targetRoute.value.tree){let tree=targetRoute.value.tree;if(tree.includes(simply.ctx.routePath)){const index=tree.indexOf(simply.ctx.routePath),parentPaths=-1!==index?tree.slice(0,index):[];let routePathOfLink=simply.go.getRouteByPath(href);(parentPaths.includes(routePathOfLink.key)||parentPaths.includes(href)&&!comp.parent.contains(a))&&a.setAttribute("go-active",!0)}}}))}},setTimeout(()=>{comp.selectLinks()},0),simply.lastPath=ctx.path}}if("function"==typeof fn){var route=new Route(path,null,this);function registerChildRoutes(children,parentPath=""){if(children)for(const child of children){const fullPath=parentPath+child.path;simply.go.setup([{...child,path:fullPath}],parentPath),child.children&&registerChildRoutes(child.children,fullPath)}}simply.routes=simply.routes?simply.routes:{},simply.routes[route.path]=route,simply.routes[route.path].callbacks=simply.routes[route.path].callback?simply.routes[route.path].callback:[],simply.routes[route.path].settings=settings,simply.routes[route.path].go=this,registerChildRoutes(children,path);for(var i=1;i<arguments.length;++i){const wrappedFn=route.middleware(arguments[i]);this.callbacks.push(wrappedFn),simply.routes[route.path].callbacks.push(wrappedFn);const tree=[];let currentPath=route.path;for(;currentPath&&simply.routes[currentPath];){tree.unshift(currentPath);var parent=simply.routes[currentPath]&&simply.routes[currentPath].settings&&simply.routes[currentPath].settings.child_of;currentPath=parent||null}tree.length>1&&(simply.routes[route.path].tree=tree)}}else"string"==typeof path?this["string"==typeof fn?"redirect":"show"](path,fn):this.start(path);return this}function unhandled(ctx){if(!ctx.handled){var current,go=this,window=go._window;(current=go._hashbang?isLocation&&this._getBase()+window.location.hash.replace("#!",""):isLocation&&window.location.pathname+window.location.search)!==ctx.canonicalPath&&(go.stop(),ctx.handled=!1,isLocation&&(window.location.href=ctx.canonicalPath))}}function escapeRegExp(s){return s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Context(path,state,goInstance){var _go=this.go=goInstance||go,window=_go._window,hashbang=_go._hashbang,goBase=_go._getBase();"/"===path[0]&&0!==path.indexOf(goBase)&&(path=goBase+(hashbang?"#!":"")+path);var i=path.indexOf("?");this.canonicalPath=path;var re=new RegExp("^"+escapeRegExp(goBase));if(this.path=path.replace(re,"")||"/",hashbang&&(this.path=this.path.replace("#!","")||"/"),this.title=hasDocument&&window.document.title,this.state=state||{},this.state.path=path,this.querystring=~i?_go._decodeURLEncodedURIComponent(path.slice(i+1)):"",this.pathname=_go._decodeURLEncodedURIComponent(~i?path.slice(0,i):path),this.params={},this.hash="",!hashbang){if(!~this.path.indexOf("#"))return;var parts=this.path.split("#");this.path=this.pathname=parts[0],this.hash=_go._decodeURLEncodedURIComponent(parts[1])||"",this.querystring=this.querystring.split("#")[0]}}function Route(path,options,go){var _go=this.go=go||globalPage,opts=options||{};opts.strict=opts.strict||_go._strict,this.path="*"===path?"(.*)":path,this.method="GET",this.regexp=pathToRegexp_1(this.path,this.keys=[],opts)}Page.prototype.configure=function(options){var opts=options||{};this._window=opts.window||hasWindow&&window,this._decodeURLComponents=!1!==opts.decodeURLComponents,this._popstate=!1!==opts.popstate&&hasWindow,this._click=!1!==opts.click&&hasDocument,this._hashbang=!!opts.hashbang;var _window=this._window;this._popstate?_window.addEventListener("popstate",this._onpopstate,!1):hasWindow&&_window.removeEventListener("popstate",this._onpopstate,!1),this._click?_window.document.addEventListener(clickEvent,this.clickHandler,!1):hasDocument&&_window.document.removeEventListener(clickEvent,this.clickHandler,!1),this._hashbang&&hasWindow&&!hasHistory?_window.addEventListener("hashchange",this._onpopstate,!1):hasWindow&&_window.removeEventListener("hashchange",this._onpopstate,!1)},Page.prototype.base=function(path){if(0===arguments.length)return this._base;this._base=path},Page.prototype._getBase=function(){var base=this._base;if(base)return base;var loc=hasWindow&&this._window&&this._window.location;return hasWindow&&this._hashbang&&loc&&"file:"===loc.protocol&&(base=loc.pathname),base},Page.prototype.strict=function(enable){if(0===arguments.length)return this._strict;this._strict=enable},Page.prototype.start=function(options){var opts=options||{};if(this.configure(opts),!1!==opts.dispatch){var url;if(this._running=!0,isLocation){var window,loc=this._window.location;url=this._hashbang&&~loc.hash.indexOf("#!")?loc.hash.substr(2)+loc.search:this._hashbang?loc.search+loc.hash:loc.pathname+loc.search+loc.hash}this.replace(url,null,!0,opts.dispatch)}},Page.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var window=this._window;this._click&&window.document.removeEventListener(clickEvent,this.clickHandler,!1),hasWindow&&window.removeEventListener("popstate",this._onpopstate,!1),hasWindow&&window.removeEventListener("hashchange",this._onpopstate,!1)}},Page.prototype.show=function(path,state,dispatch,push){if(simply.preserveParams&&simply.preserveParams.length>0){const urlParams=new URLSearchParams(window.location.search),filteredParams=new URLSearchParams;for(const[key,value]of urlParams.entries())simply.preserveParams.includes(key)&&filteredParams.append(key,value);const filteredQuery=filteredParams.toString();"string"==typeof path&&!path.includes("?")&&filteredQuery&&(path+="?"+filteredQuery)}var ctx=new Context(path,state,this),prev=this.prevContext;return this.simplyPrevContext={...prev},this.prevContext=ctx,this.current=ctx.path,!1!==dispatch&&this.dispatch(ctx,prev),!1!==ctx.handled&&!1!==push&&ctx.pushState(),ctx},Page.prototype.back=function(path,state){var go=this;if(this.len>0){var window=this._window;hasHistory&&window.history.back(),this.len--}else path?setTimeout((function(){go.show(path,state)})):setTimeout((function(){go.show(go._getBase(),state)}))},Page.prototype.redirect=function(from,to){var inst=this;if(simply.preserveParams&&simply.preserveParams.length>0){const urlParams=new URLSearchParams(window.location.search),filteredParams=new URLSearchParams;for(const[key,value]of urlParams.entries())simply.preserveParams.includes(key)&&filteredParams.append(key,value);const filteredQuery=filteredParams.toString();"string"==typeof to&&!to.includes("?")&&filteredQuery&&(to+="?"+filteredQuery)}"string"==typeof from&&"string"==typeof to&&go.call(this,from,(function(e){setTimeout((function(){inst.replace(to)}),0)})),"string"==typeof from&&void 0===to&&setTimeout((function(){inst.replace(from)}),0)},Page.prototype.replace=function(path,state,init,dispatch){var ctx=new Context(path,state,this),prev=this.prevContext;return this.prevContext=ctx,this.current=ctx.path,ctx.init=init,ctx.save(),!1!==dispatch&&this.dispatch(ctx,prev),ctx},Page.prototype.dispatch=async function(ctx,prev){var i=0,j=0,go=this;function nextExit(){var fn=go.exits[j++];if(!fn)return nextEnter();let theRoute=simply.go.getRouteByPath(go.current);fn(prev,nextExit)}function nextEnter(){var fn=go.callbacks[i++];if(ctx.path===go.current)return fn?void fn(ctx,nextEnter):unhandled.call(go,ctx);ctx.handled=!1}function getAllElementsOf(comp){const result=[];function walk(el){const tag=el.tagName.toLowerCase();"route"!==tag&&"style"!==tag&&(result.push(el),el.childNodes.forEach(child=>{1===child.nodeType&&walk(child)}),el.shadowRoot&&el.shadowRoot.childNodes.forEach(child=>{1===child.nodeType&&walk(child)}))}return result.push(comp),comp.childNodes.forEach(child=>{1===child.nodeType&&walk(child)}),comp.shadowRoot&&comp.shadowRoot.childNodes.forEach(child=>{1===child.nodeType&&walk(child)}),result}function handleTransition(comp,type,updateContext,delay){clearTimeout(comp.fallbackTimeout),clearTimeout(comp.staggerFn);const run=()=>{comp.activeTransitionController&&comp.activeTransitionController.abort();const controller=new AbortController;comp.activeTransitionController=controller,comp.completed=!1;const onComplete=()=>{controller.signal.aborted?comp.completed=!1:(comp.completed=!0,delete comp.activeTransitionController,clearTimeout(comp.fallbackTimeout),"exit"===type&&comp.remove(),updateContext&&(console.log("Router context updated!"),nextEnter()))};if("enter"===type?comp.setAttribute("enter",""):comp.removeAttribute("enter"),controller.signal.aborted)return void(comp.completed=!1);const transitioningElements=[comp,...getAllElementsOf(comp)].filter(el=>{const style=undefined,durations=undefined;return getComputedStyle(el).transitionDuration.split(",").map(s=>parseFloat(s)).some(d=>d>0)});if(0===transitioningElements.length)return void onComplete();let maxDuration=0;for(const el of transitioningElements){const style=getComputedStyle(el),durations=style.transitionDuration.split(",").map(s=>1e3*parseFloat(s)),delays=style.transitionDelay.split(",").map(s=>1e3*parseFloat(s)),maxElDuration=Math.max(...durations.map((d,i)=>d+(delays[i]||0)));maxDuration=Math.max(maxDuration,maxElDuration)}let remaining=transitioningElements.length;const checkDone=()=>{0==--remaining&&onComplete()};for(const el of transitioningElements){const handler=event=>{event.target===el&&(el.removeEventListener("transitionend",handler),checkDone())};el.addEventListener("transitionend",handler,{signal:controller.signal})}"exit"==type&&(comp.fallbackTimeout=setTimeout(()=>{console.log("⚠️ Transition fallback triggered:",comp),onComplete()},maxDuration+delay))};delay>0?setTimeout(run,delay):run()}if(prev){var to=simply.go.getRouteByPath(go.current),toTree=to.value&&to.value.tree&&to.value.path?[...to.value.tree]:[],contextUpdateFlag=!1;0==toTree.length&&toTree.push(to.value.path),toTree.reverse();const currentRoutes=Array.from(document.querySelectorAll("route")).map(r=>r.firstElementChild).filter(Boolean).reverse();var enterThose=currentRoutes.filter(r=>toTree.includes(r.routerSettings.path));const exitThose=currentRoutes.filter(r=>!toTree.includes(r.routerSettings.path));enterThose.forEach((comp,index)=>{const inCurrent=currentRoutes.includes(comp),transition=comp.routerSettings&&"transition"in comp.routerSettings?comp.routerSettings.transition:simply.routerSettings&&simply.routerSettings.transition,stagger=inCurrent?0:(comp.routerSettings&&"stagger"in comp.routerSettings?comp.routerSettings.stagger:simply.routerSettings&&simply.routerSettings.stagger)||0;transition&&handleTransition(comp,"enter",!1,index*stagger)}),exitThose.forEach((comp,index)=>{const transition=comp.routerSettings&&"transition"in comp.routerSettings?comp.routerSettings.transition:simply.routerSettings&&simply.routerSettings.transition;let stagger=comp.routerSettings&&"stagger"in comp.routerSettings?comp.routerSettings.stagger:simply.routerSettings&&simply.routerSettings.stagger||0;comp.completed||(stagger=0),transition?handleTransition(comp,"exit",contextUpdateFlag=index==exitThose.length-1,index*stagger):contextUpdateFlag=!1});try{const targetComponent=to.value.settings.component,hasComponent=enterThose.some(r=>r.routerSettings.component===targetComponent)}catch(e){var hasComponent=!1}hasComponent||contextUpdateFlag||nextEnter()}else nextEnter()},Page.prototype.exit=function(path,fn){if("function"==typeof path)return this.exit("*",path);var route=new Route(path,null,this);let theRoutePath=simply.go.getRouteByPath(path).value.path;simply.routes[theRoutePath].exits=simply.routes[theRoutePath].exits?simply.routes[theRoutePath].exits:[],simply.go.deleteExitCallbacksByPath(theRoutePath);for(var i=1;i<arguments.length;++i){const wrappedFn=route.middleware(arguments[i]);this.exits.push(wrappedFn),wrappedFn.pureFunc=arguments[i],simply.routes[theRoutePath].exits.push(wrappedFn)}console.log(theRoutePath,"'in exitleri silindi yenisi eklendi")},Page.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var el=e.target,eventPath=e.path||(e.composedPath?e.composedPath():null);if(eventPath)for(var i=0;i<eventPath.length;i++)if(eventPath[i].nodeName&&"A"===eventPath[i].nodeName.toUpperCase()&&eventPath[i].href){el=eventPath[i];break}for(;el&&"A"!==el.nodeName.toUpperCase();)el=el.parentNode;if(el&&"A"===el.nodeName.toUpperCase()){var svg="object"==typeof el.href&&"SVGAnimatedString"===el.href.constructor.name;if(!el.hasAttribute("download")&&"external"!==el.getAttribute("rel")){var link=el.getAttribute("href");if((this._hashbang||!this._samePath(el)||!el.hash&&"#"!==link)&&!(link&&link.indexOf("mailto:")>-1)&&!(svg?el.target.baseVal:el.target)&&(svg||this.sameOrigin(el.href))){var path=svg?el.href.baseVal:el.pathname+el.search+(el.hash||"");path="/"!==path[0]?"/"+path:path,hasProcess&&path.match(/^\/[a-zA-Z]:\//)&&(path=path.replace(/^\/[a-zA-Z]:\//,"/"));var orig=path,goBase=this._getBase();if(0===path.indexOf(goBase)&&(path=path.substr(goBase.length)),this.current==path){let route;if(!simply.go.getRouteByPath(path).value.settings.same_go_refresh)return void e.preventDefault()}this._hashbang&&(path=path.replace("#!","")),(!goBase||orig!==path||isLocation&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(orig))}}}}},Page.prototype._onpopstate=(loaded=!1,hasWindow?(hasDocument&&"complete"===document.readyState?loaded=!0:window.addEventListener("load",(function(){setTimeout((function(){loaded=!0}),0)})),function onpopstate(e){if(loaded){var go=this;if(e.state){var path=e.state.path;e.state.popstate=!0,go.replace(path,e.state)}else if(isLocation){var loc=go._window.location;go.show(loc.pathname+loc.search+loc.hash,void 0,void 0,!1)}}}):function(){}),Page.prototype._which=function(e){return null==(e=e||hasWindow&&this._window.event).which?e.button:e.which},Page.prototype._toURL=function(href){var window=this._window;if("function"==typeof URL&&isLocation)return new URL(href,window.location.toString());if(hasDocument){var anc=window.document.createElement("a");return anc.href=href,anc}},Page.prototype.sameOrigin=function(href){if(!href||!isLocation)return!1;var url=this._toURL(href),window,loc=this._window.location;return loc.protocol===url.protocol&&loc.hostname===url.hostname&&(loc.port===url.port||""===loc.port&&(80==url.port||443==url.port))},Page.prototype._samePath=function(url){if(!isLocation)return!1;var window,loc=this._window.location;return url.pathname===loc.pathname&&url.search===loc.search},Page.prototype._decodeURLEncodedURIComponent=function(val){return"string"!=typeof val?val:this._decodeURLComponents?decodeURIComponent(val.replace(/\+/g," ")):val},Context.prototype.pushState=function(){var go=this.go,window=go._window,hashbang=go._hashbang;go.len++,hasHistory&&window.history.pushState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Context.prototype.save=function(){var go=this.go;hasHistory&&go._window.history.replaceState(this.state,this.title,go._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Route.prototype.middleware=function(fn){var self=this;function wrapper(ctx,next){if(self.match(ctx.path,ctx.params,ctx.routePath))return ctx.routePath=self.path,fn(ctx,next);next()}return wrapper.originalFn=fn,wrapper},Route.prototype.findRouteWithPath=function(path){return qsIndex=path.indexOf("?"),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp.exec(decodeURIComponent(pathname)),m||!1},Route.prototype.match=function(path,params){var keys=this.keys,qsIndex=path.indexOf("?"),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp.exec(decodeURIComponent(pathname));if(!m)return!1;delete params[0];for(var i=1,len=m.length;i<len;++i){var key=keys[i-1],val=this.go._decodeURLEncodedURIComponent(m[i]);void 0===val&&hasOwnProperty.call(params,key.name)||(params[key.name]=val)}return!0};var globalPage=createPage(),go_js=globalPage,default_1=globalPage;return go_js.default=default_1,go_js},getElementUniqueId:function(el){const parts=[];for(;el;){if(el instanceof ShadowRoot){parts.push("shadowroot"),el=el.host;continue}const tag=el.tagName.toLowerCase(),parent=el.parentNode||el.getRootNode().host;if(!parent)break;const siblings=undefined,index=Array.from(parent.children).indexOf(el);parts.push(`${tag}[${index}]`),el=parent instanceof Element||parent instanceof ShadowRoot?parent:null}return parts.reverse().join(" > ")},saveScrollPositions:function(root,path){const scrollPositions={},route=root.querySelector("route");function isInsideRoute(el){return route&&(route===el||route.contains(el))}function traverse(el){if(el instanceof Element&&!isInsideRoute(el)){if(0!==el.scrollLeft||0!==el.scrollTop){const id=simply.getElementUniqueId(el);scrollPositions[id]={x:el.scrollLeft,y:el.scrollTop}}if(el.shadowRoot)for(const child of el.shadowRoot.children)traverse(child);for(const child of el.children)traverse(child)}}traverse(root),window.scrollPositions[path]=scrollPositions},qs:function(){var toString=Object.prototype.toString,isint=/^[0-9]+$/;function promote(parent,key){if(0==parent[key].length)return parent[key]={};var t={};for(var i in parent[key])t[i]=parent[key][i];return parent[key]=t,t}function parse(parts,parent,key,val){var part=parts.shift();if(part){var obj=parent[key]=parent[key]||[];"]"===part?Array.isArray(obj)?""!==val&&obj.push(val):"object"==typeof obj?obj[Object.keys(obj).length]=val:obj=parent[key]=[parent[key],val]:-1!==part.indexOf("]")?(part=part.substr(0,part.length-1),!isint.test(part)&&Array.isArray(obj)&&(obj=promote(parent,key)),parse(parts,obj,part,val)):(!isint.test(part)&&Array.isArray(obj)&&(obj=promote(parent,key)),parse(parts,obj,part,val))}else Array.isArray(parent[key])?parent[key].push(val):"object"==typeof parent[key]||void 0===parent[key]?parent[key]=val:parent[key]=[parent[key],val]}function merge(parent,key,val){if(~key.indexOf("]")){var parts;parse(key.split("["),parent,"base",val)}else{if(!isint.test(key)&&Array.isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t}set(parent.base,key,val)}return parent}function parseObject(obj){var ret={base:{}};return Object.keys(obj).forEach((function(name){merge(ret,name,obj[name])})),ret.base}function parseString(str){return String(str).split("&").reduce((function(ret,pair){try{pair=decodeURIComponent(pair.replace(/\+/g," "))}catch(e){}var eql=pair.indexOf("="),brace=lastBraceInKey(pair),key=pair.substr(0,brace||eql),val=pair.substr(brace||eql);return val=val.substr(val.indexOf("=")+1),""===key&&(key=pair,val=""),merge(ret,key,val)}),{base:{}}).base}function stringify(obj,prefix){return Array.isArray(obj)?stringifyArray(obj,prefix):"[object Object]"===toString.call(obj)?stringifyObject(obj,prefix):"string"==typeof obj?stringifyString(obj,prefix):prefix+"="+obj}function stringifyString(str,prefix){if(!prefix)throw new TypeError("stringify expects an object");return prefix+"="+encodeURIComponent(str)}function stringifyArray(arr,prefix){var ret=[];if(!prefix)throw new TypeError("stringify expects an object");for(var i=0;i<arr.length;i++)ret.push(stringify(arr[i],prefix+"["+i+"]"));return ret.join("&")}function stringifyObject(obj,prefix){for(var ret=[],keys=Object.keys(obj),key,i=0,len=keys.length;i<len;++i)key=keys[i],ret.push(stringify(obj[key],prefix?prefix+"["+encodeURIComponent(key)+"]":encodeURIComponent(key)));return ret.join("&")}function set(obj,key,val){var v=obj[key];void 0===v?obj[key]=val:Array.isArray(v)?v.push(val):obj[key]=[v,val]}function lastBraceInKey(str){for(var len=str.length,brace,c,i=0;i<len;++i)if("]"===(c=str[i])&&(brace=!1),"["===c&&(brace=!0),"="===c&&!brace)return i}return{parse:function(str){return null==str||""===str?{}:"object"==typeof str?parseObject(str):parseString(str)},stringify:stringify}}(),initGo:function(a,b){simply.go=simply.go(),simply.go.configure({window:window});var base=document.querySelector("base[href]");if(base){var base_href=base.getAttribute("href").replace(/\/$/,"");simply.go.base(base_href)}},init:function(){this.morphdom(),this.observableSlim(),simply.initGo(),window.get=this.get}},simply.init();
//# sourceMappingURL=simply.min.js.map