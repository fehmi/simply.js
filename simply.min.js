function utils(){query=document.querySelector.bind(document),queryAll=document.querySelectorAll.bind(document),fromId=document.getElementById.bind(document),fromClass=document.getElementsByClassName.bind(document),fromTag=document.getElementsByTagName.bind(document),get=function(name,path){loadAndParseComponent(name,path,(function(component){getSettings(component,(function(settings){registerComponent(settings)}))}))},loadAndParseComponent=function(name,path,callback){var request=new XMLHttpRequest;request.open("GET",path,!0),request.onload=function(){if(this.status>=200&&this.status<400){var txt=document.createElement("textarea"),parser,dom=(new DOMParser).parseFromString(this.response,"text/html"),template="";if(this.response.indexOf("<template>")>-1)for(var templateOpenTag=/<template(.*)>/g,templateCloseTag=/<\/template>/g,bucket="",processedLetters="",templateCount=0,i=0;i<this.response.length;i++){if(bucket+=this.response[i],null!==(logic=templateOpenTag.exec(bucket)))templateCount+=1,bucket="";else if(null!==(logic=templateCloseTag.exec(bucket))&&(bucket="",0==(templateCount-=1))){template=processedLetters.replace(new RegExp("</template>$"),"");break}templateCount>0&&(processedLetters+=this.response[i+1])}var style="";dom.querySelector("style")&&(style=dom.querySelector("style"),txt.innerHTML=style.innerHTML,style=txt.value);var script="";if(dom.querySelector("script")){var script=dom.querySelector("script");txt.innerHTML=script.innerHTML,script=txt.value}path.indexOf("blob"),callback({name:name,template:template,style:style,script:script})}else console.log("Component import error: We reached our target server, but it returned an error")},request.onerror=function(){},request.send()},getSettings=function({name:name,template:template,style:style,script:script},callback){function getListeners(settings){return settings}callback({name:name,template:template,style:style,script:script})},registerComponent=function({template:template,style:style,name:name,listeners:listeners,script:script,settings:settings}){if(!customElements.get(name)){class UnityComponent extends HTMLElement{constructor(){if(super(),""!==script){for(var m,importRegex=/get\(.*\)\;/m;null!==(m=importRegex.exec(script));)m.forEach((function(){script=script.replace(m[0],""),eval(m[0])}));var timelateLines=template.split("\n"),styleLines=style.split("\n"),lineBreaks="\n";for(let index=0;index<timelateLines.length+1+styleLines.length;index++)lineBreaks+="\n";if(0==script.trim().indexOf("class")){this.componentClass=eval("//"+name+lineBreaks+"//"+name+"\n\nnew "+script.trim()),this.lifecycle=this.componentClass.lifecycle,void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeConstruct&&this.lifecycle.beforeConstruct(),this.uid="_"+Math.random().toString(36).substr(2,9);var component=this,data=this.componentClass.data;data.props={},this.methods=this.componentClass.methods,this.watch=this.componentClass.watch,this.component=this,this.parent=this.getRootNode().host;for(var i=0;i<this.attributes.length;i++){var attrib=this.attributes[i];try{data.props[attrib.name]=JSON.parse(attrib.value)}catch(e){data.props[attrib.name]=attrib.value}}this.data=data,void 0!==this.lifecycle&&void 0!==this.lifecycle.afterConstruct&&this.lifecycle.afterConstruct()}}}observeAttrChange(el,callback){var observer=new MutationObserver((function(mutations){mutations.forEach((function(mutation){if("attributes"===mutation.type){var newVal=mutation.target.getAttribute(mutation.attributeName);callback(mutation.attributeName,newVal)}}))}));return observer.observe(el,{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeOldValue:!0,characterDataOldValue:!1}),observer}connectedCallback(){this.observeAttrChange(this,(function(name,newValue){try{newValue=JSON.parse(newValue)}catch(e){newValue=newValue}newValue!==self.data.props[name]&&(self.data.props[name]=newValue,void 0!==self.lifecycle&&void 0!==self.lifecycle.whenPropChange&&self.lifecycle.whenPropChange(name,self.data.props[name],newValue))}));let self=this;this.render(),this.data&&obaa(this.data,(function(name,value,old,parents){void 0!==self.lifecycle&&void 0!==self.lifecycle.whenDataChange&&self.lifecycle.whenDataChange(name,value,old,parents),self.render(),self.props&&("#-props"==parents?self.setAttribute(name,JSON.stringify(self.data.props[name])):(name=parents.split("-")[2],self.setAttribute(name,JSON.stringify(self.data.props[name])))),void 0!==self.watch&&self.watch(name,value,old,parents)}))}render(){let m,regex=/\s+on[a-z]+\=(\"|\')(.+)(\"|\')/gm;for(;null!==(m=regex.exec(template));)m.index===regex.lastIndex&&regex.lastIndex++,-1==m[2].indexOf("this.getRootNode().host.methods")&&(template=template.split(m[2]).join("this.getRootNode().host.methods."+m[2]));if(this.rendered){void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeRerender&&this.lifecycle.beforeRerender();var newDom=document.createElement("div");let parsedTemplate=simply.parseTemplate(template,this.data),parsedStyle=simply.parseStyle(style,this.data);newDom.innerHTML=parsedTemplate+"<style>"+parsedStyle+"</style>",morphdom(this.dom,newDom,{childrenOnly:!0,onBeforeElChildrenUpdated:function(fromEl){"CHILD-COMPONENT"==fromEl.tagName&&console.log("dont again")}}),void 0!==this.lifecycle&&void 0!==this.lifecycle.afterRerender&&this.lifecycle.afterRerender()}else{let parsedTemplate=simply.parseTemplate(template,this.data);if(""!==style){let parsedStyle;parsedTemplate=parsedTemplate+"<style>"+simply.parseStyle(style,this.data)+"</style>"}void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeFirstRender&&void 0!==this.lifecycle.beforeFirstRender(parsedTemplate)&&(parsedTemplate=this.lifecycle.beforeFirstRender(parsedTemplate)),this.dom=this.attachShadow({mode:"open"}),this.dom.innerHTML=parsedTemplate,setTimeout(()=>{void 0!==this.lifecycle&&void 0!==this.lifecycle.afterFirstRender&&this.lifecycle.afterFirstRender()},0)}this.rendered=!0}disconnectedCallback(){void 0!==this.lifecycle&&void 0!==this.lifecycle.disconnected&&this.lifecycle.disconnected()}attributeChangedCallback(name,oldValue,newValue){}adoptedCallback(){}_attachListeners(){}}return customElements.define(name,UnityComponent)}}}utils(),window.simply={components:{},parseTemplate:function(template,data){let ifStatement=/\<(\s+)?if(\s+)([a-zA-Z_\.]+(\s+)??.*)(\s+)?(\>)$/,elseIfStatement=/\<(\s+)?else(\s+)if(\s+)(.*(\s+?.*))(\s+)?(\>)$/,endIfStatement=/\<(\s+)?\/(\s+)?if(\s+)?\>$/,elseStatement=/\<(\s+)?else(\s+)?\>$/,eachStatement=/\<(\s+)?each(\s+)?(.*)\s+as\s+([a-zA-Z._]+)(\s+)?(,(\s+)?)?([a-zA-Z._]+)?(\s+)?(\()?(\s+)?([a-zA-Z._]+(\s+)?)?(\))?(\s+)?\>$/,endEachStatement=/\<(\s+)?\/(\s+)?each(\s+)?\>/,variable=/{(\s+)?([a-zA-Z_\.\+\*\d\/\=\s\(\)]+)(\s+)?}$/,ifCount=0,eachCount=0,m,bucket="";for(var processedLetters="",capturedLogics=[],staticLetters="",i=0;i<template.length;i++)if(processedLetters+=template[i],bucket+=template[i],null!==(m=ifStatement.exec(bucket))||null!==(m=elseIfStatement.exec(bucket))||null!==(m=endIfStatement.exec(bucket))||null!==(m=elseStatement.exec(bucket))||null!==(m=eachStatement.exec(bucket))||null!==(m=endEachStatement.exec(bucket))||null!==(m=variable.exec(bucket))){if(null!==(logic=ifStatement.exec(bucket)))logic=unescape("if ("+logic[3]+") {"),ifCount+=1;else if(null!==(logic=elseIfStatement.exec(bucket)))logic=unescape(logic[4]),logic="}else if ("+logic+") {";else if(null!==(logic=elseStatement.exec(bucket)))logic="}else {";else if(null!==(logic=endIfStatement.exec(bucket)))ifCount-=1,logic="}";else if(null!==(logic=eachStatement.exec(bucket))){eachCount+=1;let subject=eval(logic[3]),i="s"+Math.random().toString(36).slice(-7);if(Array.isArray(subject)){let key=void 0!==logic[8]?"let "+logic[8]+" = "+i+";":"",index=void 0!==logic[8]?"let "+logic[12]+" = "+i+";":"";logic="for ("+i+" = 0; "+i+" < "+logic[3]+".length; "+i+"++) {                         "+key+";                         "+index+";                         let "+logic[4]+"="+logic[3]+"["+i+"];"}else{let key=void 0!==logic[12]?"let "+logic[12]+" = "+i+";":"";logic="                    for (var ii in "+logic[3]+") {                       if (ii == '__o_') { continue; }                      let "+key+"= Object.keys("+logic[3]+").indexOf(ii);                       let "+logic[8]+"= ii;                       let "+logic[4]+"="+logic[3]+"[ii];"}}else null!==(logic=endEachStatement.exec(bucket))?(eachCount-=1,logic="};"):null!==(logic=variable.exec(bucket))&&(logic="ht+="+m[2]+";");capturedLogics.push(m[0]);let logicLine=capturedLogics[capturedLogics.length-1],staticText=processedLetters.replace(logicLine,""),replaceThis=staticText+logicLine;var withThis="ht+=`"+staticText.trim().replace(/\n/g,"")+"`;"+logic;bucket=bucket.replace(replaceThis,withThis),processedLetters=""}""!==processedLetters.trim()&&(processedLettersRegex=processedLetters.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),bucket=bucket.replace(new RegExp(processedLettersRegex+"$"),"ht+=`"+processedLetters.trim()+"`;"));var ht="";return eval(bucket+"//@ sourceURL=foo.js"),ht},parseStyle:function(style,data){let variable=/(\"|')(\s+)?{(\s+)?([a-zA-Z_\.\+\*\d\/\=\s\(\)]+)(\s+)?}(\s+)?(\"|')/gm;for(;null!==(m=variable.exec(style));)m.index===variable.lastIndex&&variable.lastIndex++,style=style.split(m[0]).join(eval(m[4]));return style}},function(win){function obaa(target,arr,callback){var eventPropArr=[];for(var prop in isArray(target)&&(0===target.length&&(target.__o_={__r_:target,__p_:"#"}),mock(target,target)),target&&"object"==typeof target&&0===Object.keys(target).length&&(track(target),target.__o_.__r_=target),target)target.hasOwnProperty(prop)&&(callback?isArray(arr)&&isInArray(arr,prop)?(eventPropArr.push(prop),watch(target,prop,null,target)):isString(arr)&&prop==arr&&(eventPropArr.push(prop),watch(target,prop,null,target)):(eventPropArr.push(prop),watch(target,prop,null,target)));target.__c_||(target.__c_=[]);var propChanged=callback||arr;target.__c_.push({all:!callback,propChanged:propChanged,eventPropArr:eventPropArr})}var triggerStr=["concat","copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift","size"].join(","),methods=["concat","copyWithin","entries","every","fill","filter","find","findIndex","forEach","includes","indexOf","join","keys","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","slice","some","sort","splice","toLocaleString","toString","unshift","values","size"];function mock(target,root){methods.forEach((function(item){target[item]=function(){var old=Array.prototype.slice.call(this,0),result=Array.prototype[item].apply(this,Array.prototype.slice.call(arguments));if(new RegExp("\\b"+item+"\\b").test(triggerStr)){for(var cprop in this)this.hasOwnProperty(cprop)&&!isFunction(this[cprop])&&watch(this,cprop,this.__o_.__p_,root);onPropertyChanged("Array-"+item,this,old,this,this.__o_.__p_,root)}return result},target["pure"+item.substring(0,1).toUpperCase()+item.substring(1)]=function(){return Array.prototype[item].apply(this,Array.prototype.slice.call(arguments))}}))}function watch(target,prop,path,root){if("__o_"!==prop&&!isFunction(target[prop])){target.__o_||(target.__o_={__r_:root}),target.__o_.__p_=null!=path?path:"#";var currentValue=target.__o_[prop]=target[prop];if(Object.defineProperty(target,prop,{get:function(){return this.__o_[prop]},set:function(value){var old=this.__o_[prop];this.__o_[prop]=value,onPropertyChanged(prop,value,old,this,target.__o_.__p_,root)},configurable:!0,enumerable:!0}),"object"==typeof currentValue)for(var cprop in isArray(currentValue)&&(mock(currentValue,root),0===currentValue.length&&track(currentValue,prop,path)),currentValue&&0===Object.keys(currentValue).length&&track(currentValue,prop,path),currentValue)currentValue.hasOwnProperty(cprop)&&watch(currentValue,cprop,target.__o_.__p_+"-"+prop,root)}}function track(obj,prop,path){obj.__o_||(obj.__o_={},obj.__o_.__p_=null!=path?path+"-"+prop:null!=prop?"#-"+prop:"#")}function onPropertyChanged(prop,value,oldValue,target,path,root){if(value!==oldValue&&(!nan(value)||!nan(oldValue))&&root.__c_)for(var rootName=getRootName(prop,path),i=0,len=root.__c_.length;i<len;i++){var handler=root.__c_[i];(handler.all||isInArray(handler.eventPropArr,rootName)||0===rootName.indexOf("Array-"))&&("__deleted__"==value&&(delete target[prop],delete target.__o_[prop]),handler.propChanged.call(target,prop,value,oldValue,path))}0!==prop.indexOf("Array-")&&"object"==typeof value&&watch(target,prop,target.__o_.__p_,root)}function isFunction(obj){return"[object Function]"==Object.prototype.toString.call(obj)}function nan(value){return"number"==typeof value&&isNaN(value)}function isArray(obj){return"[object Array]"===Object.prototype.toString.call(obj)}function isString(obj){return"string"==typeof obj}function isInArray(arr,item){for(var i=arr.length;--i>-1;)if(item===arr[i])return!0;return!1}function getRootName(prop,path){return"#"===path?prop:path.split("-")[1]}obaa.add=function(obj,prop){watch(obj,prop,obj.__o_.__p_,obj.__o_.__r_)},obaa.set=function(obj,prop,value){void 0===obj[prop]&&watch(obj,prop,obj.__o_.__p_,obj.__o_.__r_),obj[prop]=value},obaa.delete=function(obj,prop,value){obj[prop]="__deleted__",watch(obj,prop,obj.__o_,obj.__o_)},Array.prototype.size=function(length){this.length=length},"undefined"!=typeof module&&module.exports?module.exports=obaa:"function"==typeof define&&define.amd?define(obaa):win.obaa=obaa}(Function("return this")()),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).morphdom=factory()}(this,(function(){"use strict";var DOCUMENT_FRAGMENT_NODE=11,range;function morphAttrs(fromNode,toNode){var toNodeAttrs=toNode.attributes,attr,attrName,attrNamespaceURI,attrValue,fromValue;if(11!==toNode.nodeType&&11!==fromNode.nodeType){for(var i=toNodeAttrs.length-1;i>=0;i--)attrName=(attr=toNodeAttrs[i]).name,attrNamespaceURI=attr.namespaceURI,attrValue=attr.value,attrNamespaceURI?(attrName=attr.localName||attrName,(fromValue=fromNode.getAttributeNS(attrNamespaceURI,attrName))!==attrValue&&("xmlns"===attr.prefix&&(attrName=attr.name),fromNode.setAttributeNS(attrNamespaceURI,attrName,attrValue))):(fromValue=fromNode.getAttribute(attrName))!==attrValue&&fromNode.setAttribute(attrName,attrValue);for(var fromNodeAttrs=fromNode.attributes,d=fromNodeAttrs.length-1;d>=0;d--)attrName=(attr=fromNodeAttrs[d]).name,(attrNamespaceURI=attr.namespaceURI)?(attrName=attr.localName||attrName,toNode.hasAttributeNS(attrNamespaceURI,attrName)||fromNode.removeAttributeNS(attrNamespaceURI,attrName)):toNode.hasAttribute(attrName)||fromNode.removeAttribute(attrName)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(str){var template=doc.createElement("template");return template.innerHTML=str,template.content.childNodes[0]}function createFragmentFromRange(str){var fragment;return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(str).childNodes[0]}function createFragmentFromWrap(str){var fragment=doc.createElement("body");return fragment.innerHTML=str,fragment.childNodes[0]}function toElement(str){return str=str.trim(),HAS_TEMPLATE_SUPPORT?createFragmentFromTemplate(str):HAS_RANGE_SUPPORT?createFragmentFromRange(str):createFragmentFromWrap(str)}function compareNodeNames(fromEl,toEl){var fromNodeName=fromEl.nodeName,toNodeName=toEl.nodeName,fromCodeStart,toCodeStart;return fromNodeName===toNodeName||(fromCodeStart=fromNodeName.charCodeAt(0),toCodeStart=toNodeName.charCodeAt(0),fromCodeStart<=90&&toCodeStart>=97?fromNodeName===toNodeName.toUpperCase():toCodeStart<=90&&fromCodeStart>=97&&toNodeName===fromNodeName.toUpperCase())}function createElementNS(name,namespaceURI){return namespaceURI&&namespaceURI!==NS_XHTML?doc.createElementNS(namespaceURI,name):doc.createElement(name)}function moveChildren(fromEl,toEl){for(var curChild=fromEl.firstChild;curChild;){var nextChild=curChild.nextSibling;toEl.appendChild(curChild),curChild=nextChild}return toEl}function syncBooleanAttrProp(fromEl,toEl,name){fromEl[name]!==toEl[name]&&(fromEl[name]=toEl[name],fromEl[name]?fromEl.setAttribute(name,""):fromEl.removeAttribute(name))}var specialElHandlers={OPTION:function(fromEl,toEl){var parentNode=fromEl.parentNode;if(parentNode){var parentName=parentNode.nodeName.toUpperCase();"OPTGROUP"===parentName&&(parentName=(parentNode=parentNode.parentNode)&&parentNode.nodeName.toUpperCase()),"SELECT"!==parentName||parentNode.hasAttribute("multiple")||(fromEl.hasAttribute("selected")&&!toEl.selected&&(fromEl.setAttribute("selected","selected"),fromEl.removeAttribute("selected")),parentNode.selectedIndex=-1)}syncBooleanAttrProp(fromEl,toEl,"selected")},INPUT:function(fromEl,toEl){syncBooleanAttrProp(fromEl,toEl,"checked"),syncBooleanAttrProp(fromEl,toEl,"disabled"),fromEl.value!==toEl.value&&(fromEl.value=toEl.value),toEl.hasAttribute("value")||fromEl.removeAttribute("value")},TEXTAREA:function(fromEl,toEl){var newValue=toEl.value;fromEl.value!==newValue&&(fromEl.value=newValue);var firstChild=fromEl.firstChild;if(firstChild){var oldValue=firstChild.nodeValue;if(oldValue==newValue||!newValue&&oldValue==fromEl.placeholder)return;firstChild.nodeValue=newValue}},SELECT:function(fromEl,toEl){if(!toEl.hasAttribute("multiple")){for(var selectedIndex=-1,i=0,curChild=fromEl.firstChild,optgroup,nodeName;curChild;)if("OPTGROUP"===(nodeName=curChild.nodeName&&curChild.nodeName.toUpperCase()))curChild=(optgroup=curChild).firstChild;else{if("OPTION"===nodeName){if(curChild.hasAttribute("selected")){selectedIndex=i;break}i++}!(curChild=curChild.nextSibling)&&optgroup&&(curChild=optgroup.nextSibling,optgroup=null)}fromEl.selectedIndex=selectedIndex}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8,morphdom;function noop(){}function defaultGetNodeKey(node){if(node)return node.getAttribute&&node.getAttribute("id")||node.id}function morphdomFactory(morphAttrs){return function morphdom(fromNode,toNode,options){if(options||(options={}),"string"==typeof toNode)if("#document"===fromNode.nodeName||"HTML"===fromNode.nodeName||"BODY"===fromNode.nodeName){var toNodeHtml=toNode;(toNode=doc.createElement("html")).innerHTML=toNodeHtml}else toNode=toElement(toNode);else 11===toNode.nodeType&&(toNode=toNode.firstElementChild);var getNodeKey=options.getNodeKey||defaultGetNodeKey,onBeforeNodeAdded=options.onBeforeNodeAdded||noop,onNodeAdded=options.onNodeAdded||noop,onBeforeElUpdated=options.onBeforeElUpdated||noop,onElUpdated=options.onElUpdated||noop,onBeforeNodeDiscarded=options.onBeforeNodeDiscarded||noop,onNodeDiscarded=options.onNodeDiscarded||noop,onBeforeElChildrenUpdated=options.onBeforeElChildrenUpdated||noop,childrenOnly=!0===options.childrenOnly,fromNodesLookup=Object.create(null),keyedRemovalList=[];function addKeyedRemoval(key){keyedRemovalList.push(key)}function walkDiscardedChildNodes(node,skipKeyedNodes){if(1===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=void 0;skipKeyedNodes&&(key=getNodeKey(curChild))?addKeyedRemoval(key):(onNodeDiscarded(curChild),curChild.firstChild&&walkDiscardedChildNodes(curChild,skipKeyedNodes)),curChild=curChild.nextSibling}}function removeNode(node,parentNode,skipKeyedNodes){!1!==onBeforeNodeDiscarded(node)&&(parentNode&&parentNode.removeChild(node),onNodeDiscarded(node),walkDiscardedChildNodes(node,skipKeyedNodes))}function indexTree(node){if(1===node.nodeType||11===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=getNodeKey(curChild);key&&(fromNodesLookup[key]=curChild),indexTree(curChild),curChild=curChild.nextSibling}}function handleNodeAdded(el){onNodeAdded(el);for(var curChild=el.firstChild;curChild;){var nextSibling=curChild.nextSibling,key=getNodeKey(curChild);if(key){var unmatchedFromEl=fromNodesLookup[key];unmatchedFromEl&&compareNodeNames(curChild,unmatchedFromEl)?(curChild.parentNode.replaceChild(unmatchedFromEl,curChild),morphEl(unmatchedFromEl,curChild)):handleNodeAdded(curChild)}else handleNodeAdded(curChild);curChild=nextSibling}}function cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey){for(;curFromNodeChild;){var fromNextSibling=curFromNodeChild.nextSibling;(curFromNodeKey=getNodeKey(curFromNodeChild))?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}}function morphEl(fromEl,toEl,childrenOnly){var toElKey=getNodeKey(toEl);if(toElKey&&delete fromNodesLookup[toElKey],!childrenOnly){if(!1===onBeforeElUpdated(fromEl,toEl))return;if(morphAttrs(fromEl,toEl),onElUpdated(fromEl),!1===onBeforeElChildrenUpdated(fromEl,toEl))return}"TEXTAREA"!==fromEl.nodeName?morphChildren(fromEl,toEl):specialElHandlers.TEXTAREA(fromEl,toEl)}function morphChildren(fromEl,toEl){var curToNodeChild=toEl.firstChild,curFromNodeChild=fromEl.firstChild,curToNodeKey,curFromNodeKey,fromNextSibling,toNextSibling,matchingFromEl;outer:for(;curToNodeChild;){for(toNextSibling=curToNodeChild.nextSibling,curToNodeKey=getNodeKey(curToNodeChild);curFromNodeChild;){if(fromNextSibling=curFromNodeChild.nextSibling,curToNodeChild.isSameNode&&curToNodeChild.isSameNode(curFromNodeChild)){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey=getNodeKey(curFromNodeChild);var curFromNodeType=curFromNodeChild.nodeType,isCompatible=void 0;if(curFromNodeType===curToNodeChild.nodeType&&(1===curFromNodeType?(curToNodeKey?curToNodeKey!==curFromNodeKey&&((matchingFromEl=fromNodesLookup[curToNodeKey])?fromNextSibling===matchingFromEl?isCompatible=!1:(fromEl.insertBefore(matchingFromEl,curFromNodeChild),curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=matchingFromEl):isCompatible=!1):curFromNodeKey&&(isCompatible=!1),(isCompatible=!1!==isCompatible&&compareNodeNames(curFromNodeChild,curToNodeChild))&&morphEl(curFromNodeChild,curToNodeChild)):3!==curFromNodeType&&8!=curFromNodeType||(isCompatible=!0,curFromNodeChild.nodeValue!==curToNodeChild.nodeValue&&(curFromNodeChild.nodeValue=curToNodeChild.nodeValue))),isCompatible){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}if(curToNodeKey&&(matchingFromEl=fromNodesLookup[curToNodeKey])&&compareNodeNames(matchingFromEl,curToNodeChild))fromEl.appendChild(matchingFromEl),morphEl(matchingFromEl,curToNodeChild);else{var onBeforeNodeAddedResult=onBeforeNodeAdded(curToNodeChild);!1!==onBeforeNodeAddedResult&&(onBeforeNodeAddedResult&&(curToNodeChild=onBeforeNodeAddedResult),curToNodeChild.actualize&&(curToNodeChild=curToNodeChild.actualize(fromEl.ownerDocument||doc)),fromEl.appendChild(curToNodeChild),handleNodeAdded(curToNodeChild))}curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling}cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey);var specialElHandler=specialElHandlers[fromEl.nodeName];specialElHandler&&specialElHandler(fromEl,toEl)}indexTree(fromNode);var morphedNode=fromNode,morphedNodeType=morphedNode.nodeType,toNodeType=toNode.nodeType;if(!childrenOnly)if(1===morphedNodeType)1===toNodeType?compareNodeNames(fromNode,toNode)||(onNodeDiscarded(fromNode),morphedNode=moveChildren(fromNode,createElementNS(toNode.nodeName,toNode.namespaceURI))):morphedNode=toNode;else if(3===morphedNodeType||8===morphedNodeType){if(toNodeType===morphedNodeType)return morphedNode.nodeValue!==toNode.nodeValue&&(morphedNode.nodeValue=toNode.nodeValue),morphedNode;morphedNode=toNode}if(morphedNode===toNode)onNodeDiscarded(fromNode);else{if(toNode.isSameNode&&toNode.isSameNode(morphedNode))return;if(morphEl(morphedNode,toNode,childrenOnly),keyedRemovalList)for(var i=0,len=keyedRemovalList.length;i<len;i++){var elToRemove=fromNodesLookup[keyedRemovalList[i]];elToRemove&&removeNode(elToRemove,elToRemove.parentNode,!1)}}return!childrenOnly&&morphedNode!==fromNode&&fromNode.parentNode&&(morphedNode.actualize&&(morphedNode=morphedNode.actualize(fromNode.ownerDocument||doc)),fromNode.parentNode.replaceChild(morphedNode,fromNode)),morphedNode}}return morphdomFactory(morphAttrs)})),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.Navigo=factory()}(this,(function(){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function isPushStateAvailable(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function Navigo(r,useHash,hash){this.root=null,this._routes=[],this._useHash=useHash,this._hash=void 0===hash?"#":hash,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!useHash&&isPushStateAvailable(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",r?this.root=useHash?r.replace(/\/$/,"/"+this._hash):r.replace(/\/$/,""):useHash&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function clean(s){return s instanceof RegExp?s:s.replace(/\/+$/,"").replace(/^\/+/,"^/")}function regExpResultToParams(match,names){return 0===names.length?null:match?match.slice(1,match.length).reduce((function(params,value,index){return null===params&&(params={}),params[names[index]]=decodeURIComponent(value),params}),null):null}function replaceDynamicURLParts(route){var paramNames=[],regexp;return{regexp:regexp=route instanceof RegExp?route:new RegExp(route.replace(Navigo.PARAMETER_REGEXP,(function(full,dots,name){return paramNames.push(name),Navigo.REPLACE_VARIABLE_REGEXP})).replace(Navigo.WILDCARD_REGEXP,Navigo.REPLACE_WILDCARD)+Navigo.FOLLOWED_BY_SLASH_REGEXP,Navigo.MATCH_REGEXP_FLAGS),paramNames:paramNames}}function getUrlDepth(url){return url.replace(/\/$/,"").split("/").length}function compareUrlDepth(urlA,urlB){return getUrlDepth(urlB)-getUrlDepth(urlA)}function findMatchedRoutes(url){var routes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return routes.map((function(route){var _replaceDynamicURLPar=replaceDynamicURLParts(clean(route.route)),regexp=_replaceDynamicURLPar.regexp,paramNames=_replaceDynamicURLPar.paramNames,match=url.replace(/^\/+/,"/").match(regexp),params=regExpResultToParams(match,paramNames);return!!match&&{match:match,route:route,params:params}})).filter((function(m){return m}))}function match(url,routes){return findMatchedRoutes(url,routes)[0]||!1}function root(url,routes){var matched=routes.map((function(route){return""===route.route||"*"===route.route?url:url.split(new RegExp(route.route+"($|/)"))[0]})),fallbackURL=clean(url);return matched.length>1?matched.reduce((function(result,url){return result.length>url.length&&(result=url),result}),matched[0]):1===matched.length?matched[0]:fallbackURL}function isHashChangeAPIAvailable(){return"undefined"!=typeof window&&"onhashchange"in window}function extractGETParameters(url){return url.split(/\?(.*)?$/).slice(1).join("")}function getOnlyURL(url,useHash,hash){var onlyURL=url,split,cleanGETParam=function cleanGETParam(str){return str.split(/\?(.*)?$/)[0]};return void 0===hash&&(hash="#"),onlyURL=isPushStateAvailable()&&!useHash?cleanGETParam(url).split(hash)[0]:(split=url.split(hash)).length>1?cleanGETParam(split[1]):cleanGETParam(split[0])}function manageHooks(handler,hooks,params){if(hooks&&"object"===(void 0===hooks?"undefined":_typeof(hooks))){if(hooks.before)return void hooks.before((function(){var shouldRoute=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];shouldRoute&&(handler(),hooks.after&&hooks.after(params))}),params);if(hooks.after)return handler(),void(hooks.after&&hooks.after(params))}handler()}function isHashedRoot(url,useHash,hash){if(isPushStateAvailable()&&!useHash)return!1;if(!url.match(hash))return!1;var split=url.split(hash);return split.length<2||""===split[1]}return Navigo.prototype={helpers:{match:match,root:root,clean:clean,getOnlyURL:getOnlyURL},navigate:function navigate(path,absolute,force=!1){var to;return path=path||"",this._usePushState?((to=(to=(absolute?"":this._getRoot()+"/")+path.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"))!==document.location.href&&history[this._historyAPIUpdateMethod]({},"",to),this.resolve(null,force)):"undefined"!=typeof window&&(path=path.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+path),this},on:function on(){for(var _this=this,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if("function"==typeof args[0])this._defaultHandler={handler:args[0],hooks:args[1]};else if(args.length>=2)if("/"===args[0]){var func=args[1];"object"===_typeof(args[1])&&(func=args[1].uses),this._defaultHandler={handler:func,hooks:args[2]}}else this._add(args[0],args[1],args[2]);else if("object"===_typeof(args[0])){var orderedRoutes=Object.keys(args[0]).sort(compareUrlDepth);orderedRoutes.forEach((function(route){_this.on(route,args[0][route])}))}return this},off:function off(handler){return null!==this._defaultHandler&&handler===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&handler===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce((function(result,r){return r.handler!==handler&&result.push(r),result}),[]),this},notFound:function notFound(handler,hooks){return this._notFoundHandler={handler:handler,hooks:hooks},this},resolve:function resolve(current,force=!1){var _this2=this,handler,m,url=(current||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(url=url.replace(new RegExp("^/"+this._hash),"/"));var GETParameters=extractGETParameters(current||this._cLoc()),onlyURL=getOnlyURL(url,this._useHash,this._hash);return!this._paused&&((!this._lastRouteResolved||onlyURL!==this._lastRouteResolved.url||GETParameters!==this._lastRouteResolved.query||(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!0===force))&&((m=match(onlyURL,this._routes))?(this._callLeave(),this._lastRouteResolved={url:onlyURL,query:GETParameters,hooks:m.route.hooks,params:m.params,name:m.route.name},handler=m.route.handler,manageHooks((function(){manageHooks((function(){m.route.route instanceof RegExp?handler.apply(void 0,m.match.slice(1,m.match.length)):handler(m.params,GETParameters)}),m.route.hooks,m.params,_this2._genericHooks)}),this._genericHooks,m.params),m):this._defaultHandler&&(""===onlyURL||"/"===onlyURL||onlyURL===this._hash||isHashedRoot(onlyURL,this._useHash,this._hash))?(manageHooks((function(){manageHooks((function(){_this2._callLeave(),_this2._lastRouteResolved={url:onlyURL,query:GETParameters,hooks:_this2._defaultHandler.hooks},_this2._defaultHandler.handler(GETParameters)}),_this2._defaultHandler.hooks)}),this._genericHooks),!0):(this._notFoundHandler&&manageHooks((function(){manageHooks((function(){_this2._callLeave(),_this2._lastRouteResolved={url:onlyURL,query:GETParameters,hooks:_this2._notFoundHandler.hooks},_this2._notFoundHandler.handler(GETParameters)}),_this2._notFoundHandler.hooks)}),this._genericHooks),!1)))},destroy:function destroy(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function updatePageLinks(){var self=this;"undefined"!=typeof document&&this._findLinks().forEach((function(link){link.hasListenerAttached||(link.addEventListener("click",(function(e){if((e.ctrlKey||e.metaKey)&&"a"==e.target.tagName.toLowerCase())return!1;var location=self.getLinkPath(link);self._destroyed||(e.preventDefault(),self.navigate(location.replace(/\/+$/,"").replace(/^\/+/,"/")))})),link.hasListenerAttached=!0)}))},generate:function generate(name){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},result=this._routes.reduce((function(result,route){var key;if(route.name===name)for(key in result=route.route,data)result=result.toString().replace(":"+key,data[key]);return result}),"");return this._useHash?this._hash+result:result},link:function link(path){return this._getRoot()+path},pause:function pause(){var status=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=status,this._historyAPIUpdateMethod=status?"replaceState":"pushState"},resume:function resume(){this.pause(!1)},historyAPIUpdateMethod:function historyAPIUpdateMethod(value){return void 0===value?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=value,value)},disableIfAPINotAvailable:function disableIfAPINotAvailable(){isPushStateAvailable()||this.destroy()},lastRouteResolved:function lastRouteResolved(){return this._lastRouteResolved},getLinkPath:function getLinkPath(link){return link.getAttribute("href")},hooks:function hooks(_hooks){this._genericHooks=_hooks},_add:function _add(route){var handler=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,hooks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof route&&(route=encodeURI(route)),this._routes.push("object"===(void 0===handler?"undefined":_typeof(handler))?{route:route,handler:handler.uses,name:handler.as,hooks:hooks||handler.hooks}:{route:route,handler:handler,hooks:hooks}),this._add},_getRoot:function _getRoot(){return null!==this.root?this.root:(this.root=root(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function _listen(){var _this3=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(isHashChangeAPIAvailable())window.addEventListener("hashchange",this._onLocationChange);else{var cached=this._cLoc(),current=void 0,_check=void 0;(_check=function check(){current=_this3._cLoc(),cached!==current&&(cached=current,_this3.resolve()),_this3._listeningInterval=setTimeout(_check,200)})()}},_cLoc:function _cLoc(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:clean(window.location.href):""},_findLinks:function _findLinks(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function _onLocationChange(){this.resolve()},_callLeave:function _callLeave(){var lastRouteResolved=this._lastRouteResolved;lastRouteResolved&&lastRouteResolved.hooks&&lastRouteResolved.hooks.leave&&lastRouteResolved.hooks.leave(lastRouteResolved.params)}},Navigo.PARAMETER_REGEXP=/([:*])(\w+)/g,Navigo.WILDCARD_REGEXP=/\*/g,Navigo.REPLACE_VARIABLE_REGEXP="([^/]+)",Navigo.REPLACE_WILDCARD="(?:.*)",Navigo.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",Navigo.MATCH_REGEXP_FLAGS="",Navigo}));
//# sourceMappingURL=simply.min.js.map