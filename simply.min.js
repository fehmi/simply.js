simply={components:{},parseTemplate:function(parsingArgs){var{template:template,data:data,style:style,state:state,parent:parent,methods:methods,props:props,component:component,dom:dom,methods:methods,lifecycle:lifecycle,watch:watch}=parsingArgs;let simplyTemplate=/\<template([^<>]*)simply([^<>]*)>$/,ifStart=/\<if(\s)cond=\"(.*)\"(\>$)/,elsifStart=/\<elsif(\s)cond=\"(.*)\"(\>$)/,ifEnd=/\<\/if\>$/,elsifEnd=/\<\/elsif\>$/,elseStart=/\<else\>$/,elseEnd=/\<\/else\>$/,eachEnd=/\<\/each\>$/;const MAX_LENGTH=150;let eachStart=/\<each\s+of\=\"(?<of>[^"]*)\"\s+as\=\"(?<as>[^"]*)\"(\s+key\=\"(?<key>[^"]*)\")?(\s+index\=\"(?<index>[^"]*)\")?\>$/gm,inTagVar=/:="(?<l>[^"]*)"$/,ifCount=0,eachCount=0,m,bucket="";var processedLetters="",capturedLogics=[],staticLetters="",flag=!1,curlyCount=0,curlyFlag=!1,varBucket="",scriptCount=0,styleCount=0,templateCount=0,simplyTemplateCount=0,ignoreFlag=!1;template.includes("${")&&(template=template.replace(/\$\{/g,"minyeli{"));for(var i=0;i<template.length;i++){processedLetters+=template[i],bucket+=template[i];let recentBucket=bucket.slice(-MAX_LENGTH),recentBucket2=bucket.slice(-8);if(bucket.endsWith("<script")?scriptCount+=1:bucket.endsWith("<style")?styleCount+=1:bucket.endsWith("<template simply>")?simplyTemplateCount+=1:bucket.endsWith("<\/script>")?scriptCount-=1:bucket.endsWith("</style>")?styleCount-=1:bucket.endsWith("</template>")&&(simplyTemplateCount-=1),0==simplyTemplateCount&&0==styleCount&&0==scriptCount){if((bucket.endsWith('="function')||bucket.endsWith('="(function'))&&(ignoreFlag=!0),"\\"!==template[i-1]&&"{"==template[i]&&(curlyCount+=1),curlyCount>0&&!1===ignoreFlag&&(varBucket+=template[i]),"\\"!==template[i-1]&&"}"==template[i]&&(curlyCount-=1,0==curlyCount&&!0===ignoreFlag&&(ignoreFlag=!1)),0==curlyCount&&""!==varBucket){varBucket=varBucket.trim();let variable=varBucket.trim().substring(1,varBucket.length-1);function isObjectString(str){return/^\{(?:[^{}]|(?:\{(?:[^{}]|(?:\{[^{}]*\}))+\}))*\}$/.exec(str)}isObjectString(variable)&&(variable='"'+varBucket.trim()+'"'),logic="ht+="+variable+";",flag=!0}else null!==(m=inTagVar.exec(recentBucket))&&(logic="ht+="+m.groups.l+";",flag=!0);if(recentBucket.endsWith(">"))if(recentBucket.includes("<if ")&&null!==(m=ifStart.exec(recentBucket)))logic=unescape("if ("+m[2]+") {"),ifCount+=1,flag=!0;else if(recentBucket.includes("<elsif ")&&null!==(m=elsifStart.exec(recentBucket)))logic=unescape(m[2]),logic="else if ("+logic+") {",flag=!0;else if(null!==(m=elseStart.exec(recentBucket2)))logic="else {",flag=!0;else if(null!==(m=ifEnd.exec(recentBucket2)))ifCount-=1,logic="}",flag=!0;else if(null!==(m=elsifEnd.exec(recentBucket2)))logic="}",flag=!0;else if(null!==(m=elseEnd.exec(recentBucket2)))logic="}",flag=!0;else if(recentBucket.includes("<each")){m=recentBucket.match(/\<each[^\>]*\>$/),m.groups=parseEachTag(m[0]),eachCount+=1;try{subject=eval(m.groups.of)}catch(error){subject=m.groups.of}var iiii="s"+Math.random().toString(16).slice(2);Array.isArray(subject)?(key=m.groups.key?"let "+m.groups.key+" = "+iiii+";":"",index=m.groups.index?"let "+m.groups.index+" = "+iiii+";":"",logic="for ("+iiii+" = 0; "+iiii+" < "+m.groups.of+".length; "+iiii+"++) { \t\t\t\t\t\t\t\tif (!"+m.groups.of+"["+iiii+"]) { continue; }\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+key+" \t\t\t\t\t\t\t\t\t\t\t\t\t\t"+index+" \t\t\t\t\t\t\t\t\t\t\t\t\t\tlet "+m.groups.as+"="+m.groups.of+"["+iiii+"];"):(key=m.groups.index?"let "+m.groups.index+" = ":"",logic="\t\t\t\t\t\t\t\t\t\t\t\tfor (var ii in "+m.groups.of+") { \t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof "+m.groups.of+"[ii] == 'function') { continue; }\t\t\t\t\t\t\t\t\t\t\t\t\t"+key+"Object.keys("+m.groups.of+").indexOf(ii); \t\t\t\t\t\t\t\t\t\t\t\t\tlet "+m.groups.key+"= ii; \t\t\t\t\t\t\t\t\t\t\t\t\tlet "+m.groups.as+"="+m.groups.of+"[ii];"),flag=!0,lastM=m.groups.of,lasti=iiii}else null!==(m=eachEnd.exec(recentBucket2))&&(eachCount-=1,logic="};",flag=!0)}function parseEachTag(eachTag){let ofMatch=eachTag.match(/of="([^"]+)"/),asMatch=eachTag.match(/as="([^"]+)"/),keyMatch=eachTag.match(/key="([^"]+)"/),indexMatch=eachTag.match(/index="([^"]+)"/),of,as,result={of:ofMatch?ofMatch[1]:void 0,as:asMatch?asMatch[1]:void 0};return keyMatch&&(result.key=keyMatch[1]),indexMatch&&(result.index=indexMatch[1]),result}if(!0===flag){try{capturedLogics.push(m[0])}catch(error){capturedLogics.push(varBucket),varBucket=""}let logicLine=capturedLogics[capturedLogics.length-1];staticText=processedLetters.substring(0,processedLetters.lastIndexOf(logicLine))+"";let replaceThis=staticText+logicLine;var withThis="ht+=`"+staticText.replace(/\n/g,"")+"`;"+logic;if(""==staticText.trim())var withThis=logic;else var withThis="ht+=`"+staticText.replace(/\n/g,"")+"`;"+logic;bucket=bucket.replace(replaceThis,withThis),flag=!1,processedLetters=""}}""!==processedLetters.trimEnd()&&(processedLettersRegex=processedLetters.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),bucket=bucket.replace(new RegExp(processedLettersRegex+"$"),"ht+=`"+processedLetters.trimEnd()+"`;"));var ht="";return bucket=bucket.replace(/minyeli/g,"$"),eval(bucket),ht},parseStyle:function(parsingArgs){var{template:template,style:style,data:data,state:state,parent:parent,methods:methods,props:props,component:component,dom:dom,methods:methods,lifecycle:lifecycle,watch:watch}=parsingArgs;let variable=/(\"|\')(\{)([^{}\n]*)\}(\"|\')/;for(var vars={};null!==(m=variable.exec(style));){m.index===variable.lastIndex&&variable.lastIndex++;var variableName="--"+m[3].replace(/\./g,"-"),variableValue=eval(m[3]);vars[variableName]=variableValue,style=style.split(m[0]).join("var("+variableName+")")}return{style:style,vars:vars}},getBetweenTag:function(obj){let{string:string,tag:tag,prop:prop}=obj,open,anyOpen=new RegExp("<"+tag+"([^<>]*)>$","i"),close=new RegExp("</"+tag+">$","i"),captureFlag=!1,bucket,capture="",count=0;open=prop?new RegExp("<"+tag+"([^<>]*)"+prop+"([^<>]*)>$","i"):anyOpen;for(var i=0;i<string.length;i++)if(bucket+=string[i],open.test(bucket))captureFlag=!0,count+=1;else if(anyOpen.test(bucket))count+=1;else if(captureFlag&&close.test(bucket)){if(count-=1,capture+=string[i],0==count){let simplyTemplate=/^\<template([^<>]*)simply([^<>]*)>/;return capture=capture.trim(),capture=capture.replace(simplyTemplate,""),capture=capture.replace(close,""),capture=capture.trim(),capture}}else captureFlag&&(capture+=string[i])},getObject:function(string,name){var open=/uno(\s+)?\=(\s+)?{$/,bucket="",capture="",captureFlag=!1;count=0;for(var i=0;i<string.length;i++)if(bucket+=string[i],open.test(bucket)?(captureFlag=!0,count+=1):captureFlag&&"{"==string[i]?count+=1:captureFlag&&"}"==string[i]&&(count-=1),captureFlag&&(capture+=string[i],0==count))return capture},loadJS:function(src,cb,waitBeforeCb){
/*! loadJS: load a JS file asynchronously. [c]2014 @scottjehl, Filament Group, Inc. (Based on http://goo.gl/REQGQ by Paul Irish). Licensed MIT */
if(document.querySelectorAll('[src="'+src+'"]').length>0)if(window[waitBeforeCb])cb();else var tryAmount=10,tryCount=0,a=setInterval(()=>{!window[waitBeforeCb]&&tryCount<10?tryCount+=1:(cb(),clearInterval(a))},50);else{var tmp,ref=window.document.getElementsByTagName("script")[0],script=window.document.createElement("script");script.src=src,script.async=!0,ref.parentNode.insertBefore(script,ref),cb&&"function"==typeof cb&&(script.onload=cb)}return script},get:function(path,name){if(simply.gets=simply.gets?simply.gets:[],Array.isArray(path))for(let i=0;i<path.length;i++)simply.gets.push(path[i]),addUnoAndContinue(path[i]);else simply.gets.push(path),addUnoAndContinue(path);function addUnoAndContinue(p){simply.loadComponent(p,name,(function(component){simply.getSettings(component,(function(settings){simply.registerComponent(settings)}))}))}},jsdoc:function(str){return str.replace(/(\n[ \t]*\/\/\/[^\n]*)+/g,(function($){var replacement;return"\n/**"+$.replace(/^[ \t]*\/\/\//gm,"").replace(/(\n$|$)/,"*/$1")}))},loadComponent:function(path,name,callback){if(void 0===name)var ext=path.split(".").pop(),name=path.split("\\").pop().split("/").pop().split(".").slice(0,-1).join(".");else if(name.indexOf(".")>-1)var ext=name.split(".").pop(),name=name.replace("."+ext,"");else var ext="html";if("js"==ext);else if("html"==ext&&void 0===simply.components[name]){simply.components[name]={};var request=new XMLHttpRequest;request.open("GET",path,!0),request.onload=function(){if(this.status>=200&&this.status<400){let docStr=this.response,parsed=simply.splitComponent(this.response);simply.components[name]=parsed,callback({name:name,template:parsed.template,styles:parsed.styles,script:parsed.script,docStr:docStr})}},request.onerror=function(){},request.send()}},request:function(url,callback,async=!1){var request=new XMLHttpRequest;request.open("GET",url,async),request.onload=function(){if(this.status>=200&&this.status<400){try{response=JSON.parse(this.responseText)}catch(err){response=this.responseText}callback&&callback(response)}},request.send()},splitComponent:function(string){var txt=document.createElement("textarea"),parser,dom=(new DOMParser).parseFromString(string,"text/html"),template,styles={};dom.querySelector("style")&&dom.querySelectorAll("style").forEach(styleEl=>{txt.innerHTML=styleEl.innerHTML,style=txt.value,string=string.replace(txt.value,""),null!==styleEl.getAttribute("global")?styles.global=style:styles.local=style,styleEl.remove()});var script="";if(dom.querySelector("script")){var script=dom.querySelector("script");txt.innerHTML=script.innerHTML,script=txt.value,dom.querySelector("script").remove(),string=string.replace(txt.value,"")}return{template:template=string.replace("<style></style>","").replace("<style global></style>","").replace("<script><\/script>",""),styles:styles,script:script}},processPropTemplate:function(string){var propsFromTemplate=string;return propsFromTemplate=(propsFromTemplate=propsFromTemplate.replace(/[^\\]'/g,'"').replace(/\\'/g,"'")).replace(/(?:\r\n|\r|\n)/g," "),propsFromTemplate=Function("return "+propsFromTemplate)(),propsFromTemplate=simply.customStringify(propsFromTemplate),propsFromTemplate=JSON.parse(propsFromTemplate)},parseProp:function(contentString){var type,value,parsed,content;content=contentString.replace(/[^\\]'/g,'"'),content=content.replace(/\\\'/g,"'");try{parsed=JSON.parse(content),type=typeof parsed,value=parsed,Array.isArray(parsed)&&(type="array")}catch(e){let func=content;func=eval(func),"function"==typeof func&&(type="function",value=eval("("+func+")"))}finally{return null==type&&(type="string",value=contentString),{type:type,value:value,str:content}}},prepareAttr:function(value){let type=typeof value;return Array.isArray(value)||"object"==type||"number"==type||"boolean"==type?simply.customStringify(value).replace(/[^\\]'/g,"\\'").replace(/[^\\]"/g,"'").replace(/\"/g,"'"):"function"==type?value.toString().replace(/[^\\]'/g,'"').replace(/\\'/g,"'"):value},customStringify:function(v){const cache=new Set;return JSON.stringify(v,(function(key,value){if("__c_"!==key&&"__o_"!==key&&"__p_"!==key&&"__r_"!==key){if("object"==typeof value&&null!==value){if(cache.has(value))try{return JSON.parse(JSON.stringify(value))}catch(err){return}cache.add(value)}else if("function"==typeof value)return value.toString().replace(/[^\\]'/g,'"').replace(/\\'/g,"'");return value}}))},getSettings:function({name:name,template:template,styles:styles,script:script,docStr:docStr},callback){function getListeners(settings){return settings}callback({name:name,template:template,styles:styles,script:script,docStr:docStr})},runGetsReturnClass:function(scr,compName){var gets,classRegex=/class(\s+simply)?(\s+)?{/,classLine=classRegex.exec(scr),m;if(classLine){var scriptParts=scr.split(classLine[0]);gets=scriptParts[0];var clss=classLine[0]+scriptParts[1]}else gets=scr;for(var importRegex=/\s*get\((\s+)?(\[)?([\s\S]*?)?(\,)?(\s+)?\]?(\s+)?\)(\;)?/gm;null!==(m=importRegex.exec(gets));)eval(m[0]);try{if(0==clss.trim().indexOf(classLine[0])){if(clss=clss=clss.replace(classRegex,"class {"),/uno(\s+)?\=(\s+)?{/.test(clss)){var uno=simply.getObject(clss,"uno");clss=clss.replace(uno,"{}"),window.unoConfig=uno}return"//"+compName+"\n\nnew "+clss.trim()+"//@ sourceURL="+compName+".html"}}catch(error){return!1}},registerComponent:function({template:template,styles:styles,name:name,script:script,docStr:docStr,noFile:noFile}){if(!customElements.get(name)){class simplyComponent extends HTMLElement{constructor(){super();let sfcClass=eval(simply.runGetsReturnClass(script,name));if(this.sfcClass=sfcClass||{},this.querySelector("template[simply]")){let t=this.querySelector("template[simply]").innerHTML.replace(/\s{2,}/g,"\n\n");this.inlineComp=simply.splitComponent(t);let inlineClassAsText=simply.runGetsReturnClass(this.inlineComp.script,name);var inlineCompClass=eval(inlineClassAsText);for(var key in inlineCompClass)if(key.match("data|state|methods|lifecycle|props"))for(var childKey in inlineCompClass[key]){this.sfcClass[key]||(this.sfcClass[key]={});let value=inlineCompClass[key][childKey];this.sfcClass[key][childKey]=value}}void 0!==this.sfcClass.lifecycle&&void 0!==this.sfcClass.lifecycle.beforeConstruct&&this.sfcClass.lifecycle.beforeConstruct();var open=!1;null!==this.getAttribute("open")&&(open=!0);var uid="id"+Math.random().toString(16).slice(2),component=this;if(open)var dom=this,parent=simply.findShadowRootOrCustomElement(this);else{var dom=this.attachShadow({mode:"open"}),parent=this.getRootNode().host;parent||(parent=simply.findShadowRootOrCustomElement(this))}component.elementId=simply.getElementUniqueId(dom);var data=this.sfcClass.data?this.sfcClass.data:{},props=this.sfcClass.props?this.sfcClass.props:{},methods=this.sfcClass.methods,watch=this.sfcClass.watch,lifecycle=this.sfcClass.lifecycle,state,cb={};if(this.component=component,this.dom=dom,this.lifecycle=lifecycle,this.propsToObserve=props,this.dataToObserve=data,this.data,this.hasAttribute("cache")&&"false"!==this.getAttribute("cache")){this.cache={};var cache=this.cache;try{var cachedData=simply.cache[simply.lastPath][component.elementId].data}catch(e){}if(cachedData){this.cache.data=simply.cache[simply.lastPath][component.elementId].data,console.log("cache hit for data!");for(const key in cachedData)Object.hasOwnProperty.call(cachedData,key)&&(component.dataToObserve[key]=cachedData[key])}}this.methods=methods,this.watch=watch,this.parent=parent,this.uid=uid,this.open=open,this.cb=cb;var self=this,geval=eval;for(var key in sfcClass)if(!key.match("data|state|methods|lifecycle|props|dom|component|watch|parent")){var val=sfcClass[key];"object"==typeof val?val=simply.customStringify(val):"function"==typeof val?val=val.toString():"string"==typeof val&&(val="'"+val+"'"),geval("var "+key+"="+val+";")}for(var i=0;i<this.attributes.length;i++){var attrib=this.attributes[i];"cb"!==attrib.name&&(self.propsToObserve[attrib.name]=simply.parseProp(attrib.value).value)}if(this.hasAttribute("cache")&&"false"!==this.getAttribute("cache")){try{var cachedProps=simply.cache[simply.lastPath][component.elementId].props}catch(e){}if(cachedProps){this.cache.props=simply.cache[simply.lastPath][component.elementId].props,console.log("cache hit for props!");for(const key in cachedProps)Object.hasOwnProperty.call(cachedProps,key)&&(component.propsToObserve[key]=cachedProps[key])}}if(this.sfcClass.uno&&(this.uno=this.sfcClass.uno),styles.global&&(this.globalStyle=styles.global),parent){if(template.indexOf("state.")>-1||script.indexOf("state.")>-1){let current=parent;for(;current;){if(current.state){this.stateToObserve=current.state,this.cb.state=parent.cb.state;break}current=current.parent}}void 0!==parent.globalStyle&&(this.globalStyle=parent.globalStyle)}if(void 0!==this.sfcClass.state){this.state||(this.stateToObserve={});var newStates=this.sfcClass.state;for(let key in newStates)this.stateToObserve[key]=newStates[key]}if(state=component.state,parent=component.parent,cb=component.cb,Object.defineProperty(this,"state",{get:function(){return state},set:function(v){state=v}}),Object.defineProperty(this,"parent",{get:function(){return parent},set:function(v){void 0!==(parent=v).globalStyle&&(component.globalStyle=parent.globalStyle)}}),this.setData=function(newValue){data=newValue},this.setCbData=function(newValue){cb.data=newValue},this.setState=function(newValue){state=newValue},this.setCbState=function(newValue){cb.state=newValue},this.setProps=function(newValue){props=newValue},this.setCbProps=function(newValue){cb.props=newValue},this.react=function(property,newValue,previousValue,prop=!1){if(self.data){if(void 0!==self.lifecycle)if(prop){if(void 0!==self.lifecycle.whenPropChange&&!1===self.lifecycle.whenPropChange(property,newValue,previousValue))return!1}else if(void 0!==self.lifecycle.whenDataChange&&!1===self.lifecycle.whenDataChange(property,newValue,previousValue))return!1;self.render(),void 0!==self.watch&&self.watch(property,newValue)}},this.dataToObserve&&(this.data=ObservableSlim.create(this.dataToObserve,.1,(function(changes){for(const[key,cb]of Object.entries(self.cb.data))cb&&(cb(changes[0].property),changes.forEach((function(change,key){})))})),(template.indexOf("data.")>-1||script.indexOf("data.")>-1)&&(this.cb.data={},this.cb.data[this.uid]=function(property,newValue,previousValue){self.react(property,newValue,previousValue)},data=this.data,this.setCbData(this.cb.data))),this.propsToObserve&&(this.props=ObservableSlim.create(this.propsToObserve,!1,(function(changes){if(self.cb.props)for(const[key,cb]of Object.entries(self.cb.props))cb&&changes.forEach((function(change,key){cb(change.property,change.newValue,change.previousValue)}))})),(template.indexOf("props.")>-1||script.indexOf("props.")>-1)&&(this.cb.props={},this.cb.props[this.uid]=function(property,newValue,previousValue){self.react(property,newValue,previousValue)})),this.stateToObserve)if(this.stateToObserve.__isProxy){if(this.state=this.stateToObserve,template.indexOf("state.")>-1||script.indexOf("state.")>-1){var p=findElementWithCB(this.parent);p.cb.state[this.uid]=function(property,newValue,previousValue){self.react(property,newValue,previousValue)}}}else this.state=ObservableSlim.create(this.stateToObserve,!1,(function(changes){if(self.cb.state)for(const[key,cb]of Object.entries(self.cb.state))cb&&changes.forEach((function(change,key){cb(change.property,change.newValue,change.previousValue)}))})),this.cb.state={},this.cb.state[this.uid]=function(property,newValue,previousValue){self.react(property,newValue,previousValue)};function findElementWithCB(element){let current=element;for(;current;){if(current.cb&&current.cb.state)return current;current=current.parentNode?current.parentNode:current.host?current.host:null}return null}void 0!==this.lifecycle&&void 0!==this.lifecycle.afterConstruct&&this.lifecycle.afterConstruct()}observeAttrChange(el,callback){var self=this,observer=new MutationObserver((function(mutations){mutations.forEach((function(mutation){if("attributes"===mutation.type){var newVal=mutation.target.getAttribute(mutation.attributeName);callback(mutation.attributeName,newVal)}}))}));return observer.observe(el,{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeOldValue:!0,characterDataOldValue:!1}),observer}onBeforeEnter(location,commands,router){}connectedCallback(){this.observeAttrChange(this,(function(name,newValue){if(newValue!==simply.prepareAttr(self.props[name])){try{newValue=simply.parseProp(newValue).value}catch(e){newValue=newValue}newValue?self.props[name]=newValue:delete self.props[name],void 0!==self.lifecycle&&void 0!==self.lifecycle.whenPropChange&&self.lifecycle.whenPropChange(name,self.props[name],newValue)}}));var self=this;self.templateName=name,this.render()}render(){let m,regex=/\s+on[a-z]+(\s+)?\=(\s+)?(\"|\')(?<match>[^"\n]*)(\"|\')/gm;for(;null!==(m=regex.exec(template));){if(m.index===regex.lastIndex&&regex.lastIndex++,this.open)var match="simply.findShadowRootOrCustomElement(this)";else var match="this.getRootNode().host";if(-1==m.groups.match.indexOf(match)){var builtinVars=["state.","parent.","methods.","lifecycle.","data.","props.","component.","dom."],newValue=m[0];builtinVars.forEach(v=>{newValue=(newValue=newValue.replaceAll(v,match+"."+v)).replaceAll("."+match,"")}),template=template.replaceAll(m[0],newValue)}}if(this.inlineComp){let inlineTemp=this.querySelector("template[simply]"),htmlMethod=inlineTemp.getAttribute("html"),styleMethod=inlineTemp.getAttribute("style");if("replace"==htmlMethod||noFile)template=this.inlineComp.template;else if("prepend"==htmlMethod)var mergedTemp=template.replace("<html>","<html>"+this.inlineComp.template);else{template=template.trim();var mergedTemp=template.replace(/<\/html>$/s,this.inlineComp.template.trim()+"</html>")}"replace"==styleMethod||noFile?styles.local=this.inlineComp.styles.local:"prepend"==styleMethod?styles.local=this.inlineComp.styles.local+styles.local:styles.local+=this.inlineComp.styles.local}var tmpl=mergedTemp||template;let parsingArgs={template:tmpl,style:styles.local,data:this.data,state:this.state,parent:this.parent,methods:this.methods,props:this.props,component:this.component,dom:this.dom,methods:this.methods,lifecycle:this.lifecycle,watch:this.watch};if(this.globalStyle)var parsedGlobalStyle=simply.parseStyle({template:template,style:this.globalStyle,data:this.data,state:this.state,parent:this.parent,methods:this.methods,props:this.props,component:this.component,dom:this.dom,methods:this.methods,lifecycle:this.lifecycle,watch:this.watch});if(this.rendered){void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeRerender&&this.lifecycle.beforeRerender();const t0=performance.now();let parsedTemplate=simply.parseTemplate(parsingArgs);const t1=performance.now();parsedTemplate=parsedTemplate.replace("<html>","").replace("</html>","");var parsedStyle=simply.parseStyle(parsingArgs),newDom=parsedTemplate+"<style uno></style><style global>"+(parsedGlobalStyle?parsedGlobalStyle.style:"")+"</style><style simply>:host([hoak]) {display: none;} "+parsedStyle.style+"</style><style simply-vars></style>";if(this.open){var newDomAsString="<"+name+" open>"+newDom+"</"+name+">";morphIt(this.dom)}else{var newDomAsString="<"+name+">"+newDom+"</"+name+">";morphIt(this.dom)}function morphIt(dom){simply.morphdom(dom,newDomAsString,{childrenOnly:!0,onBeforeElUpdated:function(fromEl,toEl){return!fromEl.isSameNode(toEl)&&(!fromEl.isEqualNode(toEl)&&1!=fromEl.hasAttribute("router-active"))},onBeforeNodeDiscarded:function(node){},onBeforeElChildrenUpdated:function(fromEl,toEl){if(customElements.get(fromEl.tagName.toLowerCase()))return!1;if(fromEl.isSameNode(toEl))return!1;if(fromEl.isEqualNode(toEl))return!1;if("CHILD-COMPONENT"==fromEl.tagName);else{if("STYLE"==fromEl.tagName)return!1;if(!0===toEl.hasAttribute("passive"))return!1;if(!0===fromEl.hasAttribute("router-active"))return console.log("heeeeee",toEl),!1;if("INPUT"===toEl.tagName){if("RADIO"==toEl.type||"CHECKBOX"==toEl.type)return!1;toEl.value=fromEl.value}else{if("ROUTER"===toEl.tagName)return!1;if("ROUTE"===toEl.tagName)return!1;if("LABEL"==toEl.tagName){if(fromEl.isEqualNode(toEl))return!1}else"OPTION"===toEl.tagName&&(toEl.selected=fromEl.selected)}}}})}if(this.globalStyle)var parsedGlobalStyle=simply.parseStyle({template:template,style:this.globalStyle,data:this.data,state:this.state,parent:this.parent,methods:this.methods,props:this.props,component:this.component,dom:this.dom,methods:this.methods,lifecycle:this.lifecycle,watch:this.watch});if(parsedGlobalStyle)for(var key in parsedGlobalStyle.vars)parsedGlobalStyle.vars.hasOwnProperty(key)&&this.sheet.cssRules[0].style.setProperty(key,parsedGlobalStyle.vars[key]);for(var key in parsedStyle.vars)parsedStyle.vars.hasOwnProperty(key)&&this.sheet.cssRules[0].style.setProperty(key,parsedStyle.vars[key]);void 0!==this.lifecycle&&void 0!==this.lifecycle.afterRerender&&this.lifecycle.afterRerender()}else{this.rendered=!0;var self=this;let parsedTemplate=simply.parseTemplate(parsingArgs);var parsedStyle=simply.parseStyle(parsingArgs);if(parsedTemplate=parsedTemplate+"<style uno></style><style global>"+(parsedGlobalStyle?parsedGlobalStyle.style:"")+"</style><style simply>:host([hoak]) {display: none;} "+parsedStyle.style+"</style><style simply-vars></style>",parsedTemplate.indexOf("<a-route")>-1&&!customElements.get("a-route")&&(console.log("a-route elementi var ve register edilmemiÅŸ",customElements.get("a-route")),simply.initWcRouter()),void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeRender&&void 0!==this.lifecycle.beforeRender(parsedTemplate)&&(parsedTemplate=this.lifecycle.beforeRender(parsedTemplate)),void 0!==this.lifecycle&&void 0!==this.lifecycle.beforeFirstRender&&void 0!==this.lifecycle.beforeFirstRender(parsedTemplate)&&(parsedTemplate=this.lifecycle.beforeFirstRender(parsedTemplate)),this.dom.innerHTML=parsedTemplate,simply.setupInlineComps(this.dom,docStr,template),window.unoConfig){var classObserver,handleUnoClasses=function(dom){try{classObserver.disconnect()}catch(error){}window.unoConfig.generate||(window.unoConfig=createGenerator(eval("window.unoConfig="+window.unoConfig))),window.unoConfig.generate(dom.innerHTML).then((function(result){var twReset='a,hr{color:inherit}progress,sub,sup{vertical-align:baseline}blockquote,body,dd,dl,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,menu,ol,p,pre,ul{margin:0}dialog,fieldset,legend,menu,ol,ul{padding:0}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:var(--un-default-border-color,#e5e7eb)}::after,::before{--un-content:\'\'}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{line-height:inherit}hr{height:0;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}menu,ol,ul{list-style:none}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}';self.dom.querySelector("style[uno]").innerHTML=twReset+result.css,(classObserver=new MutationObserver((function(mutations){handleUnoClasses(self.dom)}))).observe(dom,{attributes:!0,attributeFilter:["class"],childList:!0,subtree:!0,attributeOldValue:!0})}))};handleUnoClasses(self.dom)}try{this.open?this.sheet=this.querySelector("style[simply-vars]").sheet:this.sheet=this.dom.getRootNode().querySelector("style[simply-vars]").sheet;var vars=":host {";if(parsedGlobalStyle)for(var key in parsedGlobalStyle.vars)parsedGlobalStyle.vars.hasOwnProperty(key)&&(vars+=key+":"+parsedGlobalStyle.vars[key]+";");for(var key in parsedStyle.vars)parsedStyle.vars.hasOwnProperty(key)&&(vars+=key+":"+parsedStyle.vars[key]+";");this.sheet.insertRule(vars+"}",0)}catch(error){}void 0!==this.lifecycle&&void 0!==this.lifecycle.afterFirstRender&&this.lifecycle.afterFirstRender(),this.renderingDone=!0}if("cache"in this.props)try{let tagName=this.component.tagName.toLowerCase(),tagNameOfRoute=simply.page.getRouteByPath(simply.lastPath).value.settings.component;tagName==tagNameOfRoute&&(simply.cache=simply.cache?simply.cache:{},simply.cache[simply.lastPath]=simply.cache[simply.lastPath]?simply.cache[simply.lastPath]:{},simply.cache[simply.lastPath][this.elementId]={data:this.data,props:this.props},this.cache={data:this.data,props:this.props})}catch(e){}void 0!==this.lifecycle&&void 0!==this.lifecycle.afterRender&&this.lifecycle.afterRender()}disconnectedCallback(){this.cb.state&&(this.cb.state[this.uid]=null),this.parent&&this.parent.cb&&(this.parent.cb.data,this.parent.cb.state&&(this.parent.cb.state[this.uid]=null),this.parent.cb.props),void 0!==this.lifecycle&&void 0!==this.lifecycle.disconnected&&this.lifecycle.disconnected()}}customElements.define(name,simplyComponent)}},setWithoutRender:function(target,props){Object.defineProperties(target,Object.keys(props).reduce((descriptors,key)=>(descriptors[key]={value:props[key],writable:!0,enumerable:!0,configurable:!0},descriptors),{}))},wcRouter:function(){!function(){"use strict";class NamedRouting{static async addNamedItem(item){const name=item.getName();if(name){if(NamedRouting.registry[name])throw Error(`Error adding named item ${name}, item with that name already registered`);NamedRouting.registry[name]=item;const assignment=NamedRouting.getAssignment(name);assignment&&item.canLeave(assignment.url)&&await item.processNamedUrl(assignment.url)}}static removeNamedItem(name){NamedRouting.registry[name]&&delete NamedRouting.registry[name]}static getNamedItem(name){return NamedRouting.registry[name]}static getAssignment(name){return NamedRouting.assignments[name]}static async addAssignment(name,url){const lastAssignment=NamedRouting.assignments[name];NamedRouting.assignments[name]={name:name,url:url};const namedItem=NamedRouting.getNamedItem(name);if(namedItem){if(!1===namedItem.canLeave(url))return NamedRouting.assignments[name]=lastAssignment,!1;await namedItem.processNamedUrl(url)}return!0}static removeAssignment(name){return!!NamedRouting.assignments[name]&&(delete NamedRouting.assignments[name],!0)}static generateNamedItemsUrl(){return Object.values(NamedRouting.assignments).reduce((url,assignment)=>`${url.length?"::":""}${NamedRouting.generateUrlFragment(assignment)}`,"")}static generateUrlFragment(assignment){return`(${assignment.name}:${assignment.url.replace(/\./g,"_dot_")})`}static async parseNamedItem(url,suppressAdding){let _url=url;"/"===_url[0]&&(_url=_url.substr(1)),"("===_url[0]&&(_url=_url.substr(1,_url.length-2));const match=_url.match(/^\/?\(?([\w_-]+)\:(.*)\)?/);if(match){const urlEscaped=match[2].replace(/_dot_/g,".");let cancelled=!1;return!0!==suppressAdding&&!1===await NamedRouting.addAssignment(match[1],urlEscaped)&&(cancelled=!0),{name:match[1],url:match[2],urlEscaped:urlEscaped,cancelled:cancelled,namedOutlet:NamedRouting.parseNamedOutletUrl(match[2])}}return null}static parseNamedOutletUrl(url){const match=url.match(/^([/\w-]+)(\(.*?\))?(?:\:(.+))?/);if(match){const data=new Map;if(match[3]){const keyValues=match[3].split("&");for(let i=0,iLen=keyValues.length;i<iLen;i++){const keyValue=keyValues[i].split("=");data.set(decodeURIComponent(keyValue[0]),decodeURIComponent(keyValue[1]))}}const elementTag=match[1];let importPath=match[2]&&match[2].substr(1,match[2].length-2);const inferredElementTag=NamedRouting.inferCustomElementTagName(elementTag);if(null===inferredElementTag)return null;importPath||(importPath=NamedRouting.inferCustomElementImportPath(elementTag,inferredElementTag));const options=undefined;return{elementTag:inferredElementTag,data:data,options:{import:importPath}}}return null}static inferCustomElementImportPath(importStyleTagName,elementTag){if(void 0!==customElements.get(elementTag))return;let inferredPath=importStyleTagName;const lastForwardSlash=undefined;-1===inferredPath.lastIndexOf("/")&&(inferredPath="/"+inferredPath);const dotIndex=undefined;return-1===inferredPath.indexOf(".")&&(inferredPath+=".js"),inferredPath}static inferCustomElementTagName(elementTag){let inferredTagName=elementTag;const lastForwardSlash=inferredTagName.lastIndexOf("/");lastForwardSlash>-1&&(inferredTagName=inferredTagName.substring(lastForwardSlash+1));const dotIndex=inferredTagName.indexOf(".");return dotIndex>-1&&(inferredTagName=inferredTagName.substring(0,dotIndex-1)),inferredTagName=inferredTagName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),-1===inferredTagName.indexOf("-")&&(inferredTagName=null),inferredTagName}static async prefetchNamedOutletImports(namedAssignment){namedAssignment.namedOutlet&&namedAssignment.namedOutlet.options&&namedAssignment.namedOutlet.options.import&&(await NamedRouting.pageReady(),await NamedRouting.importCustomElement(namedAssignment.namedOutlet.options.import,namedAssignment.namedOutlet.elementTag))}static async prefetchImport(importSrc,tagName){await NamedRouting.pageReady(),await NamedRouting.importCustomElement(importSrc,tagName)}static async importCustomElement(importSrc,tagName){importSrc&&void 0===customElements.get(tagName)&&await import(importSrc)}static pageReady(){return NamedRouting.pageReadyPromise||(NamedRouting.pageReadyPromise="complete"===document.readyState?Promise.resolve():new Promise((resolve,reject)=>{const callback=()=>{"complete"===document.readyState&&(document.removeEventListener("readystatechange",callback),resolve())};document.addEventListener("readystatechange",callback)})),NamedRouting.pageReadyPromise}static canLeave(newRoute){newRoute.prev=document.location.pathname;const canLeaveEvent=new CustomEvent("onRouteLeave",{bubbles:!0,cancelable:!0,composed:!0,detail:{route:newRoute}});return this.dispatchEvent(canLeaveEvent),!canLeaveEvent.defaultPrevented}}NamedRouting.pageReadyPromise=void 0,NamedRouting.registry={},NamedRouting.assignments={};class RouterElement extends HTMLElement{static handlerAddRouter(event){RouterElement.addRouter.call(this,event.detail.router),event.stopPropagation(),event.detail.parentRouter=this}static handlerRouterLinksAdded(event){event.detail.links&&(event.detail.onRegistered=RouterElement.registerLinks(event.detail.links))}static handlerNavigate(event){event.detail.href&&(event.detail.onNavigated=RouterElement.navigate(event.detail.href))}static addRouter(router){this._routers.push(router)}static removeRouter(routerElement){const routerIndex=this._routers.indexOf(routerElement);routerIndex>-1&&this._routers.splice(routerIndex,1)}static changeHash(){}static async changeUrl(onpopstate=!1){const hash=RouterElement._getHash(),path=decodeURIComponent(window.location.pathname),query=window.location.search.substring(1),oldRoute=RouterElement._route;if(!RouterElement._initialized)return!1;if(oldRoute.path===path&&oldRoute.query===query&&oldRoute.hash===hash)return!1;const newUrl=RouterElement._getUrl(window.location);return await RouterElement.dispatch(newUrl,!0,onpopstate),!0}static async navigate(navigationSource){let event=null,anchor=null;if(navigationSource instanceof Event){if(event=navigationSource,event.defaultPrevented)return}else"string"!=typeof navigationSource&&(anchor=navigationSource);const href=RouterElement._getSameOriginLinkHref(navigationSource);if(null===href)return;if(!href){const target=event&&event.target||anchor;return void(target&&target.dispatchEvent(new CustomEvent("onRouteNotHandled",{bubbles:!0,composed:!0,detail:{href:href}})))}event&&event.preventDefault();const url=new URL(href),newUrl=RouterElement._getUrl(url);await RouterElement.dispatch(newUrl)}static prepareRoutersForDispatch(routers){const _routers=undefined;(routers||RouterElement._routers||[]).forEach(router=>{router.clearCurrentMatch();const childRouters=router._routers;this.prepareRoutersForDispatch(childRouters)})}static async dispatch(url,skipHistory,onpopstate=!1){const basePath=RouterElement.baseUrlSansHost(),shortUrl=url.substr(basePath.length);RouterElement._route={url:shortUrl,onpopstate:onpopstate},RouterElement._activeRouters=RouterElement._activeRouters.filter((value,index,self)=>index===self.findIndex(r=>r.route.baseUrl===value.route.baseUrl&&r.route.lastMatch.url===value.route.lastMatch.url)),console.log(RouterElement._activeRouters),RouterElement._activeRouters.length&&!1===RouterElement._activeRouters.every(r=>r.route.canLeave(RouterElement._route))?RouterElement._activeRouters[0].router.dispatchEvent(new CustomEvent("onRouteCancelled",{bubbles:!0,composed:!0,detail:{shortUrl:shortUrl}})):(RouterElement._activeRouters=[],this.prepareRoutersForDispatch(),0===RouterElement._routers.length&&(this._currentMatch={remainder:shortUrl,data:null,redirect:null,url:"",useCache:!1},this.hasMatch=!1),skipHistory||RouterElement.updateHistory(url),await RouterElement.performMatchOnRouters(shortUrl,RouterElement._routers)&&!0!==skipHistory&&RouterElement.updateAnchorsStatus())}static updateHistory(href){let url;const fullNewUrl=new URL(href,`${window.location.protocol}//${window.location.host}`).href;window.history.pushState(window.history.state,"",fullNewUrl)}static async updateAnchorsStatus(url,links){const _links=(links||RouterElement._anchors).filter(l=>!0===l.a.isConnected),linkClass=anchor=>anchor.getAttribute("activeclassname")||anchor.activeClassName||"active";_links.forEach(link=>link.a.classList.remove(linkClass(link.a)));const urlFragments=(url||RouterElement.getUrlState()).split("::"),namedMatches=undefined;return(await Promise.all(urlFragments.map(async urlFragment=>({urlFragment:"/"===urlFragment[0]?urlFragment.substr(1):urlFragment,namedMatch:await NamedRouting.parseNamedItem(urlFragment,!0)})))).forEach(({urlFragment:urlFragment,namedMatch:namedMatch})=>{_links.every(link=>{if(link&&!1===link.a.classList.contains(linkClass(link.a))&&link.routerMatches){const{named:named,routes:routes}=link.routerMatches;if(namedMatch){const namedMatchResult=undefined;if(!1===named.every(n=>{if(n.name===namedMatch.name){if(n.url===namedMatch.urlEscaped)return link.a.classList.add(linkClass(link.a)),!1;if(0===namedMatch.urlEscaped.indexOf(n.url))return link.a.classList.add(linkClass(link.a)),!1}return!0}))return!1}return routes.every(route=>{const routeUrl="/"===route[0]?route.substr(1):route;return urlFragment!==routeUrl&&0!==urlFragment.indexOf(routeUrl)||(link.a.classList.add(linkClass(link.a)),!1)})}return!0})}),window.dispatchEvent(new CustomEvent("onLinkActiveStatusUpdated",{bubbles:!0,composed:!0,detail:{links:_links}})),null}static getUrlState(routers){let url=NamedRouting.generateNamedItemsUrl();const _routers=routers||RouterElement._routers;if(_routers)for(let i=0,iLen=_routers.length;i<iLen;i++){const router=_routers[i],nextFrag=router.generateUrlFragment();if(nextFrag){url.length&&(url+="::"),url+=nextFrag;const childRouters=router._routers;childRouters&&childRouters.length&&(1===childRouters.length?url+="/"+this.getUrlState(childRouters):url+=`/(${this.getUrlState(childRouters)})`)}}return url}static async performMatchOnRouters(url,routers){let _url=url;"("===_url[0]&&(_url=_url.substr(1,_url.length-2));const routerUrls=RouterElement.splitUrlIntoRouters(_url),namedOutletMatches=await Promise.all(routerUrls.map(u=>NamedRouting.parseNamedItem(u)));if(namedOutletMatches.some(match=>null==match?void 0:match.cancelled))return!1;const urlsWithoutNamedOutlets=namedOutletMatches.filter(match=>!match).map((_,i)=>routerUrls[i]),matchPromises=routers.map((router,i)=>urlsWithoutNamedOutlets[i]?router.performMatchOnRouter(urlsWithoutNamedOutlets[i]||""):Promise.resolve(null));return await Promise.all(matchPromises),RouterElement.updateAnchorsStatus(),!0}static splitUrlIntoRouters(url){if("/"===url)return["/"];const urls=[];let skip=0,i=0,lastI=i;for(const iLen=url.length;i<iLen;i+=1){const char=url[i];"("===char?skip+=1:")"===char?skip-=1:":"===char&&":"===url[i+1]&&0===skip&&(urls.push(url.substring(lastI+(":"===url[lastI]?1:0),i)),i+=1,lastI=i)}"("!==url[lastI]&&")"!==url[lastI]&&":"!==url[lastI]||(lastI+=1),i>lastI&&urls.push(url.substr(lastI));for(let j=0,jLen=urls.length;j<jLen;j++)"/"===urls[j][0]&&(urls[j]=urls[j].substr(1)),"("===urls[j][0]&&")"===urls[j][urls[j].length-1]&&(urls[j]=urls[j].substr(1,urls[j].length-2));return urls}static async registerLinks(links,activeClassName){RouterElement.removeDisconnectedAnchors();const newAnchorPromises=[];for(let i=0,iLen=links.length;i<iLen;i++){const link=links[i];link.href&&newAnchorPromises.push(RouterElement.sanitizeLinkHref(link).then(matches=>{if(matches){activeClassName&&!link.hasAttribute("activeclassname")&&link.setAttribute("activeclassname",activeClassName);for(let j=0,jLen=matches.named.length;j<jLen;j++)NamedRouting.prefetchNamedOutletImports(matches.named[j]);return{a:link,routerMatches:matches}}return null}))}const newAnchors=(await Promise.all(newAnchorPromises)).filter(a=>null!==a);RouterElement._anchors=RouterElement._anchors.concat(newAnchors),RouterElement.updateAnchorsStatus(void 0,newAnchors)}static removeDisconnectedAnchors(){const currentAnchors=RouterElement._anchors,nextAnchors=[];for(let i=0,iLen=currentAnchors.length;i<iLen;i++)!0===currentAnchors[i].a.isConnected&&(nextAnchors[nextAnchors.length]=currentAnchors[i]);RouterElement._anchors=nextAnchors}static async sanitizeLinkHref(hrefSource){const href=RouterElement._getSameOriginLinkHref(hrefSource),url=new URL(href),path=decodeURIComponent(url.pathname),basePathLength=RouterElement.baseUrlSansHost().length;let urlStr=path.substr(basePathLength);"("===urlStr[0]&&(urlStr=urlStr.substr(1,urlStr.length-2));const urls=RouterElement.splitUrlIntoRouters(urlStr),matches=urls.map(_url=>NamedRouting.parseNamedItem(_url,!0));return(await Promise.all(matches)).reduce((result,match,index)=>(match?result.named.push(match):result.routes.push(urls[index]),result),{named:[],routes:[]})}disconnectedCallback(){RouterElement.removeRouter.call(this._parentRouter,this),this.removeEventListener("onRouterAdded",this.handlerAddRouter,!1),this.removeEventListener("onRouteAdded",this.handlerAddRoute,!1),this.getName()&&NamedRouting.removeNamedItem(this.getName())}async connectedCallback(){if(!this.created){this.created=!0;let{baseURI:baseURI}=document;if(void 0===baseURI){const baseTags=document.getElementsByTagName("base");baseURI=baseTags.length?baseTags[0].href:document.URL,document.baseURI=baseURI}this._routers=[],RouterElement.initialize()}if(this.isConnected){const routerAddedEvent=new CustomEvent("onRouterAdded",{bubbles:!0,cancelable:!0,composed:!0,detail:{router:this}});this.dispatchEvent(routerAddedEvent),this._parentRouter=routerAddedEvent.detail.parentRouter,this.addEventListener("onRouterAdded",this.handlerAddRouter=RouterElement.handlerAddRouter.bind(this),!1),this.addEventListener("onRouteAdded",this.handlerAddRoute=this.handlerAddRoute.bind(this),!1),await NamedRouting.addNamedItem(this)}}constructor(){super(),this._currentMatch=null,this.canLeave=NamedRouting.canLeave.bind(this)}static async initialize(){RouterElement._initialized||(RouterElement._initialized=!0,window.addEventListener("popstate",event=>{RouterElement.changeUrl(!0)},!1),window.addEventListener("click",RouterElement.navigate,!1),window.addEventListener("onRouterAdded",RouterElement.handlerAddRouter.bind(RouterElement),!1),window.addEventListener("routerLinksAdded",RouterElement.handlerRouterLinksAdded.bind(RouterElement),!1),window.addEventListener("navigate",RouterElement.handlerNavigate.bind(RouterElement),!1),await RouterElement.changeUrl())}getName(){return void 0===this.routerName&&(this.routerName=this.getAttribute("name")),this.routerName}getCurrentMatch(){if(!this._currentMatch&&this._parentRouter._currentMatch){this._currentMatch={data:null,redirect:null,url:"",useCache:!1,remainder:this._parentRouter._currentMatch.remainder};const{remainder:remainder}=this._currentMatch;if(remainder&&"("===remainder[0]){const remainderArray=RouterElement.splitUrlIntoRouters(remainder.substring(1,remainder.length-2));this._currentMatch.remainder=remainderArray.shift()}this._currentMatch.url=this._currentMatch.remainder}return this._currentMatch}clearCurrentMatch(){this._currentMatch=null}handlerAddRoute(event){event.stopPropagation(),event.detail.router=this,event.detail.onRouteAdded=this.addRoute(event.detail.route)}async addRoute(routeElement){if(!this.hasMatch){const currentMatch=this.getCurrentMatch();currentMatch&&currentMatch.remainder&&await this.performMatchOnRoute(currentMatch.remainder,routeElement)}}async processNamedUrl(url){await this.performMatchOnRouter(url)}async performMatchOnRouter(url){this.hasMatch=!1,this._currentMatch={remainder:url,data:null,redirect:null,url:"",useCache:!1};const routeElements=this.getRouteElements(),outletElement=this.getOutletElement();let match=null,i=0;const iLen=routeElements.length;for(;i<iLen;i++){const routeElement=routeElements[i];if(match=await this.performMatchOnRoute(url,routeElement),null!=match){console.info("route matched -> ",routeElement.getAttribute("path")),i+=1;break}}for(;i<iLen;i++){const routeElement=undefined;routeElements[i].clearLastMatch()}return null===match?(outletElement.renderOutletContent&&(outletElement.renderOutletContent(`No matching route for url ${url} \r\nTo replace this message add a 404 catch all route\r\n &lt;a-route path='*'>&lt;template&gt;catach all - NotFound&lt;/template&gt;&lt;/a-route&gt;`),console&&console.error&&console.error("404 - Route not found for url "+url)),null):match}async performMatchOnRoute(url,routeElement){if(!routeElement.match)return null;const match=routeElement.match(url)||null;if(null!=match){if(this.postProcessMatch(),match.redirect)return this.performMatchOnRouter(match.redirect);const activeRouters=undefined;RouterElement._activeRouters.push({route:routeElement,router:this,match:match}),this._currentMatch=match;const outletElement=this.getOutletElement();async function setContentAndRender(content){const findParentWithState=undefined,parent=(element=>{let parent=element.parentElement;for(;parent;){const rootNode=parent.getRootNode?parent.getRootNode().host:null;if(parent=rootNode||parent.parentElement,parent&&parent.state)return parent}return null})(outletElement);parent?(content.parent=parent,content.stateToObserve=parent.state,outletElement.renderOutletContent(content)):outletElement.renderOutletContent(content)}if(match.useCache&&match.url!==url){const content=await routeElement.getContent(match.data);outletElement.renderOutletContent(content)}else{var content=await routeElement.getContent(match.data);routeElement.hasAttribute("open")&&(content=content.replace("><"," open><"),console.log("hee")),outletElement.renderOutletContent(content),console.log("hey hey",content,match,routeElement)}this._routers&&match.remainder&&await RouterElement.performMatchOnRouters(match.remainder,this._routers)}return match}postProcessMatch(){if(this.hasMatch=!0,this._parentRouter._currentMatch){const parentMatch=this._parentRouter._currentMatch;let{remainder:remainder}=parentMatch;remainder&&"("===remainder[0]&&(remainder=remainder.substring(1,remainder.length-2)),remainder=RouterElement.splitUrlIntoRouters(remainder),remainder.shift(),remainder.length>1?this._parentRouter._currentMatch.remainder=`(${remainder.join("::")})`:1===remainder.length?this._parentRouter._currentMatch.remainder=remainder[0]:this._parentRouter._currentMatch.remainder=""}}generateUrlFragment(){const match=this._currentMatch;if(!match)return"";let urlFrag=match.url;return match.remainder&&(urlFrag+="/"+match.remainder),urlFrag}getOutletElement(){return this._getRouterElements("a-outlet,an-outlet")[0]}getRouteElements(){return this._getRouterElements("a-route")}_getRouterElements(tagNames){const routeElements=[],_tagNames=tagNames.toLowerCase().split(",");for(let i=0,iLen=this.children.length;i<iLen;i++){const elem=this.children[i];for(let j=0,jLen=_tagNames.length;j<jLen;j++)elem.tagName.toLowerCase()===_tagNames[j]&&routeElements.push(elem)}return routeElements}static _getSameOriginLinkHref(hrefSource){let href=null,anchor=null;if(hrefSource instanceof Event){const event=hrefSource;if(0!==event.button)return null;if(event.metaKey||event.ctrlKey)return null;const eventPath=event.composedPath();for(let i=0;i<eventPath.length;i++){const element=eventPath[i];if(element instanceof HTMLAnchorElement){anchor=element;break}}if(!anchor)return null}else if("string"==typeof hrefSource){href=hrefSource;try{new URL(href)}catch(e){href=new URL(href,new URL(document.baseURI).origin).href}}else anchor=hrefSource;if(anchor){if("_blank"===anchor.target)return"";if(("_top"===anchor.target||"_parent"===anchor.target)&&window.top!==window)return"";if(anchor.download)return"";href=anchor.href}if(0!==href.indexOf(document.baseURI))return"";const hrefEscaped=href.replace(/::/g,"$_$_");let url;url=null!=document.baseURI?new URL(hrefEscaped,document.baseURI):new URL(hrefEscaped);const origin=window.location.origin||`${window.location.protocol}//${window.location.host}`;let urlOrigin;if(url.origin&&"null"!==url.origin)urlOrigin=url.origin;else{let urlHost=url.host;const urlPort=url.port,urlProtocol=url.protocol,isExtraneousHTTPS=undefined,isExtraneousHTTP="http:"===urlProtocol&&"80"===urlPort;("https:"===urlProtocol&&"443"===urlPort||isExtraneousHTTP)&&(urlHost=url.hostname),urlOrigin=`${urlProtocol}//${urlHost}`}if(urlOrigin!==origin)return"";let normalizedHref=url.pathname.replace(/\$_\$_/g,"::")+url.search.replace(/\$_\$_/g,"::")+url.hash.replace(/\$_\$_/g,"::");"/"!==normalizedHref[0]&&(normalizedHref="/"+normalizedHref);const fullNormalizedHref=undefined;return new URL(normalizedHref,window.location.href).href}static _getHash(){return decodeURIComponent(window.location.hash.substring(1))}static baseUrlSansHost(){const host=`${window.location.protocol}//${window.location.host}`;return document.baseURI.substr(host.length+1)}static _getUrl(url){const _url=url||window.location,path=decodeURIComponent(_url.pathname),query=_url.search.substring(1),hash=RouterElement._getHash(),partiallyEncodedPath=encodeURI(path).replace(/\#/g,"%23").replace(/\?/g,"%3F");let partiallyEncodedQuery="";query&&(partiallyEncodedQuery="?"+query.replace(/\#/g,"%23"),partiallyEncodedQuery=RouterElement._encodeSpaceAsPlusInQuery?partiallyEncodedQuery.replace(/\+/g,"%2B").replace(/ /g,"+").replace(/%20/g,"+"):partiallyEncodedQuery.replace(/\+/g,"%2B").replace(/ /g,"%20"));let partiallyEncodedHash="";return hash&&(partiallyEncodedHash="#"+encodeURI(hash)),partiallyEncodedPath+partiallyEncodedQuery+partiallyEncodedHash}}RouterElement._routers=[],RouterElement._route={},RouterElement._initialized=!1,RouterElement._activeRouters=[],RouterElement._dwellTime=2e3,RouterElement._anchors=[],RouterElement._encodeSpaceAsPlusInQuery=!1,RouterElement.assignedOutlets={},window.customElements.define("a-router",RouterElement);class RouterLinkElement extends HTMLAnchorElement{connectedCallback(){RouterElement.initialize(),this.register()}static get observedAttributes(){return["href"]}attributeChangedCallback(name,oldValue,newValue){"href"===name&&oldValue&&newValue&&this.register()}constructor(){super()}register(){window.dispatchEvent(new CustomEvent("routerLinksAdded",{detail:{links:[this]}}))}}window.customElements.define("router-link",RouterLinkElement,{extends:"a"});class RouteElement extends HTMLElement{connectedCallback(){if(!this.created){this.created=!0,this.style.display="none";const baseElement=document.head.querySelector("base");this.baseUrl=baseElement&&baseElement.getAttribute("href")}if(this.isConnected){const onRouteAdded=new CustomEvent("onRouteAdded",{bubbles:!0,composed:!0,detail:{route:this}});this.dispatchEvent(onRouteAdded);const lazyLoad=undefined;if(!1===("true"===(this.getAttribute("lazyload")||"").toLowerCase()||this.hasAttribute("lazy-load"))){const importAttr=this.getAttribute("import"),tagName=this.getAttribute("element");NamedRouting.prefetchImport(importAttr,tagName)}}}constructor(){super(),this.canLeave=NamedRouting.canLeave.bind(this),this.content=null,this.data=null}_createPathSegments(url){return url.replace(/(^\/+|\/+$)/g,"").split("/")}match(url){const urlSegments=this._createPathSegments(url),path=this.getAttribute("path");if(!path)throw console.info("route must contain a path"),new Error("Route has no path defined. Add a path attribute to route");const fullMatch={url:url,remainder:"",data:new Map,redirect:null,useCache:!1};let match=fullMatch;if("*"===path)match=fullMatch;else if(path===url)match=fullMatch;else{const pathSegments=this._createPathSegments(path),data=match.data,max=pathSegments.length;let i=0;for(;i<max;i++)if(pathSegments[i]&&":"===pathSegments[i].charAt(0)){const paramName=pathSegments[i].replace(/(^\:|[+*?]+\S*$)/g,""),flags=(pathSegments[i].match(/([+*?])\S*$/)||[])[1]||"",oneOrMore=flags.includes("+"),anyNumber=flags.includes("*"),oneOrNone=flags.includes("?"),defaultValue=oneOrNone&&(pathSegments[i].match(/[+*?]+(\S+)$/)||[])[1]||"";let value=urlSegments[i]||"";const required=!anyNumber&&!oneOrNone;if(!value&&defaultValue&&(value=defaultValue),!value&&required){match=null;break}if(data.set(paramName,decodeURIComponent(value)),oneOrMore||anyNumber){data.set(paramName,urlSegments.slice(i).map(decodeURIComponent).join("/")),i=urlSegments.length;break}}else if(pathSegments[i]!==urlSegments[i]){match=null;break}match&&(i>=urlSegments.length||(this.hasAttribute("fullmatch")?match=null:i===max?(match=match||fullMatch,match.data=data,match.url=urlSegments.slice(0,i).join("/"),match.remainder=urlSegments.slice(i).join("/")):match=null))}if(null!==match){const routeMatchedEvent=new CustomEvent("onRouteMatch",{bubbles:!0,cancelable:!0,composed:!0,detail:{route:this,match:match,path:path}});this.dispatchEvent(routeMatchedEvent),routeMatchedEvent.defaultPrevented&&(match=null),this.hasAttribute("redirect")&&(match.redirect=this.getAttribute("redirect"))}if(match){const useCache=this.lastMatch&&this.lastMatch.url===match.url&&!this.hasAttribute("disableCache");match.useCache=!!useCache}return this.lastMatch=match,match}clearLastMatch(){this.lastMatch=null}async getContent(attributes){let{content:content}=this;if(!content){const importAttr=this.getAttribute("import"),tagName=this.getAttribute("element");return"<"+tagName+"></"+tagName+">"}return content=document.createElement(content.tagName),this.data&&content instanceof HTMLElement&&Object.entries(this.data).forEach(([name,value])=>{content[name]=value}),RouteElement.setData(content,this.dataset),attributes&&RouteElement.setData(content,attributes),this.content=content,this.content}static setData(target,data){if(data&&target instanceof Element){const setProperty=(key,value)=>{"."===key[0]?target[key.substring(1)]=value:target.setAttribute(key,value.toString())};data instanceof Map?data.forEach((value,key)=>setProperty(key,value)):Object.entries(data).forEach(([key,value])=>setProperty(key,value))}}}window.customElements.define("a-route",RouteElement);class OutletElement extends HTMLElement{async connectedCallback(){this.isConnected&&(this.created||(this.created=!0,await NamedRouting.addNamedItem(this)),await RouterElement.initialize())}disconnectedCallback(){this.getName()&&NamedRouting.removeNamedItem(this.getName())}constructor(){super(),this.canLeave=NamedRouting.canLeave.bind(this)}getName(){return void 0===this.outletName&&(this.outletName=this.getAttribute("name")),this.outletName}_createPathSegments(url){return url.replace(/(^\/+|\/+$)/g,"").split("/")}renderOutletContent(content){this.innerHTML="",console.info("outlet rendered: "+this.outletName,content),"string"==typeof content?this.innerHTML=content:this.appendChild(content),this.dispatchOutletUpdated()}async processNamedUrl(url){const details=NamedRouting.parseNamedOutletUrl(url),options=details.options||{import:null};let data=details.data||new Map;if(data instanceof Map==!1&&(data=new Map(Object.entries(data||{}))),this.children&&this.children[0]&&this.children[0].tagName.toLowerCase()===details.elementTag)return RouteElement.setData(this.children[0],data),void this.dispatchOutletUpdated();await NamedRouting.importCustomElement(options.import,details.elementTag);const element=document.createElement(details.elementTag);RouteElement.setData(element,data),void 0===customElements.get(details.elementTag)&&console.error(`Custom Element not found: ${details.elementTag}. Are you missing an import or mis-spelled tag name?`),this.renderOutletContent(element)}dispatchOutletUpdated(){console.log("dis dis"),this.dispatchEvent(new CustomEvent("onOutletUpdated",{bubbles:!0,composed:!0,detail:{}}))}}window.customElements.define("a-outlet",OutletElement),window.customElements.define("an-outlet",class extends OutletElement{})}()},morphdom:function(){!function(){"use strict";var DOCUMENT_FRAGMENT_NODE=11,range;function morphAttrs(fromNode,toNode){window.customElements.get(fromNode.tagName.toLowerCase());var toNodeAttrs=toNode.attributes,attr,attrName,attrNamespaceURI,attrValue,fromValue;if(11!==toNode.nodeType&&11!==fromNode.nodeType){for(var i=toNodeAttrs.length-1;i>=0;i--)attrName=(attr=toNodeAttrs[i]).name,attrNamespaceURI=attr.namespaceURI,attrValue=attr.value,attrNamespaceURI?(attrName=attr.localName||attrName,(fromValue=fromNode.getAttributeNS(attrNamespaceURI,attrName))!==attrValue&&("xmlns"===attr.prefix&&(attrName=attr.name),fromNode.setAttributeNS(attrNamespaceURI,attrName,attrValue))):(fromValue=fromNode.getAttribute(attrName))!==attrValue&&fromNode.setAttribute(attrName,attrValue);for(var fromNodeAttrs=fromNode.attributes,d=fromNodeAttrs.length-1;d>=0;d--)attrName=(attr=fromNodeAttrs[d]).name,(attrNamespaceURI=attr.namespaceURI)?(attrName=attr.localName||attrName,toNode.hasAttributeNS(attrNamespaceURI,attrName)||fromNode.removeAttributeNS(attrNamespaceURI,attrName)):toNode.hasAttribute(attrName)||fromNode.removeAttribute(attrName)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(str){var template=doc.createElement("template");return template.innerHTML=str,template.content.childNodes[0]}function createFragmentFromRange(str){var fragment;return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(str).childNodes[0]}function createFragmentFromWrap(str){var fragment=doc.createElement("body");return fragment.innerHTML=str,fragment.childNodes[0]}function toElement(str){return str=str.trim(),HAS_TEMPLATE_SUPPORT?createFragmentFromTemplate(str):HAS_RANGE_SUPPORT?createFragmentFromRange(str):createFragmentFromWrap(str)}function compareNodeNames(fromEl,toEl){var fromNodeName=fromEl.nodeName,toNodeName=toEl.nodeName,fromCodeStart,toCodeStart;return fromNodeName===toNodeName||(fromCodeStart=fromNodeName.charCodeAt(0),toCodeStart=toNodeName.charCodeAt(0),fromCodeStart<=90&&toCodeStart>=97?fromNodeName===toNodeName.toUpperCase():toCodeStart<=90&&fromCodeStart>=97&&toNodeName===fromNodeName.toUpperCase())}function createElementNS(name,namespaceURI){return namespaceURI&&namespaceURI!==NS_XHTML?doc.createElementNS(namespaceURI,name):doc.createElement(name)}function moveChildren(fromEl,toEl){for(var curChild=fromEl.firstChild;curChild;){var nextChild=curChild.nextSibling;toEl.appendChild(curChild),curChild=nextChild}return toEl}function syncBooleanAttrProp(fromEl,toEl,name){fromEl[name]!==toEl[name]&&(fromEl[name]=toEl[name],fromEl[name]?fromEl.setAttribute(name,""):fromEl.removeAttribute(name))}var specialElHandlers={OPTION:function(fromEl,toEl){var parentNode=fromEl.parentNode;if(parentNode){var parentName=parentNode.nodeName.toUpperCase();"OPTGROUP"===parentName&&(parentName=(parentNode=parentNode.parentNode)&&parentNode.nodeName.toUpperCase()),"SELECT"!==parentName||parentNode.hasAttribute("multiple")||(fromEl.hasAttribute("selected")&&!toEl.selected&&(fromEl.setAttribute("selected","selected"),fromEl.removeAttribute("selected")),parentNode.selectedIndex=-1)}syncBooleanAttrProp(fromEl,toEl,"selected")},INPUT:function(fromEl,toEl){syncBooleanAttrProp(fromEl,toEl,"checked"),syncBooleanAttrProp(fromEl,toEl,"disabled"),fromEl.value!==toEl.value&&(fromEl.value=toEl.value),toEl.hasAttribute("value")||fromEl.removeAttribute("value")},TEXTAREA:function(fromEl,toEl){var newValue=toEl.value;fromEl.value!==newValue&&(fromEl.value=newValue);var firstChild=fromEl.firstChild;if(firstChild){var oldValue=firstChild.nodeValue;if(oldValue==newValue||!newValue&&oldValue==fromEl.placeholder)return;firstChild.nodeValue=newValue}},SELECT:function(fromEl,toEl){if(!toEl.hasAttribute("multiple")){for(var selectedIndex=-1,i=0,curChild=fromEl.firstChild,optgroup,nodeName;curChild;)if("OPTGROUP"===(nodeName=curChild.nodeName&&curChild.nodeName.toUpperCase()))curChild=(optgroup=curChild).firstChild;else{if("OPTION"===nodeName){if(curChild.hasAttribute("selected")){selectedIndex=i;break}i++}!(curChild=curChild.nextSibling)&&optgroup&&(curChild=optgroup.nextSibling,optgroup=null)}fromEl.selectedIndex=selectedIndex}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8;function noop(){}function defaultGetNodeKey(node){if(node)return node.getAttribute&&node.getAttribute("id")||node.id}function morphdomFactory(morphAttrs){return function morphdom(fromNode,toNode,options){if(options||(options={}),"string"==typeof toNode)if("#document"===fromNode.nodeName||"HTML"===fromNode.nodeName||"BODY"===fromNode.nodeName){var toNodeHtml=toNode;(toNode=doc.createElement("html")).innerHTML=toNodeHtml}else toNode=toElement(toNode);else 11===toNode.nodeType&&(toNode=toNode.firstElementChild);var getNodeKey=options.getNodeKey||defaultGetNodeKey,onBeforeNodeAdded=options.onBeforeNodeAdded||noop,onNodeAdded=options.onNodeAdded||noop,onBeforeElUpdated=options.onBeforeElUpdated||noop,onElUpdated=options.onElUpdated||noop,onBeforeNodeDiscarded=options.onBeforeNodeDiscarded||noop,onNodeDiscarded=options.onNodeDiscarded||noop,onBeforeElChildrenUpdated=options.onBeforeElChildrenUpdated||noop,skipFromChildren=options.skipFromChildren||noop,addChild=options.addChild||function(parent,child){return parent.appendChild(child)},childrenOnly=!0===options.childrenOnly,fromNodesLookup=Object.create(null),keyedRemovalList=[];function addKeyedRemoval(key){keyedRemovalList.push(key)}function walkDiscardedChildNodes(node,skipKeyedNodes){if(1===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=void 0;skipKeyedNodes&&(key=getNodeKey(curChild))?addKeyedRemoval(key):(onNodeDiscarded(curChild),curChild.firstChild&&walkDiscardedChildNodes(curChild,skipKeyedNodes)),curChild=curChild.nextSibling}}function removeNode(node,parentNode,skipKeyedNodes){!1!==onBeforeNodeDiscarded(node)&&(parentNode&&parentNode.removeChild(node),onNodeDiscarded(node),walkDiscardedChildNodes(node,skipKeyedNodes))}function indexTree(node){if(1===node.nodeType||11===node.nodeType)for(var curChild=node.firstChild;curChild;){var key=getNodeKey(curChild);key&&(fromNodesLookup[key]=curChild),indexTree(curChild),curChild=curChild.nextSibling}}function handleNodeAdded(el){onNodeAdded(el);for(var curChild=el.firstChild;curChild;){var nextSibling=curChild.nextSibling,key=getNodeKey(curChild);if(key){var unmatchedFromEl=fromNodesLookup[key];unmatchedFromEl&&compareNodeNames(curChild,unmatchedFromEl)?(curChild.parentNode.replaceChild(unmatchedFromEl,curChild),morphEl(unmatchedFromEl,curChild)):handleNodeAdded(curChild)}else handleNodeAdded(curChild);curChild=nextSibling}}function cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey){for(;curFromNodeChild;){var fromNextSibling=curFromNodeChild.nextSibling;(curFromNodeKey=getNodeKey(curFromNodeChild))?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}}function morphEl(fromEl,toEl,childrenOnly){var toElKey=getNodeKey(toEl);if(toElKey&&delete fromNodesLookup[toElKey],!childrenOnly){if(!1===onBeforeElUpdated(fromEl,toEl))return;if(morphAttrs(fromEl,toEl),onElUpdated(fromEl),!1===onBeforeElChildrenUpdated(fromEl,toEl))return}"TEXTAREA"!==fromEl.nodeName?morphChildren(fromEl,toEl):specialElHandlers.TEXTAREA(fromEl,toEl)}function morphChildren(fromEl,toEl){var skipFrom=skipFromChildren(fromEl,toEl),curToNodeChild=toEl.firstChild,curFromNodeChild=fromEl.firstChild,curToNodeKey,curFromNodeKey,fromNextSibling,toNextSibling,matchingFromEl;outer:for(;curToNodeChild;){for(toNextSibling=curToNodeChild.nextSibling,curToNodeKey=getNodeKey(curToNodeChild);!skipFrom&&curFromNodeChild;){if(fromNextSibling=curFromNodeChild.nextSibling,curToNodeChild.isSameNode&&curToNodeChild.isSameNode(curFromNodeChild)){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey=getNodeKey(curFromNodeChild);var curFromNodeType=curFromNodeChild.nodeType,isCompatible=void 0;if(curFromNodeType===curToNodeChild.nodeType&&(1===curFromNodeType?(curToNodeKey?curToNodeKey!==curFromNodeKey&&((matchingFromEl=fromNodesLookup[curToNodeKey])?fromNextSibling===matchingFromEl?isCompatible=!1:(fromEl.insertBefore(matchingFromEl,curFromNodeChild),curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeKey=getNodeKey(curFromNodeChild=matchingFromEl)):isCompatible=!1):curFromNodeKey&&(isCompatible=!1),(isCompatible=!1!==isCompatible&&compareNodeNames(curFromNodeChild,curToNodeChild))&&morphEl(curFromNodeChild,curToNodeChild)):3!==curFromNodeType&&8!=curFromNodeType||(isCompatible=!0,curFromNodeChild.nodeValue!==curToNodeChild.nodeValue&&(curFromNodeChild.nodeValue=curToNodeChild.nodeValue))),isCompatible){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}curFromNodeKey?addKeyedRemoval(curFromNodeKey):removeNode(curFromNodeChild,fromEl,!0),curFromNodeChild=fromNextSibling}if(curToNodeKey&&(matchingFromEl=fromNodesLookup[curToNodeKey])&&compareNodeNames(matchingFromEl,curToNodeChild))skipFrom||addChild(fromEl,matchingFromEl),morphEl(matchingFromEl,curToNodeChild);else{var onBeforeNodeAddedResult=onBeforeNodeAdded(curToNodeChild);!1!==onBeforeNodeAddedResult&&(onBeforeNodeAddedResult&&(curToNodeChild=onBeforeNodeAddedResult),curToNodeChild.actualize&&(curToNodeChild=curToNodeChild.actualize(fromEl.ownerDocument||doc)),addChild(fromEl,curToNodeChild),handleNodeAdded(curToNodeChild))}curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling}cleanupFromEl(fromEl,curFromNodeChild,curFromNodeKey);var specialElHandler=specialElHandlers[fromEl.nodeName];specialElHandler&&specialElHandler(fromEl,toEl)}indexTree(fromNode);var morphedNode=fromNode,morphedNodeType=morphedNode.nodeType,toNodeType=toNode.nodeType;if(!childrenOnly)if(1===morphedNodeType)1===toNodeType?compareNodeNames(fromNode,toNode)||(onNodeDiscarded(fromNode),morphedNode=moveChildren(fromNode,createElementNS(toNode.nodeName,toNode.namespaceURI))):morphedNode=toNode;else if(3===morphedNodeType||8===morphedNodeType){if(toNodeType===morphedNodeType)return morphedNode.nodeValue!==toNode.nodeValue&&(morphedNode.nodeValue=toNode.nodeValue),morphedNode;morphedNode=toNode}if(morphedNode===toNode)onNodeDiscarded(fromNode);else{if(toNode.isSameNode&&toNode.isSameNode(morphedNode))return;if(morphEl(morphedNode,toNode,childrenOnly),keyedRemovalList)for(var i=0,len=keyedRemovalList.length;i<len;i++){var elToRemove=fromNodesLookup[keyedRemovalList[i]];elToRemove&&removeNode(elToRemove,elToRemove.parentNode,!1)}}return!childrenOnly&&morphedNode!==fromNode&&fromNode.parentNode&&(morphedNode.actualize&&(morphedNode=morphedNode.actualize(fromNode.ownerDocument||doc)),fromNode.parentNode.replaceChild(morphedNode,fromNode)),morphedNode}}var morphdom=morphdomFactory(morphAttrs);simply.morphdom=morphdom}()},setupInlineComps:function(dom,docStr,tmpl){simply.gets=simply.gets?simply.gets:[];let simplyTemplates=dom.querySelectorAll("template[simply]");simplyTemplates&&simplyTemplates.forEach(element=>{let string,comp,tag=element.parentElement.tagName.toLowerCase(),regexstr,regex=new RegExp("get(.*"+tag+".*)","i");var allGets=/^\s*get\(.*\)/gm;let tempContent,check;for(docStr?(tempContent=docStr,string=docStr):"result"==window.name?(tempContent=window.frameElement.contentWindow.dataContent,string=tempContent):tempContent=dom.querySelector("body").innerHTML;null!==(m=allGets.exec(tempContent));)simply.gets.push(m[0]);if(0==simply.gets.filter(e=>e.includes(tag)).length&&!customElements.get(tag.toLowerCase())){if(!string){var request=new XMLHttpRequest;console.log(window.document.location.href),request.open("GET",window.document.location.href,!1),request.onload=function(){this.status>=200&&this.status<400&&(string=this.responseText)},request.send()}let inlineComp=simply.getBetweenTag({string:string,tag:tag}),parsed=simply.splitComponent(inlineComp);simply.registerComponent({name:tag,template:parsed.template,styles:parsed.styles,script:parsed.script,docStr:string,noFile:!0})}})},findShadowRootOrCustomElement:function(element){let parent=element.parentNode;for(;null!==parent;){if(parent instanceof ShadowRoot)return parent.host;if(!parent.tagName)return;if(parent.tagName.includes("-")&&void 0!==customElements.get(parent.tagName.toLowerCase())&&"A-OUTLET"!==parent.tagName&&"A-ROUTER"!==parent.tagName)return parent;parent=parent.parentNode}return null},observableSlim:function(){var paths,observables,targets,targetsProxy,dupProxy,_getProperty,_create;window.ObservableSlim=(paths=[],observables=[],targets=[],targetsProxy=[],dupProxy=null,_getProperty=function(obj,path){return path.split(".").reduce((function(prev,curr){return prev?prev[curr]:void 0}),obj||self)},_create=function(target,domDelay,originalObservable,originalPath){var observable=originalObservable||null,path=originalPath||[{target:target,property:""}];paths.push(path),target instanceof Array&&(target.hasOwnProperty("__length")?target.__length=target.length:Object.defineProperty(target,"__length",{enumerable:!1,value:target.length,writable:!0}));var changes=[],_getPath=function(target,property,jsonPointer){for(var fullPath="",lastTarget=null,i=0;i<path.length;i++)lastTarget instanceof Array&&!isNaN(path[i].property)&&(path[i].property=lastTarget.indexOf(path[i].target)),fullPath=fullPath+"."+path[i].property,lastTarget=path[i].target;return fullPath=(fullPath=fullPath+"."+property).substring(2),!0===jsonPointer&&(fullPath="/"+fullPath.replace(/\./g,"/")),fullPath},_notifyObservers=function(numChanges){if(!0!==observable.paused){var domDelayIsNumber="number"==typeof domDelay;if(domDelayIsNumber||!0===domDelay)setTimeout((function(){if(numChanges===changes.length){var changesCopy=changes.slice(0);changes=[];for(var i=0;i<observable.observers.length;i++)observable.observers[i](changesCopy)}}),domDelayIsNumber&&domDelay>0?domDelay:10);else{var changesCopy=changes.slice(0);changes=[];for(var i=0;i<observable.observers.length;i++)observable.observers[i](changesCopy)}}},handler={get:function(target,property){if("__getTarget"===property)return target;if("__isProxy"===property)return!0;if("__getParent"===property)return function(i){if(void 0===i)var i=1;var parentPath=_getPath(target,"__getParent").split(".");return parentPath.splice(-(i+1),i+1),_getProperty(observable.parentProxy,parentPath.join("."))};var parentPath;if("__getPath"===property)return _getPath(target,"__getParent").slice(0,-12);var targetProp=target[property];if(target instanceof Date&&targetProp instanceof Function&&null!==targetProp)return targetProp.bind(target);if(targetProp instanceof Object&&null!==targetProp&&target.hasOwnProperty(property)){if(!0===targetProp.__isProxy&&(targetProp=targetProp.__getTarget),targetProp.__targetPosition>-1&&null!==targets[targetProp.__targetPosition])for(var ttp=targetsProxy[targetProp.__targetPosition],i=0,l=ttp.length;i<l;i++)if(observable===ttp[i].observable)return ttp[i].proxy;var newPath=path.slice(0);return newPath.push({target:targetProp,property:property}),_create(targetProp,domDelay,observable,newPath)}return targetProp},deleteProperty:function(target,property){var originalChange=!0;dupProxy===proxy&&(originalChange=!1,dupProxy=null);var previousValue=Object.assign({},target);if(changes.push({type:"delete",target:target,property:property,newValue:null,previousValue:previousValue[property],currentPath:_getPath(target,property),jsonPointer:_getPath(target,property,!0),proxy:proxy}),!0===originalChange){observable.changesPaused||delete target[property];for(var a=0,l=targets.length;a<l&&target!==targets[a];a++);for(var currentTargetProxy=targetsProxy[a]||[],b=currentTargetProxy.length;b--;)currentTargetProxy[b].proxy!==proxy&&(dupProxy=currentTargetProxy[b].proxy,delete currentTargetProxy[b].proxy[property])}return _notifyObservers(changes.length),!0},set:function(target,property,value,receiver){value&&value.__isProxy&&(value=value.__getTarget);var originalChange=!0;dupProxy===proxy&&(originalChange=!1,dupProxy=null);var targetProp=target[property];if(targetProp!==value||!1===originalChange||"length"===property&&target instanceof Array&&target.__length!==value){var foundObservable=!0,typeOfTargetProp=typeof targetProp,type="update";if("undefined"===typeOfTargetProp&&(type="add"),changes.push({type:type,target:target,property:property,newValue:value,previousValue:receiver[property],currentPath:_getPath(target,property),jsonPointer:_getPath(target,property,!0),proxy:proxy}),"length"===property&&target instanceof Array&&target.__length!==value&&(changes[changes.length-1].previousValue=target.__length,target.__length=value),!0===originalChange){observable.changesPaused||(target[property]=value),foundObservable=!1;for(var targetPosition=target.__targetPosition,z=targetsProxy[targetPosition].length;z--;)if(observable===targetsProxy[targetPosition][z].observable&&null!==targets[targetsProxy[targetPosition][z].observable.parentTarget.__targetPosition]){foundObservable=!0;break}if(foundObservable){for(var currentTargetProxy=targetsProxy[targetPosition],b=0,l=currentTargetProxy.length;b<l;b++)currentTargetProxy[b].proxy!==proxy&&(dupProxy=currentTargetProxy[b].proxy,currentTargetProxy[b].proxy[property]=value);setTimeout((function(){if("object"===typeOfTargetProp&&null!==targetProp){for(var keys=Object.keys(target),i=0,l=keys.length;i<l;i++)if(target[keys[i]]===targetProp)return;var stillExists=!1;if(function iterate(target){for(var keys=Object.keys(target),i=0,l=keys.length;i<l;i++){var property,nestedTarget=target[keys[i]];if(nestedTarget instanceof Object&&null!==nestedTarget&&iterate(nestedTarget),nestedTarget===targetProp)return void(stillExists=!0)}}(target),!0===stillExists)return;!function iterate(obj){for(var keys=Object.keys(obj),i=0,l=keys.length;i<l;i++){var objProp=obj[keys[i]];objProp instanceof Object&&null!==objProp&&iterate(objProp)}for(var c=-1,i=0,l=targets.length;i<l;i++)if(obj===targets[i]){c=i;break}if(c>-1){for(var currentTargetProxy=targetsProxy[c],d=currentTargetProxy.length;d--;)if(observable===currentTargetProxy[d].observable){currentTargetProxy.splice(d,1);break}0==currentTargetProxy.length&&(targets[c]=null)}}(targetProp)}}),1e4)}}foundObservable&&_notifyObservers(changes.length)}return!0}},__targetPosition=target.__targetPosition;__targetPosition>-1||Object.defineProperty(target,"__targetPosition",{value:targets.length,writable:!1,enumerable:!1,configurable:!1});var proxy=new Proxy(target,handler);null===observable&&(observable={parentTarget:target,domDelay:domDelay,parentProxy:proxy,observers:[],paused:!1,path:path,changesPaused:!1},observables.push(observable));var proxyItem={target:target,proxy:proxy,observable:observable};return __targetPosition>-1?(null===targets[__targetPosition]&&(targets[__targetPosition]=target),targetsProxy[__targetPosition].push(proxyItem)):(targets.push(target),targetsProxy.push([proxyItem])),proxy},{create:function(target,domDelay,observer){if(!0===target.__isProxy)var target=target.__getTarget;var proxy=_create(target,domDelay);return"function"==typeof observer&&this.observe(proxy,observer),function iterate(proxy){for(var target=proxy.__getTarget,keys=Object.keys(target),i=0,l=keys.length;i<l;i++){var property=keys[i];target[property]instanceof Object&&null!==target[property]&&iterate(proxy[property])}}(proxy),proxy},observe:function(proxy,observer){for(var i=observables.length;i--;)if(observables[i].parentProxy===proxy){observables[i].observers.push(observer);break}},observerRemove:function(proxy,observer){for(var i=observables.length;i--;)if(observables[i].parentProxy===proxy){for(var b=observables[i].observers.length;b--;)if(observables[i].observers[b]===observer){observables[i].observers.splice(b,1);break}break}},pause:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].paused=!0,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].paused=!1,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].changesPaused=!0,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(proxy){for(var i=observables.length,foundMatch=!1;i--;)if(observables[i].parentProxy===proxy){observables[i].changesPaused=!1,foundMatch=!0;break}if(0==foundMatch)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(proxy){for(var matchedObservable=null,foundMatch=!1,c=observables.length;c--;)if(observables[c].parentProxy===proxy){matchedObservable=observables[c],foundMatch=!0;break}for(var a=targetsProxy.length;a--;)for(var b=targetsProxy[a].length;b--;)targetsProxy[a][b].observable===matchedObservable&&(targetsProxy[a].splice(b,1),0===targetsProxy[a].length&&(targets[a]=null));!0===foundMatch&&observables.splice(c,1)}});try{module.exports=ObservableSlim}catch(err){}},go:function(path){window.dispatchEvent(new CustomEvent("navigate",{detail:{href:path}}))},findParentWithState:function(element){let parent=element.parentElement;for(;parent;){const rootNode=parent.getRootNode?parent.getRootNode().host:null;if(parent=rootNode||parent.parentElement,parent&&parent.state)return parent}return null},page:function(){"use strict";var isarray=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)},pathToRegexp_1=pathToRegexp,parse_1=parse,compile_1=compile,tokensToFunction_1=tokensToFunction,tokensToRegExp_1=tokensToRegExp,PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(str){for(var tokens=[],key=0,index=0,path="",res;null!=(res=PATH_REGEXP.exec(str));){var m=res[0],escaped=res[1],offset=res.index;if(path+=str.slice(index,offset),index=offset+m.length,escaped)path+=escaped[1];else{path&&(tokens.push(path),path="");var prefix=res[2],name=res[3],capture=res[4],group=res[5],suffix=res[6],asterisk=res[7],repeat="+"===suffix||"*"===suffix,optional="?"===suffix||"*"===suffix,delimiter=prefix||"/",pattern=capture||group||(asterisk?".*":"[^"+delimiter+"]+?");tokens.push({name:name||key++,prefix:prefix||"",delimiter:delimiter,optional:optional,repeat:repeat,pattern:escapeGroup(pattern)})}}return index<str.length&&(path+=str.substr(index)),path&&tokens.push(path),tokens}function compile(str){return tokensToFunction(parse(str))}function tokensToFunction(tokens){for(var matches=new Array(tokens.length),i=0;i<tokens.length;i++)"object"==typeof tokens[i]&&(matches[i]=new RegExp("^"+tokens[i].pattern+"$"));return function(obj){for(var path="",data=obj||{},i=0;i<tokens.length;i++){var token=tokens[i];if("string"!=typeof token){var value=data[token.name],segment;if(null==value){if(token.optional)continue;throw new TypeError('Expected "'+token.name+'" to be defined')}if(isarray(value)){if(!token.repeat)throw new TypeError('Expected "'+token.name+'" to not repeat, but received "'+value+'"');if(0===value.length){if(token.optional)continue;throw new TypeError('Expected "'+token.name+'" to not be empty')}for(var j=0;j<value.length;j++){if(segment=encodeURIComponent(value[j]),!matches[i].test(segment))throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"');path+=(0===j?token.prefix:token.delimiter)+segment}}else{if(segment=encodeURIComponent(value),!matches[i].test(segment))throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"');path+=token.prefix+segment}}else path+=token}return path}}function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(group){return group.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(re,keys){return re.keys=keys,re}function flags(options){return options.sensitive?"":"i"}function regexpToRegexp(path,keys){var groups=path.source.match(/\((?!\?)/g);if(groups)for(var i=0;i<groups.length;i++)keys.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return attachKeys(path,keys)}function arrayToRegexp(path,keys,options){for(var parts=[],i=0;i<path.length;i++)parts.push(pathToRegexp(path[i],keys,options).source);var regexp;return attachKeys(new RegExp("(?:"+parts.join("|")+")",flags(options)),keys)}function stringToRegexp(path,keys,options){for(var tokens=parse(path),re=tokensToRegExp(tokens,options),i=0;i<tokens.length;i++)"string"!=typeof tokens[i]&&keys.push(tokens[i]);return attachKeys(re,keys)}function tokensToRegExp(tokens,options){for(var strict=(options=options||{}).strict,end=!1!==options.end,route="",lastToken=tokens[tokens.length-1],endsWithSlash="string"==typeof lastToken&&/\/$/.test(lastToken),i=0;i<tokens.length;i++){var token=tokens[i];if("string"==typeof token)route+=escapeString(token);else{var prefix=escapeString(token.prefix),capture=token.pattern;token.repeat&&(capture+="(?:"+prefix+capture+")*"),route+=capture=token.optional?prefix?"(?:"+prefix+"("+capture+"))?":"("+capture+")?":prefix+"("+capture+")"}}return strict||(route=(endsWithSlash?route.slice(0,-2):route)+"(?:\\/(?=$))?"),route+=end?"$":strict&&endsWithSlash?"":"(?=\\/|$)",new RegExp("^"+route,flags(options))}function pathToRegexp(path,keys,options){return isarray(keys=keys||[])?options||(options={}):(options=keys,keys=[]),path instanceof RegExp?regexpToRegexp(path,keys,options):isarray(path)?arrayToRegexp(path,keys,options):stringToRegexp(path,keys,options)}pathToRegexp_1.parse=parse_1,pathToRegexp_1.compile=compile_1,pathToRegexp_1.tokensToFunction=tokensToFunction_1,pathToRegexp_1.tokensToRegExp=tokensToRegExp_1;var hasDocument="undefined"!=typeof document,hasWindow="undefined"!=typeof window,hasHistory="undefined"!=typeof history,hasProcess="undefined"!=typeof process,clickEvent=hasDocument&&document.ontouchstart?"touchstart":"click",isLocation=hasWindow&&!(!window.history.location&&!window.location),loaded;function Page(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function createPage(){var pageInstance=new Page;function pageFn(){return page.apply(pageInstance,arguments)}return pageFn.callbacks=pageInstance.callbacks,pageFn.exits=pageInstance.exits,pageFn.base=pageInstance.base.bind(pageInstance),pageFn.strict=pageInstance.strict.bind(pageInstance),pageFn.start=pageInstance.start.bind(pageInstance),pageFn.stop=pageInstance.stop.bind(pageInstance),pageFn.show=pageInstance.show.bind(pageInstance),pageFn.back=pageInstance.back.bind(pageInstance),pageFn.redirect=pageInstance.redirect.bind(pageInstance),pageFn.replace=pageInstance.replace.bind(pageInstance),pageFn.dispatch=pageInstance.dispatch.bind(pageInstance),pageFn.exit=pageInstance.exit.bind(pageInstance),pageFn.configure=pageInstance.configure.bind(pageInstance),pageFn.sameOrigin=pageInstance.sameOrigin.bind(pageInstance),pageFn.clickHandler=pageInstance.clickHandler.bind(pageInstance),pageFn.create=createPage,pageFn.getRoutes=function(){return simply.routes},pageFn.getCurrentRoute=function(){var current=this.current;for(const[key,value]of Object.entries(simply.routes))if(current.match(value.regexp)&&"(.*)"!==key)return value;return!1},pageFn.getRouteByPath=function(path){for(const[key,value]of Object.entries(simply.routes))if(path.match(value.regexp)&&"(.*)"!==key)return{key:key,value:value};return!!simply.routes["(.*)"]&&{key:"(.*)",value:simply.routes["(.*)"]}},pageFn.deleteRouteByPath=function(path){console.log("hee",this,page.callbacks);let route=pageFn.getRouteByPath(path);var rebelCallbacks=route.value.page.callbacks;for(const[key,v]of Object.entries(route.value.callbacks)){console.log(v);const fn=v.originalFn;simply.page.callbacks=simply.page.callbacks.filter(cb=>cb.originalFn!==fn),route.value.page.callbacks=route.value.page.callbacks.filter(cb=>cb.originalFn!==fn)}simply.routes[route.key].callbacks=[]},pageFn.deleteExitCallbacksByPath=function(path){let route=pageFn.getRouteByPath(path);for(const[key,v]of Object.entries(route.value.page.exits)){const fn=v.originalFn;simply.page.exits=simply.page.exits.filter(cb=>cb.originalFn!==fn),route.value.page.exits=route.value.page.exits.filter(cb=>cb.originalFn!==fn)}simply.routes[route.key].exits=[]},Object.defineProperty(pageFn,"len",{get:function(){return pageInstance.len},set:function(val){pageInstance.len=val}}),Object.defineProperty(pageFn,"current",{get:function(){return pageInstance.current},set:function(val){pageInstance.current=val}}),pageFn.Context=Context,pageFn.Route=Route,pageFn}function page(path,fn){if("function"==typeof path)return page.call(this,"*",path);async function waitForRenderedAndReturnRoute(el){if(!el)throw new Error("Element not found");return await new Promise(resolve=>{let _rendered=el.rendered;Object.defineProperty(el,"rendered",{configurable:!0,enumerable:!0,get:()=>_rendered,set(value){_rendered=value,console.log("rendered changed to:",value),value&&resolve(value)}}),_rendered&&resolve(_rendered)}),new Promise(resolve=>{function check(){let routeEl=el.querySelector("route");return routeEl||(el.shadowRoot&&(routeEl=el.shadowRoot.querySelector("route"),routeEl)?routeEl:null)}let found=check();if(found)return resolve(found);const observer=new MutationObserver(()=>{const found=check();found&&(observer.disconnect(),resolve(found))});observer.observe(el,{childList:!0,subtree:!0})})}async function waitForRendered(component){return new Promise(resolve=>{if(!0===component.rendered)return console.log("Already rendered:",component),resolve();let _rendered=component.rendered;Object.defineProperty(component,"rendered",{get:()=>_rendered,set(value){_rendered=value,!0===value&&(console.log("Now rendered:",component),resolve())},configurable:!0})})}if("object"==typeof fn&&null!==fn&&!Array.isArray(fn)){var settings={...fn},children=fn.children?fn.children:void 0;arguments[1]=fn=async function(ctx,next){var route,parent;if(settings.child_of){var targetRoute,tree=simply.page.getRouteByPath(settings.path).value.tree,parentRootEl,lastParentComponent,targetParentRoute;for(let i=0;i<tree.length;i++){const path=tree[i],node=simply.routes[path];if(i>0){const parentPath=tree[i-1];parentRootEl=await waitForRenderedAndReturnRoute(parentRootEl.querySelector(lastParentComponent)),console.log({parentRootEl:parentRootEl,path:path,parentPath:parentPath,node:node}),console.log("next target",parentRootEl.querySelector(lastParentComponent)),console.log(parentRootEl,path,parentPath)}else parentRootEl=document.querySelector("route");lastParentComponent=node.settings.component,targetParentRoute=simply.page.getRouteByPath(path).value;const directChild=Array.from(parentRootEl.children).find(el=>el.matches(targetParentRoute.settings.component));if(i!==tree.length-1&&!directChild){let attrs=[];0==targetParentRoute.settings.shadow_root&&attrs.push("open"),targetParentRoute.settings.cache&&attrs.push("cache"),window.scrollPositions=window.scrollPositions?window.scrollPositions:{},simply.saveScrollPositions(parentRootEl,tree[i]),parentRootEl.innerHTML=`<${targetParentRoute.settings.component} ${attrs.join(" ")}></${targetParentRoute.settings.component}>`;let subjectComp=parentRootEl.querySelector(targetParentRoute.settings.component);await waitForRenderedAndReturnRoute(subjectComp)}if(directChild){console.log("dÃ¼z render for ",directChild);var component=directChild;directChild.render()}parentRootEl.parentElement.querySelectorAll("a").forEach((function(a){console.log(a,path,ctx.path);let href=a.getAttribute("href");href&&!href.startsWith("/")&&(href="/"+href);let rt=simply.page.getRouteByPath(href);path==rt.key||href==ctx.path?a.setAttribute("router-active",!0):a.removeAttribute("router-active")}))}}parentRootEl?(route=parentRootEl,settings=targetParentRoute.settings):route=settings.root?settings.root:document.querySelector("route");let directChild=Array.from(route.children).find(el=>el.matches(settings.component));if(directChild){console.log("dÃ¼z render for ",directChild);var component=directChild;directChild.render()}else{console.warn("INNERHTML");let attrs=[];0==settings.shadow_root&&attrs.push("open"),settings.cache&&attrs.push("cache"),simply.lastPath&&(window.scrollPositions=window.scrollPositions?window.scrollPositions:{},simply.saveScrollPositions(route,simply.lastPath)),route.innerHTML=`<${settings.component} ${attrs.join(" ")}></${settings.component}>`;var component=route.querySelector(settings.component);ctx.component=component,component.router_settings=settings,component.ctx=ctx}settings.title&&(document.title=settings.title),route.parentElement.querySelectorAll("a").forEach((function(a){let href=a.getAttribute("href");href&&!href.startsWith("/")&&(href="/"+href);let rt=simply.page.getRouteByPath(href);ctx.path==rt.key?a.setAttribute("router-active",!0):a.removeAttribute("router-active")})),await waitForRendered(component);try{component.querySelector("route").innerHTML=""}catch(e){}simply.lastPath=ctx.path}}if("function"==typeof fn){var route=new Route(path,null,this);function registerChildRoutes(children,parentPath=""){if(children)for(const child of children){const fullPath=parentPath+child.path;simply.router([{...child,path:fullPath}],parentPath),child.children&&registerChildRoutes(child.children,fullPath)}}simply.routes=simply.routes?simply.routes:{},simply.routes[route.path]=route,simply.routes[route.path].callbacks=simply.routes[route.path].callback?simply.routes[route.path].callback:[],simply.routes[route.path].settings=settings,simply.routes[route.path].page=this,registerChildRoutes(children,path);for(var i=1;i<arguments.length;++i){const wrappedFn=route.middleware(arguments[i]);this.callbacks.push(wrappedFn),simply.routes[route.path].callbacks.push(wrappedFn);const tree=[];let currentPath=route.path;for(;currentPath&&simply.routes[currentPath];){tree.unshift(currentPath);var parent=simply.routes[currentPath]&&simply.routes[currentPath].settings&&simply.routes[currentPath].settings.child_of;currentPath=parent||null}tree.length>1&&(simply.routes[route.path].tree=tree)}}else"string"==typeof path?(console.log("show or redirect"),this["string"==typeof fn?"redirect":"show"](path,fn)):this.start(path);return this}function unhandled(ctx){if(!ctx.handled){var current,page=this,window=this._window;(current=this._hashbang?isLocation&&this._getBase()+window.location.hash.replace("#!",""):isLocation&&window.location.pathname+window.location.search)!==ctx.canonicalPath&&(this.stop(),ctx.handled=!1,isLocation&&(window.location.href=ctx.canonicalPath))}}function escapeRegExp(s){return s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Context(path,state,pageInstance){var _page=this.page=pageInstance||page,window=_page._window,hashbang=_page._hashbang,pageBase=_page._getBase();"/"===path[0]&&0!==path.indexOf(pageBase)&&(path=pageBase+(hashbang?"#!":"")+path);var i=path.indexOf("?");this.canonicalPath=path;var re=new RegExp("^"+escapeRegExp(pageBase));if(this.path=path.replace(re,"")||"/",hashbang&&(this.path=this.path.replace("#!","")||"/"),this.title=hasDocument&&window.document.title,this.state=state||{},this.state.path=path,this.querystring=~i?_page._decodeURLEncodedURIComponent(path.slice(i+1)):"",this.pathname=_page._decodeURLEncodedURIComponent(~i?path.slice(0,i):path),this.params={},this.hash="",!hashbang){if(!~this.path.indexOf("#"))return;var parts=this.path.split("#");this.path=this.pathname=parts[0],this.hash=_page._decodeURLEncodedURIComponent(parts[1])||"",this.querystring=this.querystring.split("#")[0]}}function Route(path,options,page){var _page=this.page=page||globalPage,opts=options||{};opts.strict=opts.strict||_page._strict,this.path="*"===path?"(.*)":path,this.method="GET",this.regexp=pathToRegexp_1(this.path,this.keys=[],opts)}Page.prototype.configure=function(options){var opts=options||{};this._window=opts.window||hasWindow&&window,this._decodeURLComponents=!1!==opts.decodeURLComponents,this._popstate=!1!==opts.popstate&&hasWindow,this._click=!1!==opts.click&&hasDocument,this._hashbang=!!opts.hashbang;var _window=this._window;this._popstate?_window.addEventListener("popstate",this._onpopstate,!1):hasWindow&&_window.removeEventListener("popstate",this._onpopstate,!1),this._click?_window.document.addEventListener(clickEvent,this.clickHandler,!1):hasDocument&&_window.document.removeEventListener(clickEvent,this.clickHandler,!1),this._hashbang&&hasWindow&&!hasHistory?_window.addEventListener("hashchange",this._onpopstate,!1):hasWindow&&_window.removeEventListener("hashchange",this._onpopstate,!1)},Page.prototype.base=function(path){if(0===arguments.length)return this._base;this._base=path},Page.prototype._getBase=function(){var base=this._base;if(base)return base;var loc=hasWindow&&this._window&&this._window.location;return hasWindow&&this._hashbang&&loc&&"file:"===loc.protocol&&(base=loc.pathname),base},Page.prototype.strict=function(enable){if(0===arguments.length)return this._strict;this._strict=enable},Page.prototype.start=function(options){var opts=options||{};if(this.configure(opts),!1!==opts.dispatch){var url;if(this._running=!0,isLocation){var window,loc=this._window.location;url=this._hashbang&&~loc.hash.indexOf("#!")?loc.hash.substr(2)+loc.search:this._hashbang?loc.search+loc.hash:loc.pathname+loc.search+loc.hash}this.replace(url,null,!0,opts.dispatch)}},Page.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var window=this._window;this._click&&window.document.removeEventListener(clickEvent,this.clickHandler,!1),hasWindow&&window.removeEventListener("popstate",this._onpopstate,!1),hasWindow&&window.removeEventListener("hashchange",this._onpopstate,!1)}},Page.prototype.show=function(path,state,dispatch,push){var ctx=new Context(path,state,this),prev=this.prevContext;return this.simplyPrevContext={...prev},this.prevContext=ctx,this.current=ctx.path,!1!==dispatch&&this.dispatch(ctx,prev),!1!==ctx.handled&&!1!==push&&ctx.pushState(),ctx},Page.prototype.back=function(path,state){var page=this;if(this.len>0){var window=this._window;hasHistory&&window.history.back(),this.len--}else path?setTimeout((function(){page.show(path,state)})):setTimeout((function(){page.show(page._getBase(),state)}))},Page.prototype.redirect=function(from,to){var inst=this;"string"==typeof from&&"string"==typeof to&&page.call(this,from,(function(e){setTimeout((function(){inst.replace(to)}),0)})),"string"==typeof from&&void 0===to&&setTimeout((function(){inst.replace(from)}),0)},Page.prototype.replace=function(path,state,init,dispatch){var ctx=new Context(path,state,this),prev=this.prevContext;return this.prevContext=ctx,this.current=ctx.path,ctx.init=init,ctx.save(),!1!==dispatch&&this.dispatch(ctx,prev),ctx},Page.prototype.dispatch=async function(ctx,prev){var i=0,j=0,page=this;function nextExit(){var fn=page.exits[j++];if(!fn)return nextEnter();let theRoute=simply.page.getRouteByPath(page.current);fn(prev,nextExit)}function nextEnter(){var fn=page.callbacks[i++];if(ctx.path===page.current)return fn?void fn(ctx,nextEnter):unhandled.call(page,ctx);ctx.handled=!1}nextEnter()},Page.prototype.exit=function(path,fn){if("function"==typeof path)return this.exit("*",path);var route=new Route(path,null,this);let theRoutePath=simply.page.getRouteByPath(path).value.path;simply.routes[theRoutePath].exits=simply.routes[theRoutePath].exits?simply.routes[theRoutePath].exits:[],simply.page.deleteExitCallbacksByPath(theRoutePath);for(var i=1;i<arguments.length;++i){const wrappedFn=route.middleware(arguments[i]);this.exits.push(wrappedFn),wrappedFn.pureFunc=arguments[i],simply.routes[theRoutePath].exits.push(wrappedFn)}console.log(theRoutePath,"'in exitleri silindi yenisi eklendi")},Page.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var el=e.target,eventPath=e.path||(e.composedPath?e.composedPath():null);if(eventPath)for(var i=0;i<eventPath.length;i++)if(eventPath[i].nodeName&&"A"===eventPath[i].nodeName.toUpperCase()&&eventPath[i].href){el=eventPath[i];break}for(;el&&"A"!==el.nodeName.toUpperCase();)el=el.parentNode;if(el&&"A"===el.nodeName.toUpperCase()){var svg="object"==typeof el.href&&"SVGAnimatedString"===el.href.constructor.name;if(!el.hasAttribute("download")&&"external"!==el.getAttribute("rel")){var link=el.getAttribute("href");if((this._hashbang||!this._samePath(el)||!el.hash&&"#"!==link)&&!(link&&link.indexOf("mailto:")>-1)&&!(svg?el.target.baseVal:el.target)&&(svg||this.sameOrigin(el.href))){var path=svg?el.href.baseVal:el.pathname+el.search+(el.hash||"");path="/"!==path[0]?"/"+path:path,hasProcess&&path.match(/^\/[a-zA-Z]:\//)&&(path=path.replace(/^\/[a-zA-Z]:\//,"/"));var orig=path,pageBase=this._getBase();if(0===path.indexOf(pageBase)&&(path=path.substr(pageBase.length)),this.current==path){let route;if(!simply.page.getRouteByPath(path).value.settings.same_page_refresh)return console.log("same page baba, no refresh sana",this,e),void e.preventDefault()}this._hashbang&&(path=path.replace("#!","")),(!pageBase||orig!==path||isLocation&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(orig))}}}}},Page.prototype._onpopstate=(loaded=!1,hasWindow?(hasDocument&&"complete"===document.readyState?loaded=!0:window.addEventListener("load",(function(){setTimeout((function(){loaded=!0}),0)})),function onpopstate(e){if(loaded){var page=this;if(e.state){var path=e.state.path;e.state.popstate=!0,this.replace(path,e.state)}else if(isLocation){var loc=this._window.location;this.show(loc.pathname+loc.search+loc.hash,void 0,void 0,!1)}}}):function(){}),Page.prototype._which=function(e){return null==(e=e||hasWindow&&this._window.event).which?e.button:e.which},Page.prototype._toURL=function(href){var window=this._window;if("function"==typeof URL&&isLocation)return new URL(href,window.location.toString());if(hasDocument){var anc=window.document.createElement("a");return anc.href=href,anc}},Page.prototype.sameOrigin=function(href){if(!href||!isLocation)return!1;var url=this._toURL(href),window,loc=this._window.location;return loc.protocol===url.protocol&&loc.hostname===url.hostname&&(loc.port===url.port||""===loc.port&&(80==url.port||443==url.port))},Page.prototype._samePath=function(url){if(!isLocation)return!1;var window,loc=this._window.location;return url.pathname===loc.pathname&&url.search===loc.search},Page.prototype._decodeURLEncodedURIComponent=function(val){return"string"!=typeof val?val:this._decodeURLComponents?decodeURIComponent(val.replace(/\+/g," ")):val},Context.prototype.pushState=function(){var page=this.page,window=page._window,hashbang=page._hashbang;page.len++,hasHistory&&window.history.pushState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Context.prototype.save=function(){var page=this.page;hasHistory&&page._window.history.replaceState(this.state,this.title,page._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Route.prototype.middleware=function(fn){var self=this;function wrapper(ctx,next){if(self.match(ctx.path,ctx.params,ctx.routePath))return ctx.routePath=self.path,fn(ctx,next);next()}return wrapper.originalFn=fn,wrapper},Route.prototype.findRouteWithPath=function(path){return qsIndex=path.indexOf("?"),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp.exec(decodeURIComponent(pathname)),m||!1},Route.prototype.match=function(path,params){var keys=this.keys,qsIndex=path.indexOf("?"),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp.exec(decodeURIComponent(pathname));if(!m)return!1;delete params[0];for(var i=1,len=m.length;i<len;++i){var key=keys[i-1],val=this.page._decodeURLEncodedURIComponent(m[i]);void 0===val&&hasOwnProperty.call(params,key.name)||(params[key.name]=val)}return!0};var globalPage=createPage(),page_js=globalPage,default_1=globalPage;return page_js.default=default_1,page_js},router:function(routes,child_of){simply.page.Context||simply.initRouter(),routes.forEach((function(route){simply.page(route.path,{...route,child_of:child_of},...route.callbacks||[])}))},getElementUniqueId:function(el){const parts=[];for(;el;){if(el instanceof ShadowRoot){parts.push("shadowroot"),el=el.host;continue}const tag=el.tagName.toLowerCase(),parent=el.parentNode||el.getRootNode().host;if(!parent)break;const siblings=undefined,index=Array.from(parent.children).indexOf(el);parts.push(`${tag}[${index}]`),el=parent instanceof Element||parent instanceof ShadowRoot?parent:null}return parts.reverse().join(" > ")},saveScrollPositions:function(root,path){const scrollPositions={},route=root.querySelector("route");function isInsideRoute(el){return route&&(route===el||route.contains(el))}function traverse(el){if(el instanceof Element&&!isInsideRoute(el)){if(0!==el.scrollLeft||0!==el.scrollTop){const id=simply.getElementUniqueId(el);scrollPositions[id]={x:el.scrollLeft,y:el.scrollTop}}if(el.shadowRoot)for(const child of el.shadowRoot.children)traverse(child);for(const child of el.children)traverse(child)}}traverse(root),window.scrollPositions[path]=scrollPositions},qs:function(){var toString=Object.prototype.toString,isint=/^[0-9]+$/;function promote(parent,key){if(0==parent[key].length)return parent[key]={};var t={};for(var i in parent[key])t[i]=parent[key][i];return parent[key]=t,t}function parse(parts,parent,key,val){var part=parts.shift();if(part){var obj=parent[key]=parent[key]||[];"]"===part?Array.isArray(obj)?""!==val&&obj.push(val):"object"==typeof obj?obj[Object.keys(obj).length]=val:obj=parent[key]=[parent[key],val]:-1!==part.indexOf("]")?(part=part.substr(0,part.length-1),!isint.test(part)&&Array.isArray(obj)&&(obj=promote(parent,key)),parse(parts,obj,part,val)):(!isint.test(part)&&Array.isArray(obj)&&(obj=promote(parent,key)),parse(parts,obj,part,val))}else Array.isArray(parent[key])?parent[key].push(val):"object"==typeof parent[key]||void 0===parent[key]?parent[key]=val:parent[key]=[parent[key],val]}function merge(parent,key,val){if(~key.indexOf("]")){var parts;parse(key.split("["),parent,"base",val)}else{if(!isint.test(key)&&Array.isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t}set(parent.base,key,val)}return parent}function parseObject(obj){var ret={base:{}};return Object.keys(obj).forEach((function(name){merge(ret,name,obj[name])})),ret.base}function parseString(str){return String(str).split("&").reduce((function(ret,pair){try{pair=decodeURIComponent(pair.replace(/\+/g," "))}catch(e){}var eql=pair.indexOf("="),brace=lastBraceInKey(pair),key=pair.substr(0,brace||eql),val=pair.substr(brace||eql);return val=val.substr(val.indexOf("=")+1),""===key&&(key=pair,val=""),merge(ret,key,val)}),{base:{}}).base}function stringify(obj,prefix){return Array.isArray(obj)?stringifyArray(obj,prefix):"[object Object]"===toString.call(obj)?stringifyObject(obj,prefix):"string"==typeof obj?stringifyString(obj,prefix):prefix+"="+obj}function stringifyString(str,prefix){if(!prefix)throw new TypeError("stringify expects an object");return prefix+"="+encodeURIComponent(str)}function stringifyArray(arr,prefix){var ret=[];if(!prefix)throw new TypeError("stringify expects an object");for(var i=0;i<arr.length;i++)ret.push(stringify(arr[i],prefix+"["+i+"]"));return ret.join("&")}function stringifyObject(obj,prefix){for(var ret=[],keys=Object.keys(obj),key,i=0,len=keys.length;i<len;++i)key=keys[i],ret.push(stringify(obj[key],prefix?prefix+"["+encodeURIComponent(key)+"]":encodeURIComponent(key)));return ret.join("&")}function set(obj,key,val){var v=obj[key];void 0===v?obj[key]=val:Array.isArray(v)?v.push(val):obj[key]=[v,val]}function lastBraceInKey(str){for(var len=str.length,brace,c,i=0;i<len;++i)if("]"===(c=str[i])&&(brace=!1),"["===c&&(brace=!0),"="===c&&!brace)return i}return{parse:function(str){return null==str||""===str?{}:"object"==typeof str?parseObject(str):parseString(str)},stringify:stringify}}(),initRouter:function(a,b){window.page=simply.page(),simply.page=window.page,simply.page.configure({window:window});var base=document.querySelector("base[href]");if(base){var base_href=base.getAttribute("href").replace(/\/$/,"");simply.page.base(base_href)}a&&b&&simply.page.redirect(a,b)},initWcRouter(){this.wcRouter()},init:function(){this.morphdom(),this.observableSlim(),simply.page.redirect=function(a,b){simply.initRouter(a,b)},window.get=this.get,document.onreadystatechange=function(){"complete"==document.readyState&&simply.setupInlineComps(document)}}},simply.init();
//# sourceMappingURL=simply.min.js.map