/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).UniversalRouter=factory()}(this,(function(){"use strict";function lexer(str){for(var tokens=[],i=0;i<str.length;){var _char=str[i];if("*"!==_char&&"+"!==_char&&"?"!==_char)if("\\"!==_char)if("{"!==_char)if("}"!==_char)if(":"!==_char)if("("!==_char)tokens.push({type:"CHAR",index:i,value:str[i++]});else{var count=1,pattern="",j;if("?"===str[j=i+1])throw new TypeError('Pattern cannot start with "?" at '+j);for(;j<str.length;)if("\\"!==str[j]){if(")"===str[j]){if(0===--count){j++;break}}else if("("===str[j]&&(count++,"?"!==str[j+1]))throw new TypeError("Capturing groups are not allowed at "+j);pattern+=str[j++]}else pattern+=str[j++]+str[j++];if(count)throw new TypeError("Unbalanced pattern at "+i);if(!pattern)throw new TypeError("Missing pattern at "+i);tokens.push({type:"PATTERN",index:i,value:pattern}),i=j}else{for(var name="",j=i+1;j<str.length;){var code=str.charCodeAt(j);if(!(code>=48&&code<=57||code>=65&&code<=90||code>=97&&code<=122||95===code))break;name+=str[j++]}if(!name)throw new TypeError("Missing parameter name at "+i);tokens.push({type:"NAME",index:i,value:name}),i=j}else tokens.push({type:"CLOSE",index:i,value:str[i++]});else tokens.push({type:"OPEN",index:i,value:str[i++]});else tokens.push({type:"ESCAPED_CHAR",index:i++,value:str[i++]});else tokens.push({type:"MODIFIER",index:i,value:str[i++]})}return tokens.push({type:"END",index:i,value:""}),tokens}function parse(str,options){void 0===options&&(options={});for(var tokens=lexer(str),_a=options.prefixes,prefixes=void 0===_a?"./":_a,defaultPattern="[^"+escapeString(options.delimiter||"/#?")+"]+?",result=[],key=0,i=0,path="",tryConsume=function tryConsume(type){if(i<tokens.length&&tokens[i].type===type)return tokens[i++].value},mustConsume=function mustConsume(type){var value=tryConsume(type);if(void 0!==value)return value;var _a=tokens[i],nextType=_a.type,index=_a.index;throw new TypeError("Unexpected "+nextType+" at "+index+", expected "+type)},consumeText=function consumeText(){for(var result="",value;value=tryConsume("CHAR")||tryConsume("ESCAPED_CHAR");)result+=value;return result};i<tokens.length;){var _char2=tryConsume("CHAR"),name=tryConsume("NAME"),pattern=tryConsume("PATTERN");if(name||pattern){var prefix=_char2||"";-1===prefixes.indexOf(prefix)&&(path+=prefix,prefix=""),path&&(result.push(path),path=""),result.push({name:name||key++,prefix:prefix,suffix:"",pattern:pattern||defaultPattern,modifier:tryConsume("MODIFIER")||""})}else{var value=_char2||tryConsume("ESCAPED_CHAR"),open;if(value)path+=value;else if(path&&(result.push(path),path=""),tryConsume("OPEN")){var prefix=consumeText(),name_1=tryConsume("NAME")||"",pattern_1=tryConsume("PATTERN")||"",suffix=consumeText();mustConsume("CLOSE"),result.push({name:name_1||(pattern_1?key++:""),pattern:name_1&&!pattern_1?defaultPattern:pattern_1,prefix:prefix,suffix:suffix,modifier:tryConsume("MODIFIER")||""})}else mustConsume("END")}}return result}function match(str,options){var keys=[],re;return regexpToFunction(pathToRegexp(str,keys,options),keys,options)}function regexpToFunction(re,keys,options){void 0===options&&(options={});var _a=options.decode,decode=void 0===_a?function(x){return x}:_a;return function(pathname){var m=re.exec(pathname);if(!m)return!1;for(var path=m[0],index=m.index,params=Object.create(null),_loop_1=function _loop_1(i){if(void 0===m[i])return"continue";var key=keys[i-1];"*"===key.modifier||"+"===key.modifier?params[key.name]=m[i].split(key.prefix+key.suffix).map((function(value){return decode(value,key)})):params[key.name]=decode(m[i],key)},i=1;i<m.length;i++)_loop_1(i);return{path:path,index:index,params:params}}}function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function flags(options){return options&&options.sensitive?"":"i"}function regexpToRegexp(path,keys){if(!keys)return path;for(var groupsRegex=/\((?:\?<(.*?)>)?(?!\?)/g,index=0,execResult=groupsRegex.exec(path.source);execResult;)keys.push({name:execResult[1]||index++,prefix:"",suffix:"",modifier:"",pattern:""}),execResult=groupsRegex.exec(path.source);return path}function arrayToRegexp(paths,keys,options){var parts=paths.map((function(path){return pathToRegexp(path,keys,options).source}));return new RegExp("(?:"+parts.join("|")+")",flags(options))}function stringToRegexp(path,keys,options){return tokensToRegexp(parse(path,options),keys,options)}function tokensToRegexp(tokens,keys,options){void 0===options&&(options={});for(var _a=options.strict,strict=void 0!==_a&&_a,_b=options.start,start=void 0===_b||_b,_c=options.end,end=void 0===_c||_c,_d=options.encode,encode=void 0===_d?function(x){return x}:_d,endsWith="["+escapeString(options.endsWith||"")+"]|$",delimiter="["+escapeString(options.delimiter||"/#?")+"]",route=start?"^":"",_i=0,tokens_1=tokens;_i<tokens_1.length;_i++){var token=tokens_1[_i];if("string"==typeof token)route+=escapeString(encode(token));else{var prefix=escapeString(encode(token.prefix)),suffix=escapeString(encode(token.suffix));if(token.pattern)if(keys&&keys.push(token),prefix||suffix)if("+"===token.modifier||"*"===token.modifier){var mod="*"===token.modifier?"?":"";route+="(?:"+prefix+"((?:"+token.pattern+")(?:"+suffix+prefix+"(?:"+token.pattern+"))*)"+suffix+")"+mod}else route+="(?:"+prefix+"("+token.pattern+")"+suffix+")"+token.modifier;else route+="("+token.pattern+")"+token.modifier;else route+="(?:"+prefix+suffix+")"+token.modifier}}if(end)strict||(route+=delimiter+"?"),route+=options.endsWith?"(?="+endsWith+")":"$";else{var endToken=tokens[tokens.length-1],isEndDelimited="string"==typeof endToken?delimiter.indexOf(endToken[endToken.length-1])>-1:void 0===endToken;strict||(route+="(?:"+delimiter+"(?="+endsWith+"))?"),isEndDelimited||(route+="(?="+delimiter+"|"+endsWith+")")}return new RegExp(route,flags(options))}function pathToRegexp(path,keys,options){return path instanceof RegExp?regexpToRegexp(path,keys):Array.isArray(path)?arrayToRegexp(path,keys,options):stringToRegexp(path,keys,options)}function decode(val){try{return decodeURIComponent(val)}catch(err){return val}}function matchRoute(route,baseUrl,options,pathname,parentParams){var matchResult,childMatches,childIndex=0;return{next:function next(routeToSkip){if(route===routeToSkip)return{done:!0,value:!1};if(!matchResult){var rt=route,end=!rt.children;if(rt.match||(rt.match=match(rt.path||"",Object.assign({end:end},options))),matchResult=rt.match(pathname)){var _matchResult,path=matchResult.path;return matchResult.path=end||"/"!==path.charAt(path.length-1)?path:path.substr(1),matchResult.params=Object.assign({},parentParams,matchResult.params),{done:!1,value:{route:route,baseUrl:baseUrl,path:matchResult.path,params:matchResult.params}}}}if(matchResult&&route.children)for(;childIndex<route.children.length;){if(!childMatches){var childRoute=route.children[childIndex];childRoute.parent=route,childMatches=matchRoute(childRoute,baseUrl+matchResult.path,options,pathname.substr(matchResult.path.length),matchResult.params)}var childMatch=childMatches.next(routeToSkip);if(!childMatch.done)return{done:!1,value:childMatch.value};childMatches=null,childIndex++}return{done:!0,value:!1}}}}function resolveRoute(context,params){return context.route.component?(document.querySelector("router").innerHTML="<"+context.route.component+"></"+context.route.component+">",{context:context,params:params}):"function"==typeof context.route.action?(console.log("resolveroute",context,params),console.log("resolveroute",context,params),console.log("resolveroute",context,params),console.log("resolveroute",context,params),console.log(document.querySelector("router"),context.route.component),{context:context,params:params}):void 0}function isChildRoute(parentRoute,childRoute){for(var route=childRoute;route;)if((route=route.parent)===parentRoute)return!0;return!1}var UniversalRouter;return function(){function UniversalRouter(routes,options){if(!routes||"object"!=typeof routes)throw new TypeError("Invalid routes");this.options=Object.assign({decode:decode},options),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(routes)?{path:"",children:routes,parent:null}:routes,this.root.parent=null}var _proto;return UniversalRouter.prototype.resolve=function resolve(pathnameOrContext){console.log("bıdık"),console.log("bıdık"),console.log("bıdık"),console.log("bıdık"),console.log("bıdık");var _this=this,context=Object.assign({router:this},this.options.context,"string"==typeof pathnameOrContext?{pathname:pathnameOrContext}:pathnameOrContext),matchResult=matchRoute(this.root,this.baseUrl,this.options,context.pathname.substr(this.baseUrl.length)),resolve=this.options.resolveRoute||resolveRoute,matches,nextMatches,currentContext=context;function next(resume,parent,prevResult){void 0===parent&&(parent=!matches.done&&matches.value.route);var routeToSkip=null===prevResult&&!matches.done&&matches.value.route;if(matches=nextMatches||matchResult.next(routeToSkip),nextMatches=null,!resume&&(matches.done||!isChildRoute(parent,matches.value.route)))return nextMatches=matches,Promise.resolve(null);if(matches.done){var error=new Error("Route not found");return error.status=404,Promise.reject(error)}return currentContext=Object.assign({},context,matches.value),console.log(matches),Promise.resolve(resolve(currentContext,matches.value.params)).then((function(result){return null!=result?result:next(resume,parent,result)}))}return context.next=next,Promise.resolve().then((function(){return next(!0,_this.root)})).catch((function(error){if(_this.options.errorHandler)return _this.options.errorHandler(error,currentContext);throw error}))},UniversalRouter}()}));
//# sourceMappingURL=universal-router-9.2.0.min.js.map